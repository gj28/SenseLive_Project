(self.webpackChunkangularfiebase_authentication=self.webpackChunkangularfiebase_authentication||[]).push([[179],{2011:(ot,De,O)=>{"use strict";O.d(De,{hO:()=>$e,xv:()=>_e,Dh:()=>ue,GT:()=>me,cc:()=>xe,on:()=>G,pX:()=>se});var _=O(5e3),B=O(127),N=O(5813);ot=O.hmd(ot);const ae=["ngOnDestroy"],se=(ce,Re,Pe,he={})=>new Proxy(ce,{get:(be,ve)=>Pe.runOutsideAngular(()=>{var ze;if(ce[ve])return(null===(ze=null==he?void 0:he.spy)||void 0===ze?void 0:ze.get)&&he.spy.get(ve,ce[ve]),ce[ve];if(ae.indexOf(ve)>-1)return()=>{};const re=Re.toPromise().then(Qe=>{const X=Qe&&Qe[ve];return"function"==typeof X?X.bind(Qe):X&&X.then?X.then(pe=>Pe.run(()=>pe)):Pe.run(()=>X)});return new Proxy(()=>{},{get:(Qe,X)=>re[X],apply:(Qe,X,pe)=>re.then(fe=>{var ye;const Fe=fe&&fe(...pe);return(null===(ye=null==he?void 0:he.spy)||void 0===ye?void 0:ye.apply)&&he.spy.apply(ve,pe,Fe),Fe})})})}),me=(ce,Re)=>{Re.forEach(Pe=>{Object.getOwnPropertyNames(Pe.prototype||Pe).forEach(he=>{Object.defineProperty(ce.prototype,he,Object.getOwnPropertyDescriptor(Pe.prototype||Pe,he))})})};class le{constructor(Re){return Re}}const ue=new _.OlP("angularfire2.app.options"),_e=new _.OlP("angularfire2.app.name");function G(ce,Re,Pe){const be="object"==typeof Pe&&Pe||{};be.name=be.name||"string"==typeof Pe&&Pe||"[DEFAULT]";const ze=B.Z.apps.filter(re=>re&&re.name===be.name)[0]||Re.runOutsideAngular(()=>B.Z.initializeApp(ce,be));try{JSON.stringify(ce)!==JSON.stringify(ze.options)&&$("error",`${ze.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(re){}return new le(ze)}const $=(ce,...Re)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ce](...Re)},ne={provide:le,useFactory:G,deps:[ue,_.R0b,[new _.FiY,_e]]};let $e=(()=>{class ce{constructor(Pe){B.Z.registerVersion("angularfire",N.q4.full,"core"),B.Z.registerVersion("angularfire",N.q4.full,"app-compat"),B.Z.registerVersion("angular",_.q4F.full,Pe.toString())}static initializeApp(Pe,he){return{ngModule:ce,providers:[{provide:ue,useValue:Pe},{provide:_e,useValue:he}]}}}return ce.\u0275fac=function(Pe){return new(Pe||ce)(_.LFG(_.Lbi))},ce.\u0275mod=_.oAB({type:ce}),ce.\u0275inj=_.cJS({providers:[ne]}),ce})();function xe(ce,Re,Pe,he,be){const[,ve,ze]=globalThis.\u0275AngularfireInstanceCache.find(re=>re[0]===ce)||[];if(ve)return function Le(ce,Re){try{return ce.toString()===Re.toString()}catch(Pe){return ce===Re}}(be,ze)||(Q("error",`${Re} was already initialized on the ${Pe} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),Q("warn",{is:be,was:ze})),ve;{const re=he();return globalThis.\u0275AngularfireInstanceCache.push([ce,re,be]),re}}const je=!!ot.hot,Q=(ce,...Re)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ce](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,De,O)=>{"use strict";O.d(De,{q4:()=>Hu,iC:()=>Ss,fc:()=>Xo,HU:()=>hd,vb:()=>zu,JM:()=>Yp});var _=O(5e3),B=O(5867),N=O(5861),ae=O(9681),se=O(2090),me=O(4859),le=O(1877),ue=O(2940);const _e="@firebase/installations",G="0.5.5",ne=`w:${G}`,$e="FIS_v2",Re=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pe(b){return b instanceof se.ZR&&b.code.includes("request-failed")}function he({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function be(b){return{token:b.token,requestStatus:2,expiresIn:fe(b.expiresIn),creationTime:Date.now()}}function ve(b,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,N.Z)(function*(b,T){const U=(yield T.json()).error;return Re.create("request-failed",{requestName:b,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function re({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function Qe(b,{refreshToken:T}){const P=re(b);return P.append("Authorization",function ye(b){return`${$e} ${b}`}(T)),P}function X(b){return pe.apply(this,arguments)}function pe(){return(pe=(0,N.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function fe(b){return Number(b.replace("s","000"))}function Fe(b,T){return de.apply(this,arguments)}function de(){return(de=(0,N.Z)(function*(b,{fid:T}){const P=he(b),J={method:"POST",headers:re(b),body:JSON.stringify({fid:T,authVersion:$e,appId:b.appId,sdkVersion:ne})},Oe=yield X(()=>fetch(P,J));if(Oe.ok){const He=yield Oe.json();return{fid:He.fid||T,registrationStatus:2,refreshToken:He.refreshToken,authToken:be(He.authToken)}}throw yield ve("Create Installation",Oe)})).apply(this,arguments)}function yt(b){return new Promise(T=>{setTimeout(T,b)})}const xn=/^[cdef][\w-]{21}$/;function rt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const P=function ur(b){return function Zt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return xn.test(P)?P:""}catch(b){return""}}function sn(b){return`${b.appName}!${b.appId}`}const yr=new Map;function Yt(b,T){const P=sn(b);In(P,T),function Li(b,T){const P=function Dr(){return!Kn&&"BroadcastChannel"in self&&(Kn=new BroadcastChannel("[Firebase] FID Change"),Kn.onmessage=b=>{In(b.data.key,b.data.fid)}),Kn}();P&&P.postMessage({key:b,fid:T}),function Zi(){0===yr.size&&Kn&&(Kn.close(),Kn=null)}()}(P,T)}function In(b,T){const P=yr.get(b);if(P)for(const U of P)U(T)}let Kn=null;const Fn="firebase-installations-store";let Yi=null;function ht(){return Yi||(Yi=(0,ue.openDb)("firebase-installations-database",1,b=>{0===b.oldVersion&&b.createObjectStore(Fn)})),Yi}function Or(b,T){return An.apply(this,arguments)}function An(){return(An=(0,N.Z)(function*(b,T){const P=sn(b),Y=(yield ht()).transaction(Fn,"readwrite"),J=Y.objectStore(Fn),Oe=yield J.get(P);return yield J.put(T,P),yield Y.complete,(!Oe||Oe.fid!==T.fid)&&Yt(b,T.fid),T})).apply(this,arguments)}function Wt(b){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,N.Z)(function*(b){const T=sn(b),U=(yield ht()).transaction(Fn,"readwrite");yield U.objectStore(Fn).delete(T),yield U.complete})).apply(this,arguments)}function ct(b,T){return ut.apply(this,arguments)}function ut(){return(ut=(0,N.Z)(function*(b,T){const P=sn(b),Y=(yield ht()).transaction(Fn,"readwrite"),J=Y.objectStore(Fn),Oe=yield J.get(P),He=T(Oe);return void 0===He?yield J.delete(P):yield J.put(He,P),yield Y.complete,He&&(!Oe||Oe.fid!==He.fid)&&Yt(b,He.fid),He})).apply(this,arguments)}function bt(b){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,N.Z)(function*(b){let T;const P=yield ct(b,U=>{const Y=lr(U),J=St(b,Y);return T=J.registrationPromise,J.installationEntry});return""===P.fid?{installationEntry:yield T}:{installationEntry:P,registrationPromise:T}})).apply(this,arguments)}function lr(b){return Vs(b||{fid:rt(),registrationStatus:0})}function St(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Re.create("app-offline"))};const P={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function it(b,T){return Je.apply(this,arguments)}(b,P);return{installationEntry:P,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Us(b)}:{installationEntry:T}}function Je(){return(Je=(0,N.Z)(function*(b,T){try{return Or(b,yield Fe(b,T))}catch(P){throw Pe(P)&&409===P.customData.serverCode?yield Wt(b):yield Or(b,{fid:T.fid,registrationStatus:0}),P}})).apply(this,arguments)}function Us(b){return ms.apply(this,arguments)}function ms(){return(ms=(0,N.Z)(function*(b){let T=yield jt(b);for(;1===T.registrationStatus;)yield yt(100),T=yield jt(b);if(0===T.registrationStatus){const{installationEntry:P,registrationPromise:U}=yield bt(b);return U||P}return T})).apply(this,arguments)}function jt(b){return ct(b,T=>{if(!T)throw Re.create("installation-not-found");return Vs(T)})}function Vs(b){return function Zn(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function wn(b,T){return j.apply(this,arguments)}function j(){return(j=(0,N.Z)(function*({appConfig:b,platformLoggerProvider:T},P){const U=q(b,P),Y=Qe(b,P),J=T.getImmediate({optional:!0});J&&Y.append("x-firebase-client",J.getPlatformInfoString());const He={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:ne}})},Ze=yield X(()=>fetch(U,He));if(Ze.ok)return be(yield Ze.json());throw yield ve("Generate Auth Token",Ze)})).apply(this,arguments)}function q(b,{fid:T}){return`${he(b)}/${T}/authTokens:generate`}function z(b){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,N.Z)(function*(b,T=!1){let P;const U=yield ct(b.appConfig,J=>{if(!Yn(J))throw Re.create("not-registered");const Oe=J.authToken;if(!T&&cr(Oe))return J;if(1===Oe.requestStatus)return P=ie(b,T),J;{if(!navigator.onLine)throw Re.create("app-offline");const He=Qn(J);return P=zt(b,He),He}});return P?yield P:U.authToken})).apply(this,arguments)}function ie(b,T){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,N.Z)(function*(b,T){let P=yield dt(b.appConfig);for(;1===P.authToken.requestStatus;)yield yt(100),P=yield dt(b.appConfig);const U=P.authToken;return 0===U.requestStatus?z(b,T):U})).apply(this,arguments)}function dt(b){return ct(b,T=>{if(!Yn(T))throw Re.create("not-registered");return function oe(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function zt(b,T){return on.apply(this,arguments)}function on(){return(on=(0,N.Z)(function*(b,T){try{const P=yield wn(b,T),U=Object.assign(Object.assign({},T),{authToken:P});return yield Or(b.appConfig,U),P}catch(P){if(!Pe(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Or(b.appConfig,U)}else yield Wt(b.appConfig);throw P}})).apply(this,arguments)}function Yn(b){return void 0!==b&&2===b.registrationStatus}function cr(b){return 2===b.requestStatus&&!function Nt(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function Qn(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function W(){return(W=(0,N.Z)(function*(b){const T=b,{installationEntry:P,registrationPromise:U}=yield bt(T.appConfig);return U?U.catch(console.error):z(T).catch(console.error),P.fid})).apply(this,arguments)}function qe(){return(qe=(0,N.Z)(function*(b,T=!1){const P=b;return yield st(P.appConfig),(yield z(P,T)).token})).apply(this,arguments)}function st(b){return At.apply(this,arguments)}function At(){return(At=(0,N.Z)(function*(b){const{registrationPromise:T}=yield bt(b);T&&(yield T)})).apply(this,arguments)}function va(b){return Re.create("missing-app-config-values",{valueName:b})}const an="installations",Ft=b=>{const T=b.getProvider("app").getImmediate(),P=function vr(b){if(!b||!b.options)throw va("App Configuration");if(!b.name)throw va("App Name");const T=["projectId","apiKey","appId"];for(const P of T)if(!b.options[P])throw va(P);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:P,platformLoggerProvider:(0,ae._getProvider)(T,"platform-logger"),_delete:()=>Promise.resolve()}},cn=b=>{const T=b.getProvider("app").getImmediate(),P=(0,ae._getProvider)(T,an).getImmediate();return{getId:()=>function K(b){return W.apply(this,arguments)}(P),getToken:Y=>function Te(b){return qe.apply(this,arguments)}(P,Y)}};(function ii(){(0,ae._registerComponent)(new me.wA(an,Ft,"PUBLIC")),(0,ae._registerComponent)(new me.wA("installations-internal",cn,"PRIVATE"))})(),(0,ae.registerVersion)(_e,G),(0,ae.registerVersion)(_e,G,"esm2017");const Ji="@firebase/remote-config",Vn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cu{constructor(T,P,U,Y){this.client=T,this.storage=P,this.storageCache=U,this.logger=Y}isCachedDataFresh(T,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-P,Y=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var P=this;return(0,N.Z)(function*(){const[U,Y]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(Y&&P.isCachedDataFresh(T.cacheMaxAgeMillis,U))return Y;T.eTag=Y&&Y.eTag;const J=yield P.client.fetch(T),Oe=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&Oe.push(P.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(Oe),J})()}}function Hs(b=navigator){return b.languages&&b.languages[0]||b.language}class oi{constructor(T,P,U,Y,J,Oe){this.firebaseInstallations=T,this.sdkVersion=P,this.namespace=U,this.projectId=Y,this.apiKey=J,this.appId=Oe}fetch(T){var P=this;return(0,N.Z)(function*(){const[U,Y]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,He={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ze={sdk_version:P.sdkVersion,app_instance_id:U,app_instance_id_token:Y,app_id:P.appId,language_code:Hs()},Jt={method:"POST",headers:He,body:JSON.stringify(Ze)},Xt=fetch(Oe,Jt),Gn=new Promise((As,Wr)=>{T.signal.addEventListener(()=>{const Ya=new Error("The operation was aborted.");Ya.name="AbortError",Wr(Ya)})});let qr;try{yield Promise.race([Xt,Gn]),qr=yield Xt}catch(As){let Wr="fetch-client-network";throw"AbortError"===As.name&&(Wr="fetch-timeout"),Vn.create(Wr,{originalErrorMessage:As.message})}let Nn=qr.status;const us=qr.headers.get("ETag")||void 0;let Ys,Ur;if(200===qr.status){let As;try{As=yield qr.json()}catch(Wr){throw Vn.create("fetch-client-parse",{originalErrorMessage:Wr.message})}Ys=As.entries,Ur=As.state}if("INSTANCE_STATE_UNSPECIFIED"===Ur?Nn=500:"NO_CHANGE"===Ur?Nn=304:("NO_TEMPLATE"===Ur||"EMPTY_CONFIG"===Ur)&&(Ys={}),304!==Nn&&200!==Nn)throw Vn.create("fetch-status",{httpStatus:Nn});return{status:Nn,eTag:us,config:Ys}})()}}class Hp{constructor(T,P){this.client=T,this.storage=P}fetch(T){var P=this;return(0,N.Z)(function*(){const U=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:P,backoffCount:U}){var Y=this;return(0,N.Z)(function*(){yield function $p(b,T){return new Promise((P,U)=>{const Y=Math.max(T-Date.now(),0),J=setTimeout(P,Y);b.addEventListener(()=>{clearTimeout(J),U(Vn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,P);try{const J=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),J}catch(J){if(!function _s(b){if(!(b instanceof se.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(J))throw J;const Oe={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield Y.storage.setThrottleMetadata(Oe),Y.attemptFetch(T,Oe)}})()}}class ed{constructor(T,P,U,Y,J){this.app=T,this._client=P,this._storageCache=U,this._storage=Y,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nl(b,T){const P=b.target.error||void 0;return Vn.create(T,{originalErrorMessage:P&&P.message})}const Gs="app_namespace_store";class Fo{constructor(T,P,U,Y=function td(){return new Promise((b,T)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=U=>{T(Nl(U,"storage-open"))},P.onsuccess=U=>{b(U.target.result)},P.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Gs,{keyPath:"compositeKey"})}}catch(P){T(Vn.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=T,this.appName=P,this.namespace=U,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var P=this;return(0,N.Z)(function*(){const U=yield P.openDbPromise;return new Promise((Y,J)=>{const He=U.transaction([Gs],"readonly").objectStore(Gs),Ze=P.createCompositeKey(T);try{const Jt=He.get(Ze);Jt.onerror=Xt=>{J(Nl(Xt,"storage-get"))},Jt.onsuccess=Xt=>{const Gn=Xt.target.result;Y(Gn?Gn.value:void 0)}}catch(Jt){J(Vn.create("storage-get",{originalErrorMessage:Jt&&Jt.message}))}})})()}set(T,P){var U=this;return(0,N.Z)(function*(){const Y=yield U.openDbPromise;return new Promise((J,Oe)=>{const Ze=Y.transaction([Gs],"readwrite").objectStore(Gs),Jt=U.createCompositeKey(T);try{const Xt=Ze.put({compositeKey:Jt,value:P});Xt.onerror=Gn=>{Oe(Nl(Gn,"storage-set"))},Xt.onsuccess=()=>{J()}}catch(Xt){Oe(Vn.create("storage-set",{originalErrorMessage:Xt&&Xt.message}))}})})()}delete(T){var P=this;return(0,N.Z)(function*(){const U=yield P.openDbPromise;return new Promise((Y,J)=>{const He=U.transaction([Gs],"readwrite").objectStore(Gs),Ze=P.createCompositeKey(T);try{const Jt=He.delete(Ze);Jt.onerror=Xt=>{J(Nl(Xt,"storage-delete"))},Jt.onsuccess=()=>{Y()}}catch(Jt){J(Vn.create("storage-delete",{originalErrorMessage:Jt&&Jt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class zp{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const P=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),J=yield P;J&&(T.lastFetchStatus=J);const Oe=yield U;Oe&&(T.lastSuccessfulFetchTimestampMillis=Oe);const He=yield Y;He&&(T.activeConfig=He)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function nd(){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,N.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Kp(){(0,ae._registerComponent)(new me.wA("remote-config",function b(T,{instanceIdentifier:P}){const U=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vn.create("registration-window");if(!(0,se.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:J,apiKey:Oe,appId:He}=U.options;if(!J)throw Vn.create("registration-project-id");if(!Oe)throw Vn.create("registration-api-key");if(!He)throw Vn.create("registration-app-id");const Ze=new Fo(He,U.name,P=P||"firebase"),Jt=new zp(Ze),Xt=new le.Yd(Ji);Xt.logLevel=le.in.ERROR;const Gn=new oi(Y,ae.SDK_VERSION,P,J,Oe,He),qr=new Hp(Gn,Ze),Nn=new Cu(qr,Ze,Jt,Xt),us=new ed(U,Nn,Jt,Ze,Xt);return function gn(b){const T=(0,se.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(us),us},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Ji,"0.3.4"),(0,ae.registerVersion)(Ji,"0.3.4","esm2017")}();const Ca="/firebase-messaging-sw.js",Vi="/firebase-cloud-messaging-push-scope",rd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ta="google.c.a.c_id",Lh="google.c.a.c_l",Da="google.c.a.ts",id="google.c.a.e";var Uo=(()=>{return(b=Uo||(Uo={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Uo;var b})();function _i(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ml(b){const P=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(P),Y=new Uint8Array(U.length);for(let J=0;J<U.length;++J)Y[J]=U.charCodeAt(J);return Y}const Cn="fcm_token_details_db",Fh="fcm_token_object_Store";function Tu(b){return xa.apply(this,arguments)}function xa(){return xa=(0,N.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(Cn))return null;let T=null;return(yield(0,ue.openDb)(Cn,5,function(){var U=(0,N.Z)(function*(Y){var J;if(Y.oldVersion<2||!Y.objectStoreNames.contains(Fh))return;const Oe=Y.transaction.objectStore(Fh),He=yield Oe.index("fcmSenderId").get(b);if(yield Oe.clear(),He)if(2===Y.oldVersion){const Ze=He;if(!Ze.auth||!Ze.p256dh||!Ze.endpoint)return;T={token:Ze.fcmToken,createTime:null!==(J=Ze.createTime)&&void 0!==J?J:Date.now(),subscriptionOptions:{auth:Ze.auth,p256dh:Ze.p256dh,endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:"string"==typeof Ze.vapidKey?Ze.vapidKey:_i(Ze.vapidKey)}}}else if(3===Y.oldVersion){const Ze=He;T={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:_i(Ze.auth),p256dh:_i(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:_i(Ze.vapidKey)}}}else if(4===Y.oldVersion){const Ze=He;T={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:_i(Ze.auth),p256dh:_i(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:_i(Ze.vapidKey)}}}});return function(Y){return U.apply(this,arguments)}}())).close(),yield(0,ue.deleteDb)(Cn),yield(0,ue.deleteDb)("fcm_vapid_details_db"),yield(0,ue.deleteDb)("undefined"),sd(T)?T:null}),xa.apply(this,arguments)}function sd(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Bi="firebase-messaging-store";let kl=null;function mn(){return kl||(kl=(0,ue.openDb)("firebase-messaging-database",1,b=>{0===b.oldVersion&&b.createObjectStore(Bi)})),kl}function Vo(b){return go.apply(this,arguments)}function go(){return(go=(0,N.Z)(function*(b){const T=dr(b),U=yield(yield mn()).transaction(Bi).objectStore(Bi).get(T);if(U)return U;{const Y=yield Tu(b.appConfig.senderId);if(Y)return yield dn(b,Y),Y}})).apply(this,arguments)}function dn(b,T){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,N.Z)(function*(b,T){const P=dr(b),Y=(yield mn()).transaction(Bi,"readwrite");return yield Y.objectStore(Bi).put(T,P),yield Y.complete,T})).apply(this,arguments)}function Su(b){return qs.apply(this,arguments)}function qs(){return(qs=(0,N.Z)(function*(b){const T=dr(b),U=(yield mn()).transaction(Bi,"readwrite");yield U.objectStore(Bi).delete(T),yield U.complete})).apply(this,arguments)}function dr({appConfig:b}){return b.appId}const Bn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ns(b,T){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,N.Z)(function*(b,T){const P=yield ys(b),U=Bo(T),Y={method:"POST",headers:P,body:JSON.stringify(U)};let J;try{J=yield(yield fetch(rs(b.appConfig),Y)).json()}catch(Oe){throw Bn.create("token-subscribe-failed",{errorInfo:Oe})}if(J.error)throw Bn.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw Bn.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function mo(b,T){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,N.Z)(function*(b,T){const P=yield ys(b),U=Bo(T.subscriptionOptions),Y={method:"PATCH",headers:P,body:JSON.stringify(U)};let J;try{J=yield(yield fetch(`${rs(b.appConfig)}/${T.token}`,Y)).json()}catch(Oe){throw Bn.create("token-update-failed",{errorInfo:Oe})}if(J.error)throw Bn.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw Bn.create("token-update-no-token");return J.token})).apply(this,arguments)}function Pa(b,T){return ji.apply(this,arguments)}function ji(){return(ji=(0,N.Z)(function*(b,T){const U={method:"DELETE",headers:yield ys(b)};try{const J=yield(yield fetch(`${rs(b.appConfig)}/${T}`,U)).json();if(J.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(Y){throw Bn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function rs({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function ys(b){return mt.apply(this,arguments)}function mt(){return(mt=(0,N.Z)(function*({appConfig:b,installations:T}){const P=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Bo({p256dh:b,auth:T,endpoint:P,vapidKey:U}){const Y={web:{endpoint:P,auth:T,p256dh:b}};return U!==rd&&(Y.web.applicationPubKey=U),Y}const ad=6048e5;function Au(b){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,N.Z)(function*(b){const T=yield Tn(b.swRegistration,b.vapidKey),P={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:_i(T.getKey("auth")),p256dh:_i(T.getKey("p256dh"))},U=yield Vo(b.firebaseDependencies);if(U){if(_o(U.subscriptionOptions,P))return Date.now()>=U.createTime+ad?Ul(b,{token:U.token,createTime:Date.now(),subscriptionOptions:P}):U.token;try{yield Pa(b.firebaseDependencies,U.token)}catch(Y){console.warn(Y)}return Ut(b.firebaseDependencies,P)}return Ut(b.firebaseDependencies,P)})).apply(this,arguments)}function Na(b){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,N.Z)(function*(b){const T=yield Vo(b.firebaseDependencies);T&&(yield Pa(b.firebaseDependencies,T.token),yield Su(b.firebaseDependencies));const P=yield b.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function Ul(b,T){return Se.apply(this,arguments)}function Se(){return(Se=(0,N.Z)(function*(b,T){try{const P=yield mo(b.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:P,createTime:Date.now()});return yield dn(b.firebaseDependencies,U),P}catch(P){throw yield Na(b),P}})).apply(this,arguments)}function Ut(b,T){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,N.Z)(function*(b,T){const U={token:yield ns(b,T),createTime:Date.now(),subscriptionOptions:T};return yield dn(b,U),U.token})).apply(this,arguments)}function Tn(b,T){return jo.apply(this,arguments)}function jo(){return(jo=(0,N.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ml(T)})})).apply(this,arguments)}function _o(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function yi(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Bl(b,T){if(!T.notification)return;b.notification={};const P=T.notification.title;P&&(b.notification.title=P);const U=T.notification.body;U&&(b.notification.body=U);const Y=T.notification.image;Y&&(b.notification.image=Y)}(T,b),function Ma(b,T){!T.data||(b.data=T.data)}(T,b),function Zp(b,T){if(!T.fcmOptions)return;b.fcmOptions={};const P=T.fcmOptions.link;P&&(b.fcmOptions.link=P);const U=T.fcmOptions.analytics_label;U&&(b.fcmOptions.analyticsLabel=U)}(T,b),T}function ud(b){return"object"==typeof b&&!!b&&Ta in b}function yo(b,T){const P=[];for(let U=0;U<b.length;U++)P.push(b.charAt(U)),U<T.length&&P.push(T.charAt(U));return P.join("")}function jn(b){return Bn.create("missing-app-config-values",{valueName:b})}yo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vs{constructor(T,P,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function xu(b){if(!b||!b.options)throw jn("App Configuration Object");if(!b.name)throw jn("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:P}=b;for(const U of T)if(!P[U])throw jn(U);return{appName:b.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:P,analyticsProvider:U}}_delete(){return Promise.resolve()}}function ka(b){return zs.apply(this,arguments)}function zs(){return(zs=(0,N.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Ca,{scope:Vi}),b.swRegistration.update().catch(()=>{})}catch(T){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function $i(b,T){return jl.apply(this,arguments)}function jl(){return(jl=(0,N.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield ka(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function Ru(b,T){return $l.apply(this,arguments)}function $l(){return($l=(0,N.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=rd)})).apply(this,arguments)}function Oa(){return(Oa=(0,N.Z)(function*(b,T){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield Ru(b,null==T?void 0:T.vapidKey),yield $i(b,null==T?void 0:T.serviceWorkerRegistration),Au(b)})).apply(this,arguments)}function La(b,T,P){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,N.Z)(function*(b,T,P){const U=Gl(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:P[Ta],message_name:P[Lh],message_time:P[Da],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Gl(b){switch(b){case Uo.NOTIFICATION_CLICKED:return"notification_open";case Uo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fa(){return(Fa=(0,N.Z)(function*(b,T){const P=T.data;if(!P.isFirebaseMessaging)return;b.onMessageHandler&&P.messageType===Uo.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(yi(P)):b.onMessageHandler.next(yi(P)));const U=P.data;ud(U)&&"1"===U[id]&&(yield La(b,P.messageType,U))})).apply(this,arguments)}const Ua="@firebase/messaging",ql=b=>{const T=new vs(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function Uh(b,T){return Fa.apply(this,arguments)}(T,P)),T},Vh=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:U=>function Pu(b,T){return Oa.apply(this,arguments)}(T,U)}};function $o(){return is.apply(this,arguments)}function is(){return(is=(0,N.Z)(function*(){try{yield(0,se.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bh(){(0,ae._registerComponent)(new me.wA("messaging",ql,"PUBLIC")),(0,ae._registerComponent)(new me.wA("messaging-internal",Vh,"PRIVATE")),(0,ae.registerVersion)(Ua,"0.9.8"),(0,ae.registerVersion)(Ua,"0.9.8","esm2017")}();const Va="analytics",vo="firebase_id",zl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nu="https://www.googletagmanager.com/gtag/js",Er=new le.Yd("@firebase/analytics");function Kl(b){return Promise.all(b.map(T=>T.catch(P=>P)))}function Es(b,T){const P=document.createElement("script");P.src=`${Nu}?l=${b}&id=${T}`,P.async=!0,document.head.appendChild(P)}function Zl(b,T,P,U,Y,J){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,N.Z)(function*(b,T,P,U,Y,J){const Oe=U[Y];try{if(Oe)yield T[Oe];else{const Ze=(yield Kl(P)).find(Jt=>Jt.measurementId===Y);Ze&&(yield T[Ze.appId])}}catch(He){Er.error(He)}b("config",Y,J)})).apply(this,arguments)}function ku(b,T,P,U,Y){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,N.Z)(function*(b,T,P,U,Y){try{let J=[];if(Y&&Y.send_to){let Oe=Y.send_to;Array.isArray(Oe)||(Oe=[Oe]);const He=yield Kl(P);for(const Ze of Oe){const Jt=He.find(Gn=>Gn.measurementId===Ze),Xt=Jt&&T[Jt.appId];if(!Xt){J=[];break}J.push(Xt)}}0===J.length&&(J=Object.values(T)),yield Promise.all(J),b("event",U,Y||{})}catch(J){Er.error(J)}})).apply(this,arguments)}function En(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(Nu))return T;return null}const et=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ql=new class $n{constructor(T={},P=1e3){this.throttleMetadata=T,this.intervalMillis=P}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,P){this.throttleMetadata[T]=P}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Hn(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ho(b){return ja.apply(this,arguments)}function ja(){return(ja=(0,N.Z)(function*(b){var T;const{appId:P,apiKey:U}=b,Y={method:"GET",headers:Hn(U)},J=zl.replace("{app-id}",P),Oe=yield fetch(J,Y);if(200!==Oe.status&&304!==Oe.status){let He="";try{const Ze=yield Oe.json();(null===(T=Ze.error)||void 0===T?void 0:T.message)&&(He=Ze.error.message)}catch(Ze){}throw et.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:He})}return Oe.json()})).apply(this,arguments)}function Go(b){return wo.apply(this,arguments)}function wo(){return(wo=(0,N.Z)(function*(b,T=Ql,P){const{appId:U,apiKey:Y,measurementId:J}=b.options;if(!U)throw et.create("no-app-id");if(!Y){if(J)return{measurementId:J,appId:U};throw et.create("no-api-key")}const Oe=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new Fu;return setTimeout((0,N.Z)(function*(){He.abort()}),void 0!==P?P:6e4),ss({appId:U,apiKey:Y,measurementId:J},Oe,He,T)})).apply(this,arguments)}function ss(b,T,P){return Et.apply(this,arguments)}function Et(){return(Et=(0,N.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:P},U,Y=Ql){const{appId:J,measurementId:Oe}=b;try{yield Jl(U,T)}catch(He){if(Oe)return Er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${He.message}]`),{appId:J,measurementId:Oe};throw He}try{const He=yield Ho(b);return Y.deleteThrottleMetadata(J),He}catch(He){if(!ld(He)){if(Y.deleteThrottleMetadata(J),Oe)return Er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${He.message}]`),{appId:J,measurementId:Oe};throw He}const Ze=503===Number(He.customData.httpStatus)?(0,se.$s)(P,Y.intervalMillis,30):(0,se.$s)(P,Y.intervalMillis),Jt={throttleEndTimeMillis:Date.now()+Ze,backoffCount:P+1};return Y.setThrottleMetadata(J,Jt),Er.debug(`Calling attemptFetch again in ${Ze} millis`),ss(b,Jt,U,Y)}})).apply(this,arguments)}function Jl(b,T){return new Promise((P,U)=>{const Y=Math.max(T-Date.now(),0),J=setTimeout(P,Y);b.addEventListener(()=>{clearTimeout(J),U(et.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ld(b){if(!(b instanceof se.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Fu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function cd(){return hn.apply(this,arguments)}function hn(){return(hn=(0,N.Z)(function*(){if(!(0,se.hl)())return Er.warn(et.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(b){return Er.warn(et.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function $a(){return($a=(0,N.Z)(function*(b,T,P,U,Y,J,Oe){var He;const Ze=Go(b);Ze.then(Nn=>{P[Nn.measurementId]=Nn.appId,b.options.measurementId&&Nn.measurementId!==b.options.measurementId&&Er.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Nn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Nn=>Er.error(Nn)),T.push(Ze);const Jt=cd().then(Nn=>{if(Nn)return U.getId()}),[Xt,Gn]=yield Promise.all([Ze,Jt]);En()||Es(J,Xt.measurementId),Y("js",new Date);const qr=null!==(He=null==Oe?void 0:Oe.config)&&void 0!==He?He:{};return qr.origin="firebase",qr.update=!0,null!=Gn&&(qr[vo]=Gn),Y("config",Xt.measurementId,qr),Xt.measurementId})).apply(this,arguments)}class Wo{constructor(T){this.app=T}_delete(){return delete Hr[this.app.options.appId],Promise.resolve()}}let Hr={},Uu=[];const zo={};let Ha,Zs,os="dataLayer",Xl=!1;function Rr(b,T,P){!function Ko(){const b=[];if((0,se.ru)()&&b.push("This is a browser extension environment."),(0,se.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((U,Y)=>`(${Y+1}) ${U}`).join(" "),P=et.create("invalid-analytics-context",{errorInfo:T});Er.warn(P.message)}}();const U=b.options.appId;if(!U)throw et.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw et.create("no-api-key");Er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hr[U])throw et.create("already-exists",{id:U});if(!Xl){!function Mu(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(os);const{wrappedGtag:J,gtagCore:Oe}=function x_(b,T,P,U,Y){let J=function(...Oe){window[U].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(J=window[Y]),window[Y]=function Hh(b,T,P,U){function J(){return(J=(0,N.Z)(function*(Oe,He,Ze){try{"event"===Oe?yield ku(b,T,P,He,Ze):"config"===Oe?yield Zl(b,T,P,U,He,Ze):b("set",He)}catch(Jt){Er.error(Jt)}})).apply(this,arguments)}return function Y(Oe,He,Ze){return J.apply(this,arguments)}}(J,b,T,P),{gtagCore:J,wrappedGtag:window[Y]}}(Hr,Uu,zo,os,"gtag");Zs=J,Ha=Oe,Xl=!0}return Hr[U]=function qo(b,T,P,U,Y,J,Oe){return $a.apply(this,arguments)}(b,Uu,zo,T,Ha,os,P),new Wo(b)}function Zo(){return(Zo=(0,N.Z)(function*(b,T,P,U,Y){if(Y&&Y.global)b("event",P,U);else{const J=yield T;b("event",P,Object.assign(Object.assign({},U),{send_to:J}))}})).apply(this,arguments)}function dd(){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,N.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(b){return!1}})).apply(this,arguments)}const qh="@firebase/analytics";!function ju(){(0,ae._registerComponent)(new me.wA(Va,(T,{options:P})=>Rr(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,ae._registerComponent)(new me.wA("analytics-internal",function b(T){try{const P=T.getProvider(Va).getImmediate();return{logEvent:(U,Y,J)=>function Ei(b,T,P,U){b=(0,se.m9)(b),function ec(b,T,P,U,Y){return Zo.apply(this,arguments)}(Zs,Hr[b.app.options.appId],T,P,U).catch(Y=>Er.error(Y))}(P,U,Y,J)}}catch(P){throw et.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,ae.registerVersion)(qh,"0.7.5"),(0,ae.registerVersion)(qh,"0.7.5","esm2017")}();var Ts=O(4408),nr=O(7565);const Wa=new class qa extends nr.v{}(class nc extends Ts.o{constructor(T,P){super(T,P),this.scheduler=T,this.work=P}schedule(T,P=0){return P>0?super.schedule(T,P):(this.delay=P,this.state=T,this.scheduler.flush(this),this)}execute(T,P){return P>0||this.closed?super.execute(T,P):this._execute(T,P)}requestAsyncId(T,P,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,P,U):T.flush(this)}});var $u=O(4986),Gr=O(8505),Ii=O(5363),za=O(9468);const Hu=new _.GfV("7.2.1"),li="__angularfire_symbol__analyticsIsSupportedValue",Jo="__angularfire_symbol__analyticsIsSupported",rc="__angularfire_symbol__remoteConfigIsSupportedValue",Gu="__angularfire_symbol__remoteConfigIsSupported",Mt="__angularfire_symbol__messagingIsSupportedValue",qu="__angularfire_symbol__messagingIsSupported";function Yp(b,T,P){if(T){if(1===T.length)return T[0];const J=T.filter(Oe=>Oe.app===P);if(1===J.length)return J[0]}return P.container.getProvider(b).getImmediate({optional:!0})}globalThis[Jo]||(globalThis[Jo]=dd().then(b=>globalThis[li]=b).catch(()=>globalThis[li]=!1)),globalThis[qu]||(globalThis[qu]=$o().then(b=>globalThis[Mt]=b).catch(()=>globalThis[Mt]=!1)),globalThis[Gu]||(globalThis[Gu]=nd().then(b=>globalThis[rc]=b).catch(()=>globalThis[rc]=!1));const zu=(b,T)=>{const P=T?[T]:(0,B.C6)(),U=[];return P.forEach(Y=>{Y.container.getProvider(b).instances.forEach(Oe=>{U.includes(Oe)||U.push(Oe)})}),U};function Fr(){}class Ka{constructor(T,P=Wa){this.zone=T,this.delegate=P}now(){return this.delegate.now()}schedule(T,P,U){const Y=this.zone;return this.delegate.schedule(function(Oe){Y.runGuarded(()=>{T.apply(this,[Oe])})},P,U)}}class Ku{constructor(T){this.zone=T,this.task=null}call(T,P){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fr,{},Fr,Fr)),P.pipe((0,Gr.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let hd=(()=>{class b{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Ka(Zone.current)),this.insideAngular=P.run(()=>new Ka(Zone.current,$u.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(P){return new(P||b)(_.LFG(_.R0b))},b.\u0275prov=_.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ds(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Xo(b){return b.pipe((0,Ii.Q)(Ds().outsideAngular))}function Ss(b){return Ds(),function Zu(b){return function(P){return(P=P.lift(new Ku(b.ngZone))).pipe((0,za.R)(b.outsideAngular),(0,Ii.Q)(b.insideAngular))}}(Ds())(b)}},4929:(ot,De,O)=>{"use strict";O.d(De,{$:()=>ad,A:()=>$,E:()=>Ft,G:()=>$r,I:()=>_s,K:()=>cr,L:()=>nd,M:()=>rd,N:()=>ba,P:()=>Hu,Q:()=>Ta,R:()=>qh,T:()=>Vi,U:()=>Sa,V:()=>Uo,W:()=>Fh,X:()=>dr,Y:()=>Bn,Z:()=>Ar,_:()=>ji,a:()=>et,a0:()=>Ll,a1:()=>Fl,a2:()=>Se,a3:()=>Vl,a4:()=>jo,a5:()=>yi,a6:()=>Bl,a7:()=>Zp,a8:()=>ud,a9:()=>vs,aA:()=>Gn,aB:()=>Zu,aC:()=>an,aG:()=>$n,aJ:()=>Da,aa:()=>zs,ab:()=>jl,ae:()=>Oa,af:()=>Hl,ag:()=>Gl,aj:()=>od,ak:()=>jh,am:()=>Wl,an:()=>Mu,ao:()=>Un,ap:()=>X,aq:()=>Ot,ar:()=>st,as:()=>Pe,at:()=>Zh,au:()=>pd,av:()=>he,aw:()=>re,ax:()=>fe,ay:()=>Nt,az:()=>Ur,b:()=>En,c:()=>Wu,d:()=>Fr,e:()=>Yp,f:()=>b,g:()=>Oe,h:()=>U,i:()=>Cs,j:()=>Jt,k:()=>Qs,l:()=>nr,m:()=>k_,o:()=>ue,r:()=>Wa,s:()=>Ts,u:()=>Ii,z:()=>xe});var _=O(5861),B=O(2090),N=O(9681),ae=O(655),se=O(1877),me=O(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},je=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ce=new se.Yd("@firebase/auth");function Re(v,...p){ce.logLevel<=se.in.ERROR&&ce.error(`Auth (${N.SDK_VERSION}): ${v}`,...p)}function Pe(v,...p){throw ze(v,...p)}function he(v,...p){return ze(v,...p)}function be(v,p,m){const I=Object.assign(Object.assign({},Le()),{[p]:m});return new B.LL("auth","Firebase",I).create(p,{appName:v.name})}function ve(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Pe(v,"argument-error"),be(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(v,...p){if("string"!=typeof v){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return je.create(v,...p)}function re(v,p,...m){if(!v)throw ze(p,...m)}function Qe(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Re(p),new Error(p)}function X(v,p){v||Qe(p)}const pe=new Map;function fe(v){X(v instanceof Function,"Expected a class definition");let p=pe.get(v);return p?(X(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,pe.set(v,p),p)}function de(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function yt(){return"http:"===Zt()||"https:"===Zt()}function Zt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class rt{constructor(p,m){this.shortDelay=p,this.longDelay=m,X(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function xn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yt()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ur(v,p){X(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class sn{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yt=new rt(3e4,6e4);function Ht(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function en(v,p,m,I){return In.apply(this,arguments)}function In(){return(In=(0,_.Z)(function*(v,p,m,I,R={}){return Li(v,R,(0,_.Z)(function*(){let L={},te={};I&&("GET"===p?te=I:L={body:JSON.stringify(I)});const Ne=(0,B.xO)(Object.assign({key:v.config.apiKey},te)).slice(1),nt=yield v._getAdditionalHeaders();return nt["Content-Type"]="application/json",v.languageCode&&(nt["X-Firebase-Locale"]=v.languageCode),sn.fetch()(mi(v,v.config.apiHost,m,Ne),Object.assign({method:p,headers:nt,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Li(v,p,m){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,_.Z)(function*(v,p,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},yr),p);try{const R=new Fi(v),L=yield Promise.race([m(),R.promise]);R.clearNetworkTimeout();const te=yield L.json();if("needConfirmation"in te)throw Fn(v,"account-exists-with-different-credential",te);if(L.ok&&!("errorMessage"in te))return te;{const Ne=L.ok?te.errorMessage:te.error.message,[nt,_t]=Ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw Fn(v,"credential-already-in-use",te);if("EMAIL_EXISTS"===nt)throw Fn(v,"email-already-in-use",te);const Tt=I[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(_t)throw be(v,Tt,_t);Pe(v,Tt)}}catch(R){if(R instanceof B.ZR)throw R;Pe(v,"network-request-failed")}})).apply(this,arguments)}function Dr(v,p,m,I){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,_.Z)(function*(v,p,m,I,R={}){const L=yield en(v,p,m,I,R);return"mfaPendingCredential"in L&&Pe(v,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function mi(v,p,m,I){const R=`${p}${m}?${I}`;return v.config.emulator?ur(v.config,R):`${v.config.apiScheme}://${R}`}class Fi{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(he(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(v,p,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const R=he(v,p,I);return R.customData._tokenResponse=m,R}function ht(){return(ht=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Or(v,p){return An.apply(this,arguments)}function An(){return(An=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Wt(v,p){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function ct(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Qt(){return(Qt=(0,_.Z)(function*(v,p=!1){const m=(0,B.m9)(v),I=yield m.getIdToken(p),R=St(I);re(R&&R.exp&&R.auth_time&&R.iat,m.auth,"internal-error");const L="object"==typeof R.firebase?R.firebase:void 0,te=null==L?void 0:L.sign_in_provider;return{claims:R,token:I,authTime:ct(lr(R.auth_time)),issuedAtTime:ct(lr(R.iat)),expirationTime:ct(lr(R.exp)),signInProvider:te||null,signInSecondFactor:(null==L?void 0:L.sign_in_second_factor)||null}})).apply(this,arguments)}function lr(v){return 1e3*Number(v)}function St(v){const[p,m,I]=v.split(".");if(void 0===p||void 0===m||void 0===I)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,B.tV)(m);return R?JSON.parse(R):(Re("Failed to decode base64 JWT payload"),null)}catch(R){return Re("Caught error parsing JWT payload as JSON",R),null}}function Je(v,p){return Us.apply(this,arguments)}function Us(){return(Us=(0,_.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof B.ZR&&ms(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function ms({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class jt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const R=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,_.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,_.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class Vs{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ct(this.lastLoginAt),this.creationTime=ct(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zn(v){return wn.apply(this,arguments)}function wn(){return(wn=(0,_.Z)(function*(v){var p;const m=v.auth,I=yield v.getIdToken(),R=yield Je(v,Wt(m,{idToken:I}));re(null==R?void 0:R.users.length,m,"internal-error");const L=R.users[0];v._notifyReloadListener(L);const te=(null===(p=L.providerUserInfo)||void 0===p?void 0:p.length)?Ie(L.providerUserInfo):[],Ne=z(v.providerData,te),Tt=!!v.isAnonymous&&!(v.email&&L.passwordHash||(null==Ne?void 0:Ne.length)),Mn={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Ne,metadata:new Vs(L.createdAt,L.lastLoginAt),isAnonymous:Tt};Object.assign(v,Mn)})).apply(this,arguments)}function q(){return(q=(0,_.Z)(function*(v){const p=(0,B.m9)(v);yield Zn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function z(v,p){return[...v.filter(I=>!p.some(R=>R.providerId===I.providerId)),...p]}function Ie(v){return v.map(p=>{var{providerId:m}=p,I=(0,ae._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Ke(){return(Ke=(0,_.Z)(function*(v,p){const m=yield Li(v,{},(0,_.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:R,apiKey:L}=v.config,te=mi(v,R,"/v1/token",`key=${L}`),Ne=yield v._getAdditionalHeaders();return Ne["Content-Type"]="application/x-www-form-urlencoded",sn.fetch()(te,{method:"POST",headers:Ne,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class dt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){re(p.idToken,"internal-error"),re(void 0!==p.idToken,"internal-error"),re(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function it(v){const p=St(v);return re(p,"internal-error"),re(void 0!==p.exp,"internal-error"),re(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,_.Z)(function*(){return re(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,_.Z)(function*(){const{accessToken:R,refreshToken:L,expiresIn:te}=yield function ie(v,p){return Ke.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(R,L,Number(te))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:R,expirationTime:L}=m,te=new dt;return I&&(re("string"==typeof I,"internal-error",{appName:p}),te.refreshToken=I),R&&(re("string"==typeof R,"internal-error",{appName:p}),te.accessToken=R),L&&(re("number"==typeof L,"internal-error",{appName:p}),te.expirationTime=L),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new dt,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function zt(v,p){re("string"==typeof v||void 0===v,"internal-error",{appName:p})}class on{constructor(p){var{uid:m,auth:I,stsTokenManager:R}=p,L=(0,ae._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new Vs(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,_.Z)(function*(){const I=yield Je(m,m.stsTokenManager.getToken(m.auth,p));return re(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function bt(v){return Qt.apply(this,arguments)}(this,p)}reload(){return function j(v){return q.apply(this,arguments)}(this)}_assign(p){this!==p&&(re(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new on(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,_.Z)(function*(){let R=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),R=!0),m&&(yield Zn(I)),yield I.auth._persistUserIfCurrent(I),R&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,_.Z)(function*(){const m=yield p.getIdToken();return yield Je(p,function Yi(v,p){return ht.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,R,L,te,Ne,nt,_t,Tt;const Mn=null!==(I=m.displayName)&&void 0!==I?I:void 0,di=null!==(R=m.email)&&void 0!==R?R:void 0,Ja=null!==(L=m.phoneNumber)&&void 0!==L?L:void 0,tl=null!==(te=m.photoURL)&&void 0!==te?te:void 0,Id=null!==(Ne=m.tenantId)&&void 0!==Ne?Ne:void 0,uc=null!==(nt=m._redirectEventId)&&void 0!==nt?nt:void 0,lc=null!==(_t=m.createdAt)&&void 0!==_t?_t:void 0,cc=null!==(Tt=m.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:Cd,emailVerified:nl,isAnonymous:bd,providerData:ef,stsTokenManager:tf}=m;re(Cd&&tf,p,"internal-error");const nf=dt.fromJSON(this.name,tf);re("string"==typeof Cd,p,"internal-error"),zt(Mn,p.name),zt(di,p.name),re("boolean"==typeof nl,p,"internal-error"),re("boolean"==typeof bd,p,"internal-error"),zt(Ja,p.name),zt(tl,p.name),zt(Id,p.name),zt(uc,p.name),zt(lc,p.name),zt(cc,p.name);const rl=new on({uid:Cd,auth:p,email:di,emailVerified:nl,displayName:Mn,isAnonymous:bd,photoURL:tl,phoneNumber:Ja,tenantId:Id,stsTokenManager:nf,createdAt:lc,lastLoginAt:cc});return ef&&Array.isArray(ef)&&(rl.providerData=ef.map(U_=>Object.assign({},U_))),uc&&(rl._redirectEventId=uc),rl}static _fromIdTokenResponse(p,m,I=!1){return(0,_.Z)(function*(){const R=new dt;R.updateFromServerResponse(m);const L=new on({uid:m.localId,auth:p,stsTokenManager:R,isAnonymous:I});return yield Zn(L),L})()}}const cr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(m,I){var R=this;return(0,_.Z)(function*(){R.storage[m]=I})()}_get(m){var I=this;return(0,_.Z)(function*(){const R=I.storage[m];return void 0===R?null:R})()}_remove(m){var I=this;return(0,_.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function Nt(v,p,m){return`firebase:${v}:${p}:${m}`}class Qn{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:R,name:L}=this.auth;this.fullUserKey=Nt(this.userKey,R.apiKey,L),this.fullPersistenceKey=Nt("persistence",R.apiKey,L),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,_.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?on._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,_.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,_.Z)(function*(){if(!m.length)return new Qn(fe(cr),p,I);const R=(yield Promise.all(m.map(function(){var _t=(0,_.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return _t.apply(this,arguments)}}()))).filter(_t=>_t);let L=R[0]||fe(cr);const te=Nt(I,p.config.apiKey,p.name);let Ne=null;for(const _t of m)try{const Tt=yield _t._get(te);if(Tt){const Mn=on._fromJSON(p,Tt);_t!==L&&(Ne=Mn),L=_t;break}}catch(Tt){}const nt=R.filter(_t=>_t._shouldAllowMigration);return L._shouldAllowMigration&&nt.length?(L=nt[0],Ne&&(yield L._set(te,Ne.toJSON())),yield Promise.all(m.map(function(){var _t=(0,_.Z)(function*(Tt){if(Tt!==L)try{yield Tt._remove(te)}catch(Mn){}});return function(Tt){return _t.apply(this,arguments)}}())),new Qn(L,p,I)):new Qn(L,p,I)})()}}function oe(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(qe(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(K(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(At(p))return"Blackberry";if(Bt(p))return"Webos";if(W(p))return"Safari";if((p.includes("chrome/")||Te(p))&&!p.includes("edge/"))return"Chrome";if(st(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function K(v=(0,B.z$)()){return/firefox\//i.test(v)}function W(v=(0,B.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Te(v=(0,B.z$)()){return/crios\//i.test(v)}function qe(v=(0,B.z$)()){return/iemobile/i.test(v)}function st(v=(0,B.z$)()){return/android/i.test(v)}function At(v=(0,B.z$)()){return/blackberry/i.test(v)}function Bt(v=(0,B.z$)()){return/webos/i.test(v)}function Ot(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)}function Un(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Lr(v=(0,B.z$)()){return Ot(v)||st(v)||Bt(v)||At(v)||/windows phone/i.test(v)||qe(v)}function vr(v,p=[]){let m;switch(v){case"Browser":m=oe((0,B.z$)());break;case"Worker":m=`${oe((0,B.z$)())}-${v}`;break;default:m=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${I}`}class va{constructor(p,m){this.app=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ye(this),this.idTokenSubscription=new Ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=fe(m)),this._initializationPromise=this.queue((0,_.Z)(function*(){var R,L;if(!I._deleted&&(I.persistenceManager=yield Qn.create(I,p),!I._deleted)){if(null===(R=I._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(te){}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(L=I.currentUser)||void 0===L?void 0:L.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,_.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m)}})()}initializeCurrentUser(p){var m=this;return(0,_.Z)(function*(){var I;let R=yield m.assertedPersistence.getCurrentUser();if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const L=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,te=null==R?void 0:R._redirectEventId,Ne=yield m.tryRedirectSignIn(p);(!L||L===te)&&(null==Ne?void 0:Ne.user)&&(R=Ne.user)}return R?R._redirectEventId?(re(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)):m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var m=this;return(0,_.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(R){yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,_.Z)(function*(){try{yield Zn(p)}catch(I){if("auth/network-request-failed"!==I.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function at(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,_.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,_.Z)(function*(){const I=p?(0,B.m9)(p):null;return I&&re(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p){var m=this;return(0,_.Z)(function*(){if(!m._deleted)return p&&re(m.tenantId===p.tenantId,m,"tenant-id-mismatch"),m.queue((0,_.Z)(function*(){yield m.directlySetCurrentUser(p),m.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,_.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var m=this;return this.queue((0,_.Z)(function*(){yield m.assertedPersistence.setPersistence(fe(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,_.Z)(function*(){const R=yield I.getOrInitRedirectPersistenceManager(m);return null===p?R.removeCurrentUser():R.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,_.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&fe(p)||m._popupRedirectResolver;re(I,m,"argument-error"),m.redirectPersistenceManager=yield Qn.create(m,[fe(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,_.Z)(function*(){var I,R;return m._isInitialized&&(yield m.queue((0,_.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(R=m.redirectUser)||void 0===R?void 0:R._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,_.Z)(function*(){if(p===m.currentUser)return m.queue((0,_.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,R){if(this._deleted)return()=>{};const L="function"==typeof m?m:m.next.bind(m),te=this._isInitialized?Promise.resolve():this._initializationPromise;return re(te,this,"internal-error"),te.then(()=>L(this.currentUser)),"function"==typeof m?p.addObserver(m,I,R):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,_.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=vr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,_.Z)(function*(){const m={"X-Client-Version":p.clientVersion};return p.app.options.appId&&(m["X-Firebase-gmpid"]=p.app.options.appId),m})()}}function an(v){return(0,B.m9)(v)}class Ye{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ft(v,p,m){const I=an(v);re(I._canInitEmulator,I,"emulator-config-failed"),re(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const R=!!(null==m?void 0:m.disableWarnings),L=cn(p),{host:te,port:Ne}=function ii(v){const p=cn(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(I);if(R){const L=R[1];return{host:L,port:Ji(I.substr(L.length+1))}}{const[L,te]=I.split(":");return{host:L,port:Ji(te)}}}(p);I.config.emulator={url:`${L}//${te}${null===Ne?"":`:${Ne}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:te,port:Ne,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Jn(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function cn(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Ji(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class $r{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Qe("not implemented")}_getIdTokenResponse(p){return Qe("not implemented")}_linkToIdToken(p,m){return Qe("not implemented")}_getReauthenticationResolver(p){return Qe("not implemented")}}function pn(v,p){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:resetPassword",Ht(v,p))})).apply(this,arguments)}function Vn(v,p){return xt.apply(this,arguments)}function xt(){return(xt=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function vu(v,p){return js.apply(this,arguments)}function js(){return(js=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:update",Ht(v,p))})).apply(this,arguments)}function $s(){return($s=(0,_.Z)(function*(v,p){return Dr(v,"POST","/v1/accounts:signInWithPassword",Ht(v,p))})).apply(this,arguments)}function Xn(v,p){return po.apply(this,arguments)}function po(){return(po=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:sendOobCode",Ht(v,p))})).apply(this,arguments)}function wa(v,p){return wr.apply(this,arguments)}function wr(){return(wr=(0,_.Z)(function*(v,p){return Xn(v,p)})).apply(this,arguments)}function gn(v,p){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,_.Z)(function*(v,p){return Xn(v,p)})).apply(this,arguments)}function Ea(v,p){return si.apply(this,arguments)}function si(){return(si=(0,_.Z)(function*(v,p){return Xn(v,p)})).apply(this,arguments)}function Xi(v,p){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,_.Z)(function*(v,p){return Xn(v,p)})).apply(this,arguments)}function es(){return(es=(0,_.Z)(function*(v,p){return Dr(v,"POST","/v1/accounts:signInWithEmailLink",Ht(v,p))})).apply(this,arguments)}function Pl(){return(Pl=(0,_.Z)(function*(v,p){return Dr(v,"POST","/v1/accounts:signInWithEmailLink",Ht(v,p))})).apply(this,arguments)}class Cu extends $r{constructor(p,m,I,R=null){super("password",I),this._email=p,this._password=m,this._tenantId=R}static _fromEmailAndPassword(p,m){return new Cu(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new Cu(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,_.Z)(function*(){switch(m.signInMethod){case"password":return function wu(v,p){return $s.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Jc(v,p){return es.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Pe(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,_.Z)(function*(){switch(I.signInMethod){case"password":return Vn(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ts(v,p){return Pl.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:Pe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Hs(v,p){return oi.apply(this,arguments)}function oi(){return(oi=(0,_.Z)(function*(v,p){return Dr(v,"POST","/v1/accounts:signInWithIdp",Ht(v,p))})).apply(this,arguments)}class _s extends $r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new _s(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Pe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:R}=m,L=(0,ae._T)(m,["providerId","signInMethod"]);if(!I||!R)return null;const te=new _s(I,R);return te.idToken=L.idToken||void 0,te.accessToken=L.accessToken||void 0,te.secret=L.secret,te.nonce=L.nonce,te.pendingToken=L.pendingToken||null,te}_getIdTokenResponse(p){return Hs(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Hs(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Hs(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,B.xO)(m)}return p}}function Hp(v,p){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:sendVerificationCode",Ht(v,p))})).apply(this,arguments)}function ed(){return(ed=(0,_.Z)(function*(v,p){return Dr(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,p))})).apply(this,arguments)}function Gs(){return(Gs=(0,_.Z)(function*(v,p){const m=yield Dr(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,p));if(m.temporaryProof)throw Fn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const qp={USER_NOT_FOUND:"user-not-found"};function td(){return(td=(0,_.Z)(function*(v,p){return Dr(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),qp)})).apply(this,arguments)}class Fo extends $r{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Fo({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Fo({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Gp(v,p){return ed.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Nl(v,p){return Gs.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Wp(v,p){return td.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:R}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:R}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:R,temporaryProof:L}=p;return I||m||R||L?new Fo({verificationId:m,verificationCode:I,phoneNumber:R,temporaryProof:L}):null}}class Ia{constructor(p){var m,I,R,L,te,Ne;const nt=(0,B.zd)((0,B.pd)(p)),_t=null!==(m=nt.apiKey)&&void 0!==m?m:null,Tt=null!==(I=nt.oobCode)&&void 0!==I?I:null,Mn=function zp(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=nt.mode)&&void 0!==R?R:null);re(_t&&Tt&&Mn,"argument-error"),this.apiKey=_t,this.operation=Mn,this.code=Tt,this.continueUrl=null!==(L=nt.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(te=nt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Ne=nt.tenantId)&&void 0!==Ne?Ne:null}static parseLink(p){const m=function Kp(v){const p=(0,B.zd)((0,B.pd)(v)).link,m=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||m||p||v}(p);try{return new Ia(m)}catch(I){return null}}}let nd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return Cu._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const R=Ia.parseLink(I);return re(R,"argument-error"),Cu._fromEmailAndCode(m,R.code,R.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ui{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ca extends Ui{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Vi extends Ca{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return re("providerId"in m&&"signInMethod"in m,"argument-error"),_s._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return re(p.idToken||p.accessToken,"argument-error"),_s._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Vi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Vi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:R,pendingToken:L,nonce:te,providerId:Ne}=p;if(!I&&!R&&!m&&!L||!Ne)return null;try{return new Vi(Ne)._credential({idToken:m,accessToken:I,nonce:te,pendingToken:L})}catch(nt){return null}}}let rd=(()=>{class v extends Ca{constructor(){super("facebook.com")}static credential(m){return _s._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(I){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ba=(()=>{class v extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return _s._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:R}=m;if(!I&&!R)return null;try{return v.credential(I,R)}catch(L){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ta=(()=>{class v extends Ca{constructor(){super("github.com")}static credential(m){return _s._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(I){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Da extends $r{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Hs(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Hs(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Hs(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:R,pendingToken:L}=m;return I&&R&&L&&I===R?new Da(I,L):null}static _create(p,m){return new Da(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Sa extends Ui{constructor(p){re(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Sa.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Sa.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Da.fromJSON(p);return re(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return Da._create(I,m)}catch(R){return null}}}let Uo=(()=>{class v extends Ca{constructor(){super("twitter.com")}static credential(m,I){return _s._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:R}=m;if(!I||!R)return null;try{return v.credential(I,R)}catch(L){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function _i(v,p){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,_.Z)(function*(v,p){return Dr(v,"POST","/v1/accounts:signUp",Ht(v,p))})).apply(this,arguments)}class Cn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,R=!1){return(0,_.Z)(function*(){const L=yield on._fromIdTokenResponse(p,I,R),te=Aa(I);return new Cn({user:L,providerId:te,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,_.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const R=Aa(I);return new Cn({user:p,providerId:R,_tokenResponse:I,operationType:m})})()}}function Aa(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Fh(v){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,_.Z)(function*(v){var p;const m=an(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new Cn({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield _i(m,{returnSecureToken:!0}),R=yield Cn._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class xa extends B.ZR{constructor(p,m,I,R){var L;super(m.code,m.message),this.operationType=I,this.user=R,Object.setPrototypeOf(this,xa.prototype),this.customData={appName:p.name,tenantId:null!==(L=p.tenantId)&&void 0!==L?L:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,R){return new xa(p,m,I,R)}}function sd(v,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?xa._fromErrorAndOperation(v,L,p,I):L})}function Du(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function od(v,p){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,_.Z)(function*(v,p){const m=(0,B.m9)(v);yield Vo(!0,m,p);const{providerUserInfo:I}=yield Or(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),R=Du(I||[]);return m.providerData=m.providerData.filter(L=>R.has(L.providerId)),R.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function kl(v,p){return mn.apply(this,arguments)}function mn(){return(mn=(0,_.Z)(function*(v,p,m=!1){const I=yield Je(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Cn._forOperation(v,"link",I)})).apply(this,arguments)}function Vo(v,p,m){return go.apply(this,arguments)}function go(){return(go=(0,_.Z)(function*(v,p,m){yield Zn(p);const R=!1===v?"provider-already-linked":"no-such-provider";re(Du(p.providerData).has(m)===v,p.auth,R)})).apply(this,arguments)}function dn(v,p){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,_.Z)(function*(v,p,m=!1){const{auth:I}=v,R="reauthenticate";try{const L=yield Je(v,sd(I,R,p,v),m);re(L.idToken,I,"internal-error");const te=St(L.idToken);re(te,I,"internal-error");const{sub:Ne}=te;return re(v.uid===Ne,I,"user-mismatch"),Cn._forOperation(v,R,L)}catch(L){throw"auth/user-not-found"===(null==L?void 0:L.code)&&Pe(I,"user-mismatch"),L}})).apply(this,arguments)}function Su(v,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,_.Z)(function*(v,p,m=!1){const I="signIn",R=yield sd(v,I,p),L=yield Cn._fromIdTokenResponse(v,I,R);return m||(yield v._updateCurrentUser(L.user)),L})).apply(this,arguments)}function dr(v,p){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,_.Z)(function*(v,p){return Su(an(v),p)})).apply(this,arguments)}function Bn(v,p){return ns.apply(this,arguments)}function ns(){return(ns=(0,_.Z)(function*(v,p){const m=(0,B.m9)(v);return yield Vo(!1,m,p.providerId),kl(m,p)})).apply(this,arguments)}function Ar(v,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,_.Z)(function*(v,p){return dn((0,B.m9)(v),p)})).apply(this,arguments)}function Ws(v,p){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,_.Z)(function*(v,p){return Dr(v,"POST","/v1/accounts:signInWithCustomToken",Ht(v,p))})).apply(this,arguments)}function ji(v,p){return rs.apply(this,arguments)}function rs(){return(rs=(0,_.Z)(function*(v,p){const m=an(v),I=yield Ws(m,{token:p,returnSecureToken:!0}),R=yield Cn._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class ys{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?mt._fromServerResponse(p,m):Pe(p,"internal-error")}}class mt extends ys{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new mt(m)}}function Bo(v,p,m){var I;re((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),re(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(re(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(re(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function ad(v,p,m){return Au.apply(this,arguments)}function Au(){return(Au=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v),R={requestType:"PASSWORD_RESET",email:p};m&&Bo(I,R,m),yield gn(I,R)})).apply(this,arguments)}function Ll(v,p,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,_.Z)(function*(v,p,m){yield pn((0,B.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Fl(v,p){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,_.Z)(function*(v,p){yield vu((0,B.m9)(v),{oobCode:p})})).apply(this,arguments)}function Se(v,p){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,_.Z)(function*(v,p){const m=(0,B.m9)(v),I=yield pn(m,{oobCode:p}),R=I.requestType;switch(re(R,m,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(I.mfaInfo,m,"internal-error");default:re(I.email,m,"internal-error")}let L=null;return I.mfaInfo&&(L=ys._fromServerResponse(an(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:L},operation:R}})).apply(this,arguments)}function Vl(v,p){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,_.Z)(function*(v,p){const{data:m}=yield Se((0,B.m9)(v),p);return m.email})).apply(this,arguments)}function jo(v,p,m){return _o.apply(this,arguments)}function _o(){return(_o=(0,_.Z)(function*(v,p,m){const I=an(v),R=yield _i(I,{returnSecureToken:!0,email:p,password:m}),L=yield Cn._fromIdTokenResponse(I,"signIn",R);return yield I._updateCurrentUser(L.user),L})).apply(this,arguments)}function yi(v,p,m){return dr((0,B.m9)(v),nd.credential(p,m))}function Bl(v,p,m){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v),R={requestType:"EMAIL_SIGNIN",email:p};re(m.handleCodeInApp,I,"argument-error"),m&&Bo(I,R,m),yield Ea(I,R)})).apply(this,arguments)}function Zp(v,p){const m=Ia.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function ud(v,p,m){return yo.apply(this,arguments)}function yo(){return(yo=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v),R=nd.credentialWithLink(p,m||de());return re(R._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),dr(I,R)})).apply(this,arguments)}function xu(v,p){return jn.apply(this,arguments)}function jn(){return(jn=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:createAuthUri",Ht(v,p))})).apply(this,arguments)}function vs(v,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,_.Z)(function*(v,p){const I={identifier:p,continueUri:yt()?de():"http://localhost"},{signinMethods:R}=yield xu((0,B.m9)(v),I);return R||[]})).apply(this,arguments)}function zs(v,p){return $i.apply(this,arguments)}function $i(){return($i=(0,_.Z)(function*(v,p){const m=(0,B.m9)(v),R={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Bo(m.auth,R,p);const{email:L}=yield wa(m.auth,R);L!==v.email&&(yield v.reload())})).apply(this,arguments)}function jl(v,p,m){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Bo(I.auth,L,m);const{email:te}=yield Xi(I.auth,L);te!==v.email&&(yield v.reload())})).apply(this,arguments)}function $l(v,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,_.Z)(function*(v,p){return en(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Oa(v,p){return La.apply(this,arguments)}function La(){return(La=(0,_.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,B.m9)(v),L={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},te=yield Je(I,$l(I.auth,L));I.displayName=te.displayName||null,I.photoURL=te.photoUrl||null;const Ne=I.providerData.find(({providerId:nt})=>"password"===nt);Ne&&(Ne.displayName=I.displayName,Ne.photoURL=I.photoURL),yield I._updateTokensIfNecessary(te)})).apply(this,arguments)}function Hl(v,p){return Uh((0,B.m9)(v),p,null)}function Gl(v,p){return Uh((0,B.m9)(v),null,p)}function Uh(v,p,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,_.Z)(function*(v,p,m){const{auth:I}=v,L={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(L.email=p),m&&(L.password=m);const te=yield Je(v,Vn(I,L));yield v._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Ks{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class ql extends Ks{constructor(p,m,I,R){super(p,m,I),this.username=R}}class Vh extends Ks{constructor(p,m){super(p,"facebook.com",m)}}class Bh extends ql{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class $o extends Ks{constructor(p,m){super(p,"google.com",m)}}class is extends ql{constructor(p,m,I){super(p,"twitter.com",m,I)}}function jh(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ua(v){var p,m;if(!v)return null;const{providerId:I}=v,R=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},L=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&(null==v?void 0:v.idToken)){const te=null===(m=null===(p=St(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(te)return new Ks(L,"anonymous"!==te&&"custom"!==te?te:null)}if(!I)return null;switch(I){case"facebook.com":return new Vh(L,R);case"github.com":return new Bh(L,R);case"google.com":return new $o(L,R);case"twitter.com":return new is(L,R,v.screenName||null);case"custom":case"anonymous":return new Ks(L,null);default:return new Ks(L,I,R)}}(m)}class vo{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new vo("enroll",p)}static _fromMfaPendingCredential(p){return new vo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return vo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(I=p.multiFactorSession)||void 0===I?void 0:I.idToken)return vo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ba{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=an(p),R=m.customData._serverResponse,L=(R.mfaInfo||[]).map(Ne=>ys._fromServerResponse(I,Ne));re(R.mfaPendingCredential,I,"internal-error");const te=vo._fromMfaPendingCredential(R.mfaPendingCredential);return new Ba(te,L,function(){var Ne=(0,_.Z)(function*(nt){const _t=yield nt._process(I,te);delete R.mfaInfo,delete R.mfaPendingCredential;const Tt=Object.assign(Object.assign({},R),{idToken:_t.idToken,refreshToken:_t.refreshToken});switch(m.operationType){case"signIn":const Mn=yield Cn._fromIdTokenResponse(I,m.operationType,Tt);return yield I._updateCurrentUser(Mn.user),Mn;case"reauthenticate":return re(m.user,I,"internal-error"),Cn._forOperation(m.user,m.operationType,Tt);default:Pe(I,"internal-error")}});return function(nt){return Ne.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,_.Z)(function*(){return m.signInResolver(p)})()}}function Wl(v,p){var m;const I=(0,B.m9)(v),R=p;return re(p.customData.operationType,I,"argument-error"),re(null===(m=R.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),Ba._fromError(I,R)}function zl(v,p){return en(v,"POST","/v2/accounts/mfaEnrollment:start",Ht(v,p))}class Kl{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>ys._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new Kl(p)}getSession(){var p=this;return(0,_.Z)(function*(){return vo._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var I=this;return(0,_.Z)(function*(){const R=p,L=yield I.getSession(),te=yield Je(I.user,R._process(I.user.auth,L,m));return yield I.user._updateTokensIfNecessary(te),I.user.reload()})()}unenroll(p){var m=this;return(0,_.Z)(function*(){const I="string"==typeof p?p:p.uid,R=yield m.user.getIdToken(),L=yield Je(m.user,function Er(v,p){return en(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(v,p))}(m.user.auth,{idToken:R,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:te})=>te!==I),yield m.user._updateTokensIfNecessary(L);try{yield m.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const Es=new WeakMap;function Mu(v){const p=(0,B.m9)(v);return Es.has(p)||Es.set(p,Kl._fromUser(p)),Es.get(p)}const Zl="__sak";class Yl{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Zl,"1"),this.storage.removeItem(Zl),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const En=(()=>{class v extends Yl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ku(){const v=(0,B.z$)();return W(v)||Ot(v)}()&&function Qi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Lr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const R=this.storage.getItem(I),L=this.localCache[I];R!==L&&m(I,L,R)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((Ne,nt,_t)=>{this.notifyListeners(Ne,_t)});const R=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ne=this.storage.getItem(R);if(m.newValue!==Ne)null!==m.newValue?this.storage.setItem(R,m.newValue):this.storage.removeItem(R);else if(this.localCache[R]===m.newValue&&!I)return}const L=()=>{const Ne=this.storage.getItem(R);!I&&this.localCache[R]===Ne||this.notifyListeners(R,Ne)},te=this.storage.getItem(R);!function Lt(){return(0,B.w1)()&&10===document.documentMode}()||te===m.newValue||m.newValue===m.oldValue?L():setTimeout(L,10)}notifyListeners(m,I){this.localCache[m]=I;const R=this.listeners[m];if(R)for(const L of Array.from(R))L(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var R=()=>super._set,L=this;return(0,_.Z)(function*(){yield R().call(L,m,I),L.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,R=this;return(0,_.Z)(function*(){const L=yield I().call(R,m);return R.localCache[m]=JSON.stringify(L),L})()}_remove(m){var I=()=>super._remove,R=this;return(0,_.Z)(function*(){yield I().call(R,m),delete R.localCache[m]})()}}return v.type="LOCAL",v})(),et=(()=>{class v extends Yl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let ai=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(L=>L.isListeningto(m));if(I)return I;const R=new v(m);return this.receivers.push(R),R}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,_.Z)(function*(){const R=m,{eventId:L,eventType:te,data:Ne}=R.data,nt=I.handlersMap[te];if(!(null==nt?void 0:nt.size))return;R.ports[0].postMessage({status:"ack",eventId:L,eventType:te});const _t=Array.from(nt).map(function(){var Mn=(0,_.Z)(function*(di){return di(R.origin,Ne)});return function(di){return Mn.apply(this,arguments)}}()),Tt=yield function Is(v){return Promise.all(v.map(function(){var p=(0,_.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(_t);R.ports[0].postMessage({status:"done",eventId:L,eventType:te,response:Tt})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function $n(v="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return v+m}class Ql{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var R=this;return(0,_.Z)(function*(){const L="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let te,Ne;return new Promise((nt,_t)=>{const Tt=$n("",20);L.port1.start();const Mn=setTimeout(()=>{_t(new Error("unsupported_event"))},I);Ne={messageChannel:L,onMessage(di){const Ja=di;if(Ja.data.eventId===Tt)switch(Ja.data.status){case"ack":clearTimeout(Mn),te=setTimeout(()=>{_t(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),nt(Ja.data.response);break;default:clearTimeout(Mn),clearTimeout(te),_t(new Error("invalid_response"))}}},R.handlers.add(Ne),L.port1.addEventListener("message",Ne.onMessage),R.target.postMessage({eventType:p,eventId:Tt,data:m},[L.port2])}).finally(()=>{Ne&&R.removeMessageHandler(Ne)})})()}}function Hn(){return window}function ja(){return void 0!==Hn().WorkerGlobalScope&&"function"==typeof Hn().importScripts}function wo(){return(wo=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Jl="firebaseLocalStorageDb",Fu="firebaseLocalStorage",cd="fbase_key";class hn{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function qo(v,p){return v.transaction([Fu],p?"readwrite":"readonly").objectStore(Fu)}function Wo(){const v=indexedDB.open(Jl,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(Fu,{keyPath:cd})}catch(R){m(R)}}),v.addEventListener("success",(0,_.Z)(function*(){const I=v.result;I.objectStoreNames.contains(Fu)?p(I):(I.close(),yield function $a(){const v=indexedDB.deleteDatabase(Jl);return new hn(v).toPromise()}(),p(yield Wo()))}))})}function Hr(v,p,m){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,_.Z)(function*(v,p,m){const I=qo(v,!0).put({[cd]:p,value:m});return new hn(I).toPromise()})).apply(this,arguments)}function os(){return(os=(0,_.Z)(function*(v,p){const m=qo(v,!1).get(p),I=yield new hn(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Vu(v,p){const m=qo(v,!0).delete(p);return new hn(m).toPromise()}const Cs=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,_.Z)(function*(){return m.db||(m.db=yield Wo()),m.db})()}_withRetries(m){var I=this;return(0,_.Z)(function*(){let R=0;for(;;)try{const L=yield I._openDb();return yield m(L)}catch(L){if(R++>3)throw L;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,_.Z)(function*(){return ja()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,_.Z)(function*(){m.receiver=ai._getInstance(function Et(){return ja()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,_.Z)(function*(R,L){return{keyProcessed:(yield m._poll()).includes(L.key)}});return function(R,L){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,_.Z)(function*(R,L){return["keyChanged"]});return function(R,L){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,_.Z)(function*(){var I,R;if(m.activeServiceWorker=yield function Go(){return wo.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ql(m.activeServiceWorker);const L=yield m.sender._send("ping",{},800);!L||(null===(I=L[0])||void 0===I?void 0:I.fulfilled)&&(null===(R=L[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,_.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function ss(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Wo();return yield Hr(m,Zl,"1"),yield Vu(m,Zl),!0}catch(m){}return!1})()}_withPendingWrite(m){var I=this;return(0,_.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var R=this;return(0,_.Z)(function*(){return R._withPendingWrite((0,_.Z)(function*(){return yield R._withRetries(L=>Hr(L,m,I)),R.localCache[m]=I,R.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,_.Z)(function*(){const R=yield I._withRetries(L=>function zo(v,p){return os.apply(this,arguments)}(L,m));return I.localCache[m]=R,R})()}_remove(m){var I=this;return(0,_.Z)(function*(){return I._withPendingWrite((0,_.Z)(function*(){return yield I._withRetries(R=>Vu(R,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,_.Z)(function*(){const I=yield m._withRetries(te=>{const Ne=qo(te,!1).getAll();return new hn(Ne).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const R=[],L=new Set;for(const{fbase_key:te,value:Ne}of I)L.add(te),JSON.stringify(m.localCache[te])!==JSON.stringify(Ne)&&(m.notifyListeners(te,Ne),R.push(te));for(const te of Object.keys(m.localCache))m.localCache[te]&&!L.has(te)&&(m.notifyListeners(te,null),R.push(te));return R})()}notifyListeners(m,I){this.localCache[m]=I;const R=this.listeners[m];if(R)for(const L of Array.from(R))L(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ko(v,p){return en(v,"POST","/v2/accounts/mfaSignIn:start",Ht(v,p))}function Zo(){return(Zo=(0,_.Z)(function*(v){return(yield en(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Yo(v){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=R=>{const L=he("internal-error");L.customData=R,m(L)},I.type="text/javascript",I.charset="UTF-8",function Dn(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)})}function Eo(v){return`__${v}${Math.floor(1e6*Math.random())}`}const er=1e12;class ui{constructor(p){this.auth=p,this.counter=er,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new tr(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||er;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||er))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,_.Z)(function*(){var I;return null===(I=m._widgets.get(p||er))||void 0===I||I.execute(),""})()}}class tr{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof p?document.getElementById(p):p;re(R,"argument-error",{appName:m}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function tc(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wi=Eo("rcb"),dd=new rt(3e4,6e4);class Pn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Hn().grecaptcha}load(p,m=""){return re(function Gh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Hn().grecaptcha):new Promise((I,R)=>{const L=Hn().setTimeout(()=>{R(he(p,"network-request-failed"))},dd.get());Hn()[wi]=()=>{Hn().clearTimeout(L),delete Hn()[wi];const Ne=Hn().grecaptcha;if(!Ne)return void R(he(p,"internal-error"));const nt=Ne.render;Ne.render=(_t,Tt)=>{const Mn=nt(_t,Tt);return this.counter++,Mn},this.hostLanguage=m,I(Ne)},Yo(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:wi,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(L),R(he(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Hn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class R_{load(p){return(0,_.Z)(function*(){return new ui(p)})()}clearedOneInstance(){}}const Qo="recaptcha",Ei={theme:"light",type:"image"};class qh{constructor(p,m=Object.assign({},Ei),I){this.parameters=m,this.type=Qo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(I),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof p?document.getElementById(p):p;re(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new R_:new Pn,this.validateStartingState()}verify(){var p=this;return(0,_.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(L=>{const te=Ne=>{!Ne||(p.tokenChangeListeners.delete(te),L(Ne))};p.tokenChangeListeners.add(te),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=Hn()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,_.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,_.Z)(function*(){re(yt()&&!ja(),p.auth,"internal-error"),yield function bs(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ec(v){return Zo.apply(this,arguments)}(p.auth);re(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ju{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Fo._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Ts(v,p,m){return nc.apply(this,arguments)}function nc(){return(nc=(0,_.Z)(function*(v,p,m){const I=an(v),R=yield $u(I,p,(0,B.m9)(m));return new ju(R,L=>dr(I,L))})).apply(this,arguments)}function nr(v,p,m){return qa.apply(this,arguments)}function qa(){return(qa=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v);yield Vo(!1,I,"phone");const R=yield $u(I.auth,p,(0,B.m9)(m));return new ju(R,L=>Bn(I,L))})).apply(this,arguments)}function Wa(v,p,m){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v),R=yield $u(I.auth,p,(0,B.m9)(m));return new ju(R,L=>Ar(I,L))})).apply(this,arguments)}function $u(v,p,m){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,_.Z)(function*(v,p,m){var I;const R=yield m.verify();try{let L;if(re("string"==typeof R,v,"argument-error"),re(m.type===Qo,v,"argument-error"),L="string"==typeof p?{phoneNumber:p}:p,"session"in L){const te=L.session;if("phoneNumber"in L)return re("enroll"===te.type,v,"internal-error"),(yield zl(v,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{re("signin"===te.type,v,"internal-error");const Ne=(null===(I=L.multiFactorHint)||void 0===I?void 0:I.uid)||L.multiFactorUid;return re(Ne,v,"missing-multi-factor-info"),(yield Ko(v,{mfaPendingCredential:te.credential,mfaEnrollmentId:Ne,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Hp(v,{phoneNumber:L.phoneNumber,recaptchaToken:R});return te}}finally{m._reset()}})).apply(this,arguments)}function Ii(v,p){return za.apply(this,arguments)}function za(){return(za=(0,_.Z)(function*(v,p){yield kl((0,B.m9)(v),p)})).apply(this,arguments)}let Hu=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=an(m)}verifyPhoneNumber(m,I){return $u(this.auth,m,(0,B.m9)(I))}static credential(m,I){return Fo._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:R}=m;return I&&R?Fo._fromTokenResponse(I,R):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function li(v,p){return p?fe(p):(re(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Jo extends $r{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Hs(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Hs(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Hs(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function rc(v){return Su(v.auth,new Jo(v),v.bypassAuthState)}function Gu(v){const{auth:p,user:m}=v;return re(m,p,"internal-error"),dn(m,new Jo(v),v.bypassAuthState)}function Mt(v){return qu.apply(this,arguments)}function qu(){return(qu=(0,_.Z)(function*(v){const{auth:p,user:m}=v;return re(m,p,"internal-error"),kl(m,new Jo(v),v.bypassAuthState)})).apply(this,arguments)}class as{constructor(p,m,I,R,L=!1){this.auth=p,this.resolver=I,this.user=R,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,_.Z)(function*(I,R){p.pendingPromise={resolve:I,reject:R};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(L){p.reject(L)}});return function(I,R){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,_.Z)(function*(){const{urlResponse:I,sessionId:R,postBody:L,tenantId:te,error:Ne,type:nt}=p;if(Ne)return void m.reject(Ne);const _t={auth:m.auth,requestUri:I,sessionId:R,tenantId:te||void 0,postBody:L||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(nt)(_t))}catch(Tt){m.reject(Tt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return rc;case"linkViaPopup":case"linkViaRedirect":return Mt;case"reauthViaPopup":case"reauthViaRedirect":return Gu;default:Pe(this.auth,"internal-error")}}resolve(p){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ci=new rt(2e3,1e4);function Wu(v,p,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,_.Z)(function*(v,p,m){const I=an(v);ve(v,p,Ui);const R=li(I,m);return new Ku(I,"signInViaPopup",p,R).executeNotNull()})).apply(this,arguments)}function Yp(v,p,m){return zu.apply(this,arguments)}function zu(){return(zu=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v);ve(I.auth,p,Ui);const R=li(I.auth,m);return new Ku(I.auth,"reauthViaPopup",p,R,I).executeNotNull()})).apply(this,arguments)}function Fr(v,p,m){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v);ve(I.auth,p,Ui);const R=li(I.auth,m);return new Ku(I.auth,"linkViaPopup",p,R,I).executeNotNull()})).apply(this,arguments)}let Ku=(()=>{class v extends as{constructor(m,I,R,L,te){super(m,I,L,te),this.provider=R,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,_.Z)(function*(){const I=yield m.execute();return re(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,_.Z)(function*(){X(1===m.filter.length,"Popup operations only handle one event");const I=$n();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(R=>{m.reject(R)}),m.resolver._isIframeWebStorageSupported(m.auth,R=>{R||m.reject(he(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(he(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,R;this.pollId=(null===(R=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(he(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ci.get())};m()}}return v.currentPopupAction=null,v})();const Ds=new Map;class hr extends as{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,_.Z)(function*(){let I=Ds.get(m.auth._key());if(!I){try{const L=(yield function fr(v,p){return Xo.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(L)}catch(R){I=()=>Promise.reject(R)}Ds.set(m.auth._key(),I)}return m.bypassAuthState||Ds.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,_.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const R=yield I.auth._redirectUserForId(p.eventId);if(R)return I.user=R,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Xo(){return(Xo=(0,_.Z)(function*(v,p){const m=fd(p),I=Za(v);if(!(yield I._isAvailable()))return!1;const R="true"===(yield I._get(m));return yield I._remove(m),R})).apply(this,arguments)}function zh(v,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,_.Z)(function*(v,p){return Za(v)._set(fd(p),"true")})).apply(this,arguments)}function Zu(){Ds.clear()}function Za(v){return fe(v._redirectPersistence)}function fd(v){return Nt("pendingRedirect",v.config.apiKey,v.name)}function b(v,p,m){return function T(v,p,m){return P.apply(this,arguments)}(v,p,m)}function P(){return(P=(0,_.Z)(function*(v,p,m){const I=an(v);ve(v,p,Ui);const R=li(I,m);return yield zh(R,I),R._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function U(v,p,m){return function Y(v,p,m){return J.apply(this,arguments)}(v,p,m)}function J(){return(J=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v);ve(I.auth,p,Ui);const R=li(I.auth,m);yield zh(R,I.auth);const L=yield Nn(I);return R._openRedirect(I.auth,p,"reauthViaRedirect",L)})).apply(this,arguments)}function Oe(v,p,m){return function He(v,p,m){return Ze.apply(this,arguments)}(v,p,m)}function Ze(){return(Ze=(0,_.Z)(function*(v,p,m){const I=(0,B.m9)(v);ve(I.auth,p,Ui);const R=li(I.auth,m);yield Vo(!1,I,p.providerId),yield zh(R,I.auth);const L=yield Nn(I);return R._openRedirect(I.auth,p,"linkViaRedirect",L)})).apply(this,arguments)}function Jt(v,p){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,_.Z)(function*(v,p){return yield an(v)._initializationPromise,Gn(v,p,!1)})).apply(this,arguments)}function Gn(v,p){return qr.apply(this,arguments)}function qr(){return(qr=(0,_.Z)(function*(v,p,m=!1){const I=an(v),R=li(I,p),te=yield new hr(I,R,m).execute();return te&&!m&&(delete te.user._redirectEventId,yield I._persistUserIfCurrent(te.user),yield I._setRedirectUser(null,p)),te})).apply(this,arguments)}function Nn(v){return us.apply(this,arguments)}function us(){return(us=(0,_.Z)(function*(v){const p=$n(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Ur{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ya(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wr(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!Wr(p)){const R=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(he(this.auth,R))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(As(p))}saveEventToCache(p){this.cachedEventUids.add(As(p)),this.lastProcessedEventTime=Date.now()}}function As(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Wr({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function pd(v){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,_.Z)(function*(v,p={}){return en(v,"GET","/v1/projects",p)})).apply(this,arguments)}const gd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qp=/^https?/;function Qu(){return(Qu=(0,_.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield pd(v);for(const m of p)try{if(Ju(m))return}catch(I){}Pe(v,"unauthorized-domain")})).apply(this,arguments)}function Ju(v){const p=de(),{protocol:m,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const te=new URL(v);return""===te.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&te.hostname===I}if(!Qp.test(m))return!1;if(gd.test(v))return I===v;const R=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(I)}const ic=new rt(3e4,6e4);function Jp(){const v=Hn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let sc=null;function Xp(v){return sc=sc||function g0(v){return new Promise((p,m)=>{var I,R,L;function te(){Jp(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Jp(),m(he(v,"network-request-failed"))},timeout:ic.get()})}if(null===(R=null===(I=Hn().gapi)||void 0===I?void 0:I.iframes)||void 0===R?void 0:R.Iframe)p(gapi.iframes.getContext());else{if(!(null===(L=Hn().gapi)||void 0===L?void 0:L.load)){const Ne=Eo("iframefcb");return Hn()[Ne]=()=>{gapi.load?te():m(he(v,"network-request-failed"))},Yo(`https://apis.google.com/js/api.js?onload=${Ne}`).catch(nt=>m(nt))}te()}}).catch(p=>{throw sc=null,p})}(v),sc}const eg=new rt(5e3,15e3),Xu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function md(v){const p=v.config;re(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?ur(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:v.name,v:N.SDK_VERSION},R=oc.get(v.config.apiHost);R&&(I.eid=R);const L=v._getFrameworks();return L.length&&(I.fw=L.join(",")),`${m}?${(0,B.xO)(I).slice(1)}`}function ea(){return ea=(0,_.Z)(function*(v){const p=yield Xp(v),m=Hn().gapi;return re(m,v,"internal-error"),p.open({where:document.body,url:md(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xu,dontclear:!0},I=>new Promise(function(){var R=(0,_.Z)(function*(L,te){yield I.restyle({setHideOnLeave:!1});const Ne=he(v,"network-request-failed"),nt=Hn().setTimeout(()=>{te(Ne)},eg.get());function _t(){Hn().clearTimeout(nt),L(I)}I.ping(_t).then(_t,()=>{te(Ne)})});return function(L,te){return R.apply(this,arguments)}}()))}),ea.apply(this,arguments)}const tg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vd{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Zh(v,p,m,I,R,L){re(v.config.authDomain,v,"auth-domain-config-required"),re(v.config.apiKey,v,"invalid-api-key");const te={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:N.SDK_VERSION,eventId:R};if(p instanceof Ui){p.setDefaultLanguage(v.languageCode),te.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(te.customParameters=JSON.stringify(p.getCustomParameters()));for(const[nt,_t]of Object.entries(L||{}))te[nt]=_t}if(p instanceof Ca){const nt=p.getScopes().filter(_t=>""!==_t);nt.length>0&&(te.scopes=nt.join(","))}v.tenantId&&(te.tid=v.tenantId);const Ne=te;for(const nt of Object.keys(Ne))void 0===Ne[nt]&&delete Ne[nt];return`${function M_({config:v}){return v.emulator?ur(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(Ne).slice(1)}`}const Yh="webStorageSupport",Qs=class xs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=et,this._completeRedirectFn=Gn}_openPopup(p,m,I,R){var L=this;return(0,_.Z)(function*(){var te;X(null===(te=L.eventManagers[p._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Ne=Zh(p,m,I,de(),R);return function wd(v,p,m,I=500,R=600){const L=Math.max((window.screen.availHeight-R)/2,0).toString(),te=Math.max((window.screen.availWidth-I)/2,0).toString();let Ne="";const nt=Object.assign(Object.assign({},tg),{width:I.toString(),height:R.toString(),top:L,left:te}),_t=(0,B.z$)().toLowerCase();m&&(Ne=Te(_t)?"_blank":m),K(_t)&&(p=p||"http://localhost",nt.scrollbars="yes");const Tt=Object.entries(nt).reduce((di,[Ja,tl])=>`${di}${Ja}=${tl},`,"");if(function ri(v=(0,B.z$)()){var p;return Ot(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(_t)&&"_self"!==Ne)return function Ed(v,p){const m=document.createElement("a");m.href=v,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",Ne),new vd(null);const Mn=window.open(p||"",Ne,Tt);re(Mn,v,"popup-blocked");try{Mn.focus()}catch(di){}return new vd(Mn)}(p,Ne,$n())})()}_openRedirect(p,m,I,R){var L=this;return(0,_.Z)(function*(){return yield L._originValidation(p),function Ho(v){Hn().location.href=v}(Zh(p,m,I,de(),R)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:R,promise:L}=this.eventManagers[m];return R?Promise.resolve(R):(X(L,"If manager is not set, promise should be"),L)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,_.Z)(function*(){const I=yield function el(v){return ea.apply(this,arguments)}(p),R=new Ur(p);return I.register("authEvent",L=>(re(null==L?void 0:L.authEvent,p,"invalid-auth-event"),{status:R.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:R},m.iframes[p._key()]=I,R})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Yh,{type:Yh},R=>{var L;const te=null===(L=null==R?void 0:R[0])||void 0===L?void 0:L[Yh];void 0!==te&&m(!!te),Pe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function P_(v){return Qu.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Lr()||W()||Ot()}};class Jh extends class Qh{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Jh(p)}_finalizeEnroll(p,m,I){return function Nu(v,p){return en(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(v,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Rr(v,p){return en(v,"POST","/v2/accounts/mfaSignIn:finalize",Ht(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let k_=(()=>{class v{constructor(){}static assertion(m){return Jh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var O_="@firebase/auth";class _0{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,_.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{var R;p((null===(R=I)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function L_(v){(0,N._registerComponent)(new me.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),{apiKey:R,authDomain:L}=I.options;return(te=>{re(R&&!R.includes(":"),"invalid-api-key",{appName:te.name}),re(!(null==L?void 0:L.includes(":")),"argument-error",{appName:te.name});const Ne={apiKey:R,authDomain:L,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vr(v)},nt=new va(te,Ne);return function Fe(v,p){const m=(null==p?void 0:p.persistence)||[],I=(Array.isArray(m)?m:[m]).map(fe);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,null==p?void 0:p.popupRedirectResolver)}(nt,m),nt})(I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new me.wA("auth-internal",p=>{const m=an(p.getProvider("auth").getImmediate());return new _0(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(O_,"0.19.9",function ng(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)(O_,"0.19.9","esm2017")}("Browser")},2090:(ot,De,O)=>{"use strict";O.d(De,{BH:()=>$e,LL:()=>de,ZR:()=>Fe,gQ:()=>Fn,zI:()=>pe,hu:()=>B,g5:()=>N,US:()=>me,tV:()=>_e,h$:()=>le,$s:()=>jt,r3:()=>Ht,Sg:()=>xe,ne:()=>Yi,p$:()=>G,vZ:()=>Kn,ZB:()=>$,gK:()=>ct,pd:()=>Fi,m9:()=>wn,z$:()=>Le,GJ:()=>Yt,jU:()=>ce,ru:()=>Re,d:()=>he,xb:()=>In,w1:()=>be,hl:()=>Qe,uI:()=>je,UG:()=>Q,Yr:()=>ze,b$:()=>Pe,G6:()=>re,Mn:()=>ve,w9:()=>yr,cI:()=>xn,UI:()=>Li,xO:()=>Zi,zd:()=>mi,DV:()=>en,ug:()=>St,dS:()=>lr,Pz:()=>at,Dv:()=>Sr,Wj:()=>bt,lb:()=>Qt,eu:()=>X});const B=function(j,q){if(!j)throw N(q)},N=function(j){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+j)},ae=function(j){const q=[];let z=0;for(let Ie=0;Ie<j.length;Ie++){let ie=j.charCodeAt(Ie);ie<128?q[z++]=ie:ie<2048?(q[z++]=ie>>6|192,q[z++]=63&ie|128):55296==(64512&ie)&&Ie+1<j.length&&56320==(64512&j.charCodeAt(Ie+1))?(ie=65536+((1023&ie)<<10)+(1023&j.charCodeAt(++Ie)),q[z++]=ie>>18|240,q[z++]=ie>>12&63|128,q[z++]=ie>>6&63|128,q[z++]=63&ie|128):(q[z++]=ie>>12|224,q[z++]=ie>>6&63|128,q[z++]=63&ie|128)}return q},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,q){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ie=0;ie<j.length;ie+=3){const Ke=j[ie],dt=ie+1<j.length,zt=dt?j[ie+1]:0,on=ie+2<j.length,Yn=on?j[ie+2]:0;let Qn=(15&zt)<<2|Yn>>6,oe=63&Yn;on||(oe=64,dt||(Qn=64)),Ie.push(z[Ke>>2],z[(3&Ke)<<4|zt>>4],z[Qn],z[oe])}return Ie.join("")},encodeString(j,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(j):this.encodeByteArray(ae(j),q)},decodeString(j,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(j):function(j){const q=[];let z=0,Ie=0;for(;z<j.length;){const ie=j[z++];if(ie<128)q[Ie++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const Ke=j[z++];q[Ie++]=String.fromCharCode((31&ie)<<6|63&Ke)}else if(ie>239&&ie<365){const on=((7&ie)<<18|(63&j[z++])<<12|(63&j[z++])<<6|63&j[z++])-65536;q[Ie++]=String.fromCharCode(55296+(on>>10)),q[Ie++]=String.fromCharCode(56320+(1023&on))}else{const Ke=j[z++],dt=j[z++];q[Ie++]=String.fromCharCode((15&ie)<<12|(63&Ke)<<6|63&dt)}}return q.join("")}(this.decodeStringToByteArray(j,q))},decodeStringToByteArray(j,q){this.init_();const z=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ie=0;ie<j.length;){const Ke=z[j.charAt(ie++)],zt=ie<j.length?z[j.charAt(ie)]:0;++ie;const Yn=ie<j.length?z[j.charAt(ie)]:64;++ie;const Nt=ie<j.length?z[j.charAt(ie)]:64;if(++ie,null==Ke||null==zt||null==Yn||null==Nt)throw Error();Ie.push(Ke<<2|zt>>4),64!==Yn&&(Ie.push(zt<<4&240|Yn>>2),64!==Nt&&Ie.push(Yn<<6&192|Nt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},le=function(j){const q=ae(j);return me.encodeByteArray(q,!0)},ue=function(j){return le(j).replace(/\./g,"")},_e=function(j){try{return me.decodeString(j,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function G(j){return $(void 0,j)}function $(j,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return q}for(const z in q)!q.hasOwnProperty(z)||!ne(z)||(j[z]=$(j[z],q[z]));return j}function ne(j){return"__proto__"!==j}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,z)=>{this.resolve=q,this.reject=z})}wrapCallback(q){return(z,Ie)=>{z?this.reject(z):this.resolve(Ie),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(z):q(z,Ie))}}}function xe(j,q){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=q||"demo-project",ie=j.iat||0,Ke=j.sub||j.user_id;if(!Ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const dt=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ie,exp:ie+3600,auth_time:ie,sub:Ke,user_id:Ke,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(dt)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function Q(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function ce(){return"object"==typeof self&&self.self===self}function Re(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){return Le().indexOf("Electron/")>=0}function be(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function ve(){return Le().indexOf("MSAppHost/")>=0}function ze(){return!1}function re(){return!Q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){return"object"==typeof indexedDB}function X(){return new Promise((j,q)=>{try{let z=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(Ie);ie.onsuccess=()=>{ie.result.close(),z||self.indexedDB.deleteDatabase(Ie),j(!0)},ie.onupgradeneeded=()=>{z=!1},ie.onerror=()=>{var Ke;q((null===(Ke=ie.error)||void 0===Ke?void 0:Ke.message)||"")}}catch(z){q(z)}})}function pe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Fe extends Error{constructor(q,z,Ie){super(z),this.code=q,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(q,z,Ie){this.service=q,this.serviceName=z,this.errors=Ie}create(q,...z){const Ie=z[0]||{},ie=`${this.service}/${q}`,Ke=this.errors[q],dt=Ke?function yt(j,q){return j.replace(Zt,(z,Ie)=>{const ie=q[Ie];return null!=ie?String(ie):`<${Ie}?>`})}(Ke,Ie):"Error";return new Fe(ie,`${this.serviceName}: ${dt} (${ie}).`,Ie)}}const Zt=/\{\$([^}]+)}/g;function xn(j){return JSON.parse(j)}function at(j){return JSON.stringify(j)}const rt=function(j){let q={},z={},Ie={},ie="";try{const Ke=j.split(".");q=xn(_e(Ke[0])||""),z=xn(_e(Ke[1])||""),ie=Ke[2],Ie=z.d||{},delete z.d}catch(Ke){}return{header:q,claims:z,data:Ie,signature:ie}},yr=function(j){const z=rt(j).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Yt=function(j){const q=rt(j).claims;return"object"==typeof q&&!0===q.admin};function Ht(j,q){return Object.prototype.hasOwnProperty.call(j,q)}function en(j,q){if(Object.prototype.hasOwnProperty.call(j,q))return j[q]}function In(j){for(const q in j)if(Object.prototype.hasOwnProperty.call(j,q))return!1;return!0}function Li(j,q,z){const Ie={};for(const ie in j)Object.prototype.hasOwnProperty.call(j,ie)&&(Ie[ie]=q.call(z,j[ie],ie,j));return Ie}function Kn(j,q){if(j===q)return!0;const z=Object.keys(j),Ie=Object.keys(q);for(const ie of z){if(!Ie.includes(ie))return!1;const Ke=j[ie],dt=q[ie];if(Dr(Ke)&&Dr(dt)){if(!Kn(Ke,dt))return!1}else if(Ke!==dt)return!1}for(const ie of Ie)if(!z.includes(ie))return!1;return!0}function Dr(j){return null!==j&&"object"==typeof j}function Zi(j){const q=[];for(const[z,Ie]of Object.entries(j))Array.isArray(Ie)?Ie.forEach(ie=>{q.push(encodeURIComponent(z)+"="+encodeURIComponent(ie))}):q.push(encodeURIComponent(z)+"="+encodeURIComponent(Ie));return q.length?"&"+q.join("&"):""}function mi(j){const q={};return j.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ie,Ke]=Ie.split("=");q[decodeURIComponent(ie)]=decodeURIComponent(Ke)}}),q}function Fi(j){const q=j.indexOf("?");if(!q)return"";const z=j.indexOf("#",q);return j.substring(q,z>0?z:void 0)}class Fn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,z){z||(z=0);const Ie=this.W_;if("string"==typeof q)for(let Nt=0;Nt<16;Nt++)Ie[Nt]=q.charCodeAt(z)<<24|q.charCodeAt(z+1)<<16|q.charCodeAt(z+2)<<8|q.charCodeAt(z+3),z+=4;else for(let Nt=0;Nt<16;Nt++)Ie[Nt]=q[z]<<24|q[z+1]<<16|q[z+2]<<8|q[z+3],z+=4;for(let Nt=16;Nt<80;Nt++){const Qn=Ie[Nt-3]^Ie[Nt-8]^Ie[Nt-14]^Ie[Nt-16];Ie[Nt]=4294967295&(Qn<<1|Qn>>>31)}let Yn,cr,ie=this.chain_[0],Ke=this.chain_[1],dt=this.chain_[2],zt=this.chain_[3],on=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(Yn=zt^Ke&(dt^zt),cr=1518500249):(Yn=Ke^dt^zt,cr=1859775393):Nt<60?(Yn=Ke&dt|zt&(Ke|dt),cr=2400959708):(Yn=Ke^dt^zt,cr=3395469782);const Qn=(ie<<5|ie>>>27)+Yn+on+cr+Ie[Nt]&4294967295;on=zt,zt=dt,dt=4294967295&(Ke<<30|Ke>>>2),Ke=ie,ie=Qn}this.chain_[0]=this.chain_[0]+ie&4294967295,this.chain_[1]=this.chain_[1]+Ke&4294967295,this.chain_[2]=this.chain_[2]+dt&4294967295,this.chain_[3]=this.chain_[3]+zt&4294967295,this.chain_[4]=this.chain_[4]+on&4294967295}update(q,z){if(null==q)return;void 0===z&&(z=q.length);const Ie=z-this.blockSize;let ie=0;const Ke=this.buf_;let dt=this.inbuf_;for(;ie<z;){if(0===dt)for(;ie<=Ie;)this.compress_(q,ie),ie+=this.blockSize;if("string"==typeof q){for(;ie<z;)if(Ke[dt]=q.charCodeAt(ie),++dt,++ie,dt===this.blockSize){this.compress_(Ke),dt=0;break}}else for(;ie<z;)if(Ke[dt]=q[ie],++dt,++ie,dt===this.blockSize){this.compress_(Ke),dt=0;break}}this.inbuf_=dt,this.total_+=z}digest(){const q=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ie=this.blockSize-1;ie>=56;ie--)this.buf_[ie]=255&z,z/=256;this.compress_(this.buf_);let Ie=0;for(let ie=0;ie<5;ie++)for(let Ke=24;Ke>=0;Ke-=8)q[Ie]=this.chain_[ie]>>Ke&255,++Ie;return q}}function Yi(j,q){const z=new ht(j,q);return z.subscribe.bind(z)}class ht{constructor(q,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{q(this)}).catch(Ie=>{this.error(Ie)})}next(q){this.forEachObserver(z=>{z.next(q)})}error(q){this.forEachObserver(z=>{z.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,z,Ie){let ie;if(void 0===q&&void 0===z&&void 0===Ie)throw new Error("Missing Observer.");ie=function An(j,q){if("object"!=typeof j||null===j)return!1;for(const z of q)if(z in j&&"function"==typeof j[z])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:z,complete:Ie},void 0===ie.next&&(ie.next=Wt),void 0===ie.error&&(ie.error=Wt),void 0===ie.complete&&(ie.complete=Wt);const Ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch(dt){}}),this.observers.push(ie),Ke}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,q)}sendOne(q,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{z(this.observers[q])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wt(){}const Sr=function(j,q,z,Ie){let ie;if(Ie<q?ie="at least "+q:Ie>z&&(ie=0===z?"none":"no more than "+z),ie)throw new Error(j+" failed: Was called with "+Ie+(1===Ie?" argument.":" arguments.")+" Expects "+ie+".")};function ct(j,q){return`${j} failed: ${q} argument `}function bt(j,q,z,Ie){if((!Ie||z)&&"function"!=typeof z)throw new Error(ct(j,q)+"must be a valid function.")}function Qt(j,q,z,Ie){if((!Ie||z)&&("object"!=typeof z||null===z))throw new Error(ct(j,q)+"must be a valid context object.")}const lr=function(j){const q=[];let z=0;for(let Ie=0;Ie<j.length;Ie++){let ie=j.charCodeAt(Ie);if(ie>=55296&&ie<=56319){const Ke=ie-55296;Ie++,B(Ie<j.length,"Surrogate pair missing trail surrogate."),ie=65536+(Ke<<10)+(j.charCodeAt(Ie)-56320)}ie<128?q[z++]=ie:ie<2048?(q[z++]=ie>>6|192,q[z++]=63&ie|128):ie<65536?(q[z++]=ie>>12|224,q[z++]=ie>>6&63|128,q[z++]=63&ie|128):(q[z++]=ie>>18|240,q[z++]=ie>>12&63|128,q[z++]=ie>>6&63|128,q[z++]=63&ie|128)}return q},St=function(j){let q=0;for(let z=0;z<j.length;z++){const Ie=j.charCodeAt(z);Ie<128?q++:Ie<2048?q+=2:Ie>=55296&&Ie<=56319?(q+=4,z++):q+=3}return q};function jt(j,q=1e3,z=2){const Ie=q*Math.pow(z,j),ie=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+ie)}function wn(j){return j&&j._delegate?j._delegate:j}},5753:(ot,De,O)=>{"use strict";var _=O(5e3);let B=null;function N(){return B}const le=new _.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function _e(){return(0,_.LFG)($)}()},providedIn:"platform"}),n})();const G=new _.OlP("Location Initialized");let $=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(le))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function $e(){return new $((0,_.LFG)(le))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let Q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ce(n){const e=(0,_.LFG)(le).location;return new Pe((0,_.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const Re=new _.OlP("appBaseHref");let Pe=(()=>{class n extends Q{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+je(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+je(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(Re,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),he=(()=>{class n extends Q{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(Re,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n{constructor(t,r){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Le(re(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,re(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=je,n.joinWithSlash=xe,n.stripTrailingSlash=Le,n.\u0275fac=function(t){return new(t||n)(_.LFG(Q),_.LFG(ue))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ve(){return new be((0,_.LFG)(Q),(0,_.LFG)(ue))}()},providedIn:"root"}),n})();function re(n){return n.replace(/\/index.html$/,"")}var pe=(()=>((pe=pe||{})[pe.Zero=0]="Zero",pe[pe.One=1]="One",pe[pe.Two=2]="Two",pe[pe.Few=3]="Few",pe[pe.Many=4]="Many",pe[pe.Other=5]="Other",pe))();const Fi=_.kL8;class pn{}let Vn=(()=>{class n extends pn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Fi(r||this.locale)(t)){case pe.Zero:return"zero";case pe.One:return"one";case pe.Two:return"two";case pe.Few:return"few";case pe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.soG))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),wr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new gn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Eu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Eu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b),_.Y36(_.Rgc))},n.\u0275dir=_.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class gn{constructor(){this.$implicit=null,this.ngIf=null}}function Eu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,_.AaK)(e)}'.`)}let id=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[{provide:pn,useClass:Vn}]}),n})();function Aa(n){return"server"===n}let sd=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new Du((0,_.LFG)(le),window)}),n})();class Du{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=od(this.window.history)||od(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function od(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class go extends class Vo extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){B||(B=n)}(new go)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ra(){return dn=dn||document.querySelector("base"),dn?dn.getAttribute("href"):null}();return null==t?null:function qs(n){Su=Su||document.createElement("a"),Su.setAttribute("href",n);const e=Su.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){dn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function vu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Su,dn=null;const dr=new _.OlP("TRANSITION_ID"),Bn=[{provide:_.ip1,useFactory:function Ol(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[dr,le,_.zs3],multi:!0}];class ns{static init(){(0,_.VLi)(new ns)}addToWindow(e){_.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const i=_.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ar=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const mo=new _.OlP("EventManagerPlugins");let Ws=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(mo),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Pa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ji=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),rs=(()=>{class n extends ji{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ys),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ys))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(le))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function ys(n){N().remove(n)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bo=/%COMP%/g;function Se(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Se(n,i,t):(i=i.replace(Bo,n),t.push(i))}return t}function Ut(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Tn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new jo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case _.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Bl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case _.ifc.ShadowDom:return new Ma(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Se(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Ws),_.LFG(rs),_.LFG(_.AFp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class jo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=mt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=mt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,i&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ut(r)):this.eventManager.addEventListener(e,t,Ut(r))}}class Bl extends jo{constructor(e,t,r,i){super(e),this.component=r;const a=Se(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Fl(n){return"_ngcontent-%COMP%".replace(Bo,n)}(i+"-"+r.id),this.hostAttr=function Ul(n){return"_nghost-%COMP%".replace(Bo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ma extends jo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Se(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Zp=(()=>{class n extends Pa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(le))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const ud=["alt","control","meta","shift"],xu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},vs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ka=(()=>{class n extends Pa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(ud.forEach(g=>{const w=r.indexOf(g);w>-1&&(r.splice(w,1),l+=g+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function zs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&jn.hasOwnProperty(e)&&(e=jn[e]))}return xu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ud.forEach(a=>{a!=i&&vs[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(le))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function $i(){go.makeCurrent(),ns.init()},multi:!0},{provide:le,useFactory:function Ru(){return(0,_.RDi)(document),document},deps:[]}]),Oa=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function jl(){return new _.qLn},deps:[]},{provide:mo,useClass:Zp,multi:!0,deps:[le,_.R0b,_.Lbi]},{provide:mo,useClass:ka,multi:!0,deps:[le]},{provide:Tn,useClass:Tn,deps:[Ws,rs,_.AFp]},{provide:_.FYo,useExisting:Tn},{provide:ji,useExisting:rs},{provide:rs,useClass:rs,deps:[le]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:Ws,useClass:Ws,deps:[mo,_.R0b]},{provide:class mn{},useClass:Ar,deps:[]}];let La=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:dr,useExisting:_.AFp},Bn]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:Oa,imports:[id,_.hGG]}),n})();"undefined"!=typeof window&&window;var En=O(8996),Lu=O(7669);function et(...n){const e=(0,Lu.yG)(n);return(0,En.D)(n,e)}var Is=O(7579);class ai extends Is.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var $n=O(8306);const{isArray:Ql}=Array,{getPrototypeOf:Hn,prototype:Ho,keys:ja}=Object;var ss=O(4671),Et=O(4004);const{isArray:Jl}=Array;var hn=O(5403),qo=O(9672);function $a(...n){const e=(0,Lu.yG)(n),t=(0,Lu.jO)(n),{args:r,keys:i}=function Go(n){if(1===n.length){const e=n[0];if(Ql(e))return{args:e,keys:null};if(function wo(n){return n&&"object"==typeof n&&Hn(n)===Ho}(e)){const t=ja(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,En.D)([],e);const a=new $n.y(function Wo(n,e,t=ss.y){return r=>{Hr(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let g=0;g<i;g++)Hr(e,()=>{const w=(0,En.D)(n[g],e);let D=!1;w.subscribe((0,hn.x)(r,S=>{a[g]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function cd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):ss.y));return t?a.pipe(function Fu(n){return(0,Et.U)(e=>function ld(n,e){return Jl(e)?n(...e):n(e)}(n,e))}(t)):a}function Hr(n,e,t){n?(0,qo.f)(t,n,e):e()}const zo=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var os=O(8189);function Ha(...n){return function Vu(){return(0,os.J)(1)}()((0,En.D)(n,(0,Lu.yG)(n)))}var Zs=O(8421);function Xl(n){return new $n.y(e=>{(0,Zs.Xf)(n()).subscribe(e)})}var Cs=O(515),Ko=O(727),Rr=O(4482);function ec(){return(0,Rr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,hn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Zo extends $n.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ko.w0;const t=this.getSubject();e.add(this.source.subscribe((0,hn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ko.w0.EMPTY)}return e}refCount(){return ec()(this)}}function Dn(n,e){return(0,Rr.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,hn.x)(r,g=>{null==i||i.unsubscribe();let w=0;const D=a++;(0,Zs.Xf)(n(g,D)).subscribe(i=(0,hn.x)(r,S=>r.next(e?e(g,S,D,w++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var Yo=O(5698);function Eo(...n){const e=(0,Lu.yG)(n);return(0,Rr.e)((t,r)=>{(e?Ha(n,t,e):Ha(n,t)).subscribe(r)})}function Ga(n,e,t,r,i){return(a,l)=>{let h=t,g=e,w=0;a.subscribe((0,hn.x)(l,D=>{const S=w++;g=h?n(g,D,S):(h=!0,D),r&&l.next(g)},i&&(()=>{h&&l.next(g),l.complete()})))}}function vi(n,e){return(0,Rr.e)(Ga(n,e,arguments.length>=2,!0))}function er(n,e){return(0,Rr.e)((t,r)=>{let i=0;t.subscribe((0,hn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function ui(n){return(0,Rr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,hn.x)(t,void 0,void 0,l=>{a=(0,Zs.Xf)(n(l,ui(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var tr=O(5577),tc=O(576);function wi(n,e){return(0,tc.m)(e)?(0,tr.z)(n,e,1):(0,tr.z)(n,1)}function dd(n){return n<=0?()=>Cs.E:(0,Rr.e)((e,t)=>{let r=[];e.subscribe((0,hn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Bu(n=Pn){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,hn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Pn(){return new zo}function Gh(n){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,hn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Qo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((i,a)=>n(i,a,r)):ss.y,(0,Yo.q)(1),t?Gh(e):Bu(()=>new zo))}var Ei=O(8505);class bs{constructor(e,t){this.id=e,this.url=t}}class ju extends bs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ts extends bs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nc extends bs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nr extends bs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qa extends bs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wa extends bs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wh extends bs{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $u extends bs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gr extends bs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ii{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class za{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class li{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Mt="primary";class qu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function as(n){return new qu(n)}const ci="ngNavigationCancelingError";function Wu(n){const e=Error("NavigationCancelingError: "+n);return e[ci]=!0,e}function Yp(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Fr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Ka(n[i],e[i]))return!1;return!0}function Ka(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Ku(n){return Array.prototype.concat.apply([],n)}function hd(n){return n.length>0?n[n.length-1]:null}function hr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function fr(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,En.D)(Promise.resolve(n)):et(n)}const zh={exact:function fd(n,e,t){if(!Ze(n.segments,e.segments)||!U(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!fd(n.children[r],e.children[r],t))return!1;return!0},subset:T},Ss={exact:function Za(n,e){return Fr(n,e)},subset:function b(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ka(n[t],e[t]))},ignored:()=>!0};function Zu(n,e,t){return zh[t.paths](n.root,e.root,t.matrixParams)&&Ss[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T(n,e,t){return P(n,e,e.segments,t)}function P(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ze(i,t)||e.hasChildren()||!U(i,t,r))}if(n.segments.length===t.length){if(!Ze(n.segments,t)||!U(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!T(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ze(n.segments,i)&&U(n.segments,i,r)&&n.children[Mt])&&P(n.children[Mt],e,a,r)}}function U(n,e,t){return e.every((r,i)=>Ss[t](n[i].parameters,r.parameters))}class Y{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=as(this.queryParams)),this._queryParamMap}toString(){return qr.serialize(this)}}class J{constructor(e,t){this.segments=e,this.children=t,this.parent=null,hr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nn(this)}}class Oe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=as(this.parameters)),this._parameterMap}toString(){return Yu(this)}}function Ze(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Xt{}class Gn{parse(e){const t=new sc(e);return new Y(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${us(e.root,!0)}`,r=function Qp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ur(t)}=${Ur(i)}`).join("&"):`${Ur(t)}=${Ur(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function As(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qr=new Gn;function Nn(n){return n.segments.map(e=>Yu(e)).join("/")}function us(n,e){if(!n.hasChildren())return Nn(n);if(e){const t=n.children[Mt]?us(n.children[Mt],!1):"",r=[];return hr(n.children,(i,a)=>{a!==Mt&&r.push(`${a}:${us(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Jt(n,e){let t=[];return hr(n.children,(r,i)=>{i===Mt&&(t=t.concat(e(r,i)))}),hr(n.children,(r,i)=>{i!==Mt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Mt?[us(n.children[Mt],!1)]:[`${i}:${us(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${Nn(n)}/${t[0]}`:`${Nn(n)}/(${t.join("//")})`}}function Ys(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ur(n){return Ys(n).replace(/%3B/gi,";")}function Wr(n){return Ys(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ya(n){return decodeURIComponent(n)}function pd(n){return Ya(n.replace(/\+/g,"%20"))}function Yu(n){return`${Wr(n.path)}${function gd(n){return Object.keys(n).map(e=>`;${Wr(e)}=${Wr(n[e])}`).join("")}(n.parameters)}`}const P_=/^[^\/()?;=#]+/;function Qu(n){const e=n.match(P_);return e?e[0]:""}const Ju=/^[^=?&#]+/,Jp=/^[^&#]+/;class sc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new J(e,t)),r}parseSegment(){const e=Qu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Oe(Ya(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Qu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Qu(this.remaining);i&&(r=i,this.capture(r))}e[Ya(t)]=Ya(r)}parseQueryParam(e){const t=function ic(n){const e=n.match(Ju);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function g0(n){const e=n.match(Jp);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=pd(t),a=pd(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Mt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Mt]:new J([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Xp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=eg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Kh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Kh(e,this._root).map(t=>t.value)}}function eg(n,e){if(n===e.value)return e;for(const t of e.children){const r=eg(n,t);if(r)return r}return null}function Kh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Kh(n,t);if(r.length)return r.unshift(e),r}return[]}class Co{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Xu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class oc extends Xp{constructor(e,t){super(e),this.snapshot=t,yd(this,e)}toString(){return this.snapshot.toString()}}function md(n,e){const t=function el(n,e){const l=new Qa([],{},{},"",{},Mt,e,null,n.root,-1,{});return new _d("",new Co(l,[]))}(n,e),r=new ai([new Oe("",{})]),i=new ai({}),a=new ai({}),l=new ai({}),h=new ai(""),g=new ea(r,i,l,h,a,Mt,e,t.root);return g.snapshot=t.root,new oc(new Co(g,[]),t)}class ea{constructor(e,t,r,i,a,l,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(e=>as(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(e=>as(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function m0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Qa{constructor(e,t,r,i,a,l,h,g,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=g,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=as(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=as(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _d extends Xp{constructor(e,t){super(t),this.url=e,yd(this,t)}toString(){return vd(this._root)}}function yd(n,e){e.value._routerState=n,e.children.forEach(t=>yd(n,t))}function vd(n){const e=n.children.length>0?` { ${n.children.map(vd).join(", ")} } `:"";return`${n.value}${e}`}function wd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Fr(e.params,t.params)||n.params.next(t.params),function zu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Fr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ed(n,e){const t=Fr(n.params,e.params)&&function He(n,e){return Ze(n,e)&&n.every((t,r)=>Fr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ed(n.parent,e.parent))}function ac(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Zh(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ac(n,r,i);return ac(n,r)})}(n,e,t);return new Co(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>ac(n,h)),l}}const r=function M_(n){return new ea(new ai(n.url),new ai(n.params),new ai(n.queryParams),new ai(n.fragment),new ai(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>ac(n,a));return new Co(r,i)}}function xs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Qs(n){return"object"==typeof n&&null!=n&&n.outlets}function Qh(n,e,t,r,i){let a={};return r&&hr(r,(l,h)=>{a[h]=Array.isArray(l)?l.map(g=>`${g}`):`${l}`}),new Y(t.root===n?e:Jh(t.root,n,e),a,i)}function Jh(n,e,t){const r={};return hr(n.children,(i,a)=>{r[a]=i===e?t:Jh(i,e,t)}),new J(n.segments,r)}class k_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xs(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Qs);if(i&&i!==hd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function F_(n,e,t){if(n||(n=new J([],{})),0===n.segments.length&&n.hasChildren())return v(n,e,t);const r=function p(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Qs(h))break;const g=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&w&&"object"==typeof w&&void 0===w.outlets){if(!L(g,w,l))return a;r+=2}else{if(!L(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new J(n.segments.slice(0,r.pathIndex),{});return a.children[Mt]=new J(n.segments.slice(r.pathIndex),n.children),v(a,0,i)}return r.match&&0===i.length?new J(n.segments,{}):r.match&&!n.hasChildren()?m(n,e,t):r.match?v(n,0,i):m(n,e,t)}function v(n,e,t){if(0===t.length)return new J(n.segments,{});{const r=function L_(n){return Qs(n[0])?n[0].outlets:{[Mt]:n}}(t),i={};return hr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=F_(n.children[l],e,a))}),hr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new J(n.segments,i)}}function m(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Qs(a)){const g=I(a.outlets);return new J(r,g)}if(0===i&&xs(t[0])){r.push(new Oe(n.segments[e].path,R(t[0]))),i++;continue}const l=Qs(a)?a.outlets[Mt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&xs(h)?(r.push(new Oe(l,R(h))),i+=2):(r.push(new Oe(l,{})),i++)}return new J(r,{})}function I(n){const e={};return hr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=m(new J([],{}),0,t))}),e}function R(n){const e={};return hr(n,(t,r)=>e[r]=`${t}`),e}function L(n,e,t){return n==t.path&&Fr(e,t.parameters)}class Ne{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Xu(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),hr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Xu(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Xu(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Xu(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new rc(a.value.snapshot))}),e.children.length&&this.forwardEvent(new li(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(wd(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),wd(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function nt(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=g,l.outlet&&l.outlet.activateWith(i,g),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class _t{constructor(e,t){this.routes=e,this.module=t}}function Tt(n){return"function"==typeof n}function di(n){return n instanceof Y}const lc=Symbol("INITIAL_VALUE");function cc(){return Dn(n=>$a(n.map(e=>e.pipe((0,Yo.q)(1),Eo(lc)))).pipe(vi((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==lc?i:(a===lc&&(r=!0),r||!1!==a&&l!==t.length-1&&!di(a)?i:a),e)},lc),er(e=>e!==lc),(0,Et.U)(e=>di(e)?e:!0===e),(0,Yo.q)(1)))}class Cd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new nl,this.attachRef=null}}class nl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Cd,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let bd=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=a||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,g=new ef(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(nl),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ef{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ea?this.route:e===nl?this.childContexts:this.parent.get(e,t)}}let tf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[bd],encapsulation:2}),n})();function nf(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];rl(r,U_(e,r))}}function rl(n,e){n.children&&nf(n.children,e)}function U_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function rf(n){const e=n.children&&n.children.map(rf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=tf),t}function Js(n){return n.outlet||Mt}function Ir(n,e){const t=n.filter(r=>Js(r)===e);return t.push(...n.filter(r=>Js(r)!==e)),t}const y0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function rg(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},y0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Yp)(t,n,e);if(!a)return Object.assign({},y0);const l={};hr(a.posParams,(g,w)=>{l[w]=g.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Td(n,e,t,r,i="corrected"){if(t.length>0&&function Yb(n,e,t){return t.some(r=>ig(n,e,r)&&Js(r)!==Mt)}(n,t,r)){const l=new J(e,function Zb(n,e,t,r){const i={};i[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Js(a)!==Mt){const l=new J([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Js(a)]=l}return i}(n,e,r,new J(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function Qb(n,e,t){return t.some(r=>ig(n,e,r))}(n,t,r)){const l=new J(n.segments,function v0(n,e,t,r,i,a){const l={};for(const h of r)if(ig(n,t,h)&&!i[Js(h)]){const g=new J([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Js(h)]=g}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new J(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function ig(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function w0(n,e,t,r){return!!(Js(n)===r||r!==Mt&&ig(e,t,n))&&("**"===n.path||rg(e,n,t).matched)}function Jb(n,e,t){return 0===e.length&&!n.children[t]}class sg{constructor(e){this.segmentGroup=e||null}}class Dd{constructor(e){this.urlTree=e}}function zr(n){return new $n.y(e=>e.error(new sg(n)))}function og(n){return new $n.y(e=>e.error(new Dd(n)))}function E0(n){return new $n.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class sf{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(_.h0i)}apply(){const e=Td(this.urlTree.root,[],[],this.config).segmentGroup,t=new J(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Mt).pipe((0,Et.U)(a=>this.createUrlTree(B_(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ui(a=>{if(a instanceof Dd)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof sg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Mt).pipe((0,Et.U)(i=>this.createUrlTree(B_(i),e.queryParams,e.fragment))).pipe(ui(i=>{throw i instanceof sg?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new J([],{[Mt]:e}):e;return new Y(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Et.U)(a=>new J([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,En.D)(i).pipe(wi(a=>{const l=r.children[a],h=Ir(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,Et.U)(g=>({segment:g,outlet:a})))}),vi((a,l)=>(a[l.outlet]=l.segment,a),{}),function R_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((i,a)=>n(i,a,r)):ss.y,dd(1),t?Gh(e):Bu(()=>new zo))}())}expandSegment(e,t,r,i,a,l){return(0,En.D)(r).pipe(wi(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(ui(w=>{if(w instanceof sg)return et(null);throw w}))),Qo(h=>!!h),ui((h,g)=>{if(h instanceof zo||"EmptyError"===h.name){if(Jb(t,i,a))return et(new J([],{}));throw new sg(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return w0(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):zr(t):zr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?og(a):this.lineralizeSegments(r,a).pipe((0,tr.z)(l=>{const h=new J(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:g,lastChild:w,positionalParamSegments:D}=rg(t,i,a);if(!h)return zr(t);const S=this.applyRedirectCommands(g,i.redirectTo,D);return i.redirectTo.startsWith("/")?og(S):this.lineralizeSegments(i,S).pipe((0,tr.z)(M=>this.expandSegment(e,t,r,M.concat(a.slice(w)),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?et(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Et.U)(M=>(r._loadedConfig=M,new J(i,{})))):et(new J(i,{}));const{matched:l,consumedSegments:h,lastChild:g}=rg(t,r,i);if(!l)return zr(t);const w=i.slice(g);return this.getChildConfig(e,r,i).pipe((0,tr.z)(S=>{const M=S.module,V=S.routes,{segmentGroup:Z,slicedSegments:Ce}=Td(t,h,w,V),ke=new J(Z.segments,Z.children);if(0===Ce.length&&ke.hasChildren())return this.expandChildren(M,V,ke).pipe((0,Et.U)(ft=>new J(h,ft)));if(0===V.length&&0===Ce.length)return et(new J(h,{}));const gt=Js(r)===a;return this.expandSegment(M,ke,V,Ce,gt?Mt:a,!0).pipe((0,Et.U)(Ct=>new J(h.concat(Ct.segments),Ct.children)))}))}getChildConfig(e,t,r){return t.children?et(new _t(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?et(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,tr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Et.U)(a=>(t._loadedConfig=a,a))):function I0(n){return new $n.y(e=>e.error(Wu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):et(new _t([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?et(i.map(l=>{const h=e.get(l);let g;if(function Ja(n){return n&&Tt(n.canLoad)}(h))g=h.canLoad(t,r);else{if(!Tt(h))throw new Error("Invalid CanLoad guard");g=h(t,r)}return fr(g)})).pipe(cc(),(0,Ei.b)(l=>{if(!di(l))return;const h=Wu(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,Et.U)(l=>!0===l)):et(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return et(r);if(i.numberOfChildren>1||!i.children[Mt])return E0(e.redirectTo);i=i.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Y(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return hr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return hr(t.children,(h,g)=>{l[g]=this.createSegmentGroup(e,h,r,i)}),new J(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function B_(n){const e={};for(const r of Object.keys(n.children)){const a=B_(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function V_(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new J(n.segments.concat(e.segments),e.children)}return n}(new J(n.segments,e))}class j_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ag{constructor(e,t){this.component=e,this.route=t}}function C0(n,e,t){const r=n._root;return uf(r,e?e._root:null,t,[r.value])}function af(n,e,t){const r=function tT(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function uf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Xu(e);return n.children.forEach(l=>{(function $_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function nT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ze(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ze(n.url,e.url)||!Fr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ed(n,e)||!Fr(n.queryParams,e.queryParams);default:return!Ed(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new j_(r)):(a.data=l.data,a._resolvedData=l._resolvedData),uf(n,e,a.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new ag(h.outlet.component,l))}else l&&lf(e,h,i),i.canActivateChecks.push(new j_(r)),uf(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),hr(a,(l,h)=>lf(l,t.getContext(h),i)),i}function lf(n,e,t){const r=Xu(n),i=n.value;hr(r,(a,l)=>{lf(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new ag(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class lT{}function G_(n){return new $n.y(e=>e.error(n))}class dT{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=Td(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Mt);if(null===t)return null;const r=new Qa([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Co(r,t),a=new _d(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=tg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=Ir(e,a),g=this.processSegmentGroup(h,l,a);if(null===g)return null;r.push(...g)}const i=T0(r);return function hT(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return Jb(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!w0(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const V=r.length>0?hd(r).parameters:{};a=new Qa(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bo(e),Js(e),e.component,e,D0(t),dc(t)+r.length,pT(e))}else{const V=rg(t,e,r);if(!V.matched)return null;l=V.consumedSegments,h=r.slice(V.lastChild),a=new Qa(l,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bo(e),Js(e),e.component,e,D0(t),dc(t)+l.length,pT(e))}const g=function fT(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:D}=Td(t,l,h,g.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===D.length&&w.hasChildren()){const V=this.processChildren(g,w);return null===V?null:[new Co(a,V)]}if(0===g.length&&0===D.length)return[new Co(a,[])];const S=Js(e)===i,M=this.processSegment(g,w,D,S?Mt:i);return null===M?null:[new Co(a,M)]}}function b0(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function T0(n){const e=[],t=new Set;for(const r of n){if(!b0(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=T0(r.children);e.push(new Co(r.value,i))}return e.filter(r=>!t.has(r))}function D0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function dc(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function bo(n){return n.data||{}}function pT(n){return n.resolve||{}}function ug(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function W_(n){return Dn(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,Et.U)(()=>e)):et(e)})}class x0 extends class df{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lg=new _.OlP("ROUTES");class cg{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Et.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new _t(Ku(l.injector.get(lg,void 0,_.XFs.Self|_.XFs.Optional)).map(rf),l)}),ui(a=>{throw t._loader$=void 0,a}));return t._loader$=new Zo(i,()=>new Is.x).pipe(ec()),t._loader$}loadModuleFactory(e){return fr(e()).pipe((0,tr.z)(t=>t instanceof _.YKP?et(t):(0,En.D)(this.compiler.compileModuleAsync(t))))}}class R0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function GR(n){throw n}function Sd(n,e,t){return e.parse("/")}function dg(n,e){return et(null)}const P0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hi=(()=>{class n{constructor(t,r,i,a,l,h,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Is.x,this.errorHandler=GR,this.malformedUriErrorHandler=Sd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dg,afterPreactivation:dg},this.urlHandlingStrategy=new R0,this.routeReuseStrategy=new x0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(_.h0i),this.console=l.get(_.c2e);const S=l.get(_.R0b);this.isNgZoneEnabled=S instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Xo(){return new Y(new J([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new cg(l,h,M=>this.triggerEvent(new Ii(M)),M=>this.triggerEvent(new za(M))),this.routerState=md(this.currentUrlTree,this.rootComponentType),this.transitions=new ai({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(er(i=>0!==i.id),(0,Et.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Dn(i=>{let a=!1,l=!1;return et(i).pipe((0,Ei.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dn(h=>{const g=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return hg(h.source)&&(this.browserUrlTree=h.extractedUrl),et(h).pipe(Dn(S=>{const M=this.transitions.getValue();return r.next(new ju(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),M!==this.transitions.getValue()?Cs.E:Promise.resolve(S)}),function Xb(n,e,t,r){return Dn(i=>function Ci(n,e,t,r,i){return new sf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Et.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ei.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function $R(n,e,t,r,i){return(0,tr.z)(a=>function cT(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new dT(n,e,t,r,i,a).recognize();return null===l?G_(new lT):et(l)}catch(l){return G_(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,Et.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ei.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const M=new qa(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(M)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:V,source:Z,restoredState:Ce,extras:ke}=h,gt=new ju(M,this.serializeUrl(V),Z,Ce);r.next(gt);const wt=md(V,this.rootComponentType).snapshot;return et(Object.assign(Object.assign({},h),{targetSnapshot:wt,urlAfterRedirects:V,extras:Object.assign(Object.assign({},ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Cs.E}),W_(h=>{const{targetSnapshot:g,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:M,replaceUrl:V}}=h;return this.hooks.beforePreactivation(g,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!M,replaceUrl:!!V})}),(0,Ei.b)(h=>{const g=new Wa(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,Et.U)(h=>Object.assign(Object.assign({},h),{guards:C0(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function H_(n,e){return(0,tr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?et(Object.assign(Object.assign({},t),{guardsResult:!0})):function rT(n,e,t,r){return(0,En.D)(n).pipe((0,tr.z)(i=>function uT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?et(a.map(h=>{const g=af(h,e,i);let w;if(function uc(n){return n&&Tt(n.canDeactivate)}(g))w=fr(g.canDeactivate(n,e,t,r));else{if(!Tt(g))throw new Error("Invalid CanDeactivate guard");w=fr(g(n,e,t,r))}return w.pipe(Qo())})).pipe(cc()):et(!0)}(i.component,i.route,t,e,r)),Qo(i=>!0!==i,!0))}(l,r,i,n).pipe((0,tr.z)(h=>h&&function Mn(n){return"boolean"==typeof n}(h)?function iT(n,e,t,r){return(0,En.D)(e).pipe(wi(i=>Ha(function sT(n,e){return null!==n&&e&&e(new Hu(n)),et(!0)}(i.route.parent,r),function cf(n,e){return null!==n&&e&&e(new Jo(n)),et(!0)}(i.route,r),function aT(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function eT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Xl(()=>et(l.guards.map(g=>{const w=af(g,l.node,t);let D;if(function Id(n){return n&&Tt(n.canActivateChild)}(w))D=fr(w.canActivateChild(r,n));else{if(!Tt(w))throw new Error("Invalid CanActivateChild guard");D=fr(w(r,n))}return D.pipe(Qo())})).pipe(cc())));return et(a).pipe(cc())}(n,i.path,t),function oT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const i=r.map(a=>Xl(()=>{const l=af(a,e,t);let h;if(function tl(n){return n&&Tt(n.canActivate)}(l))h=fr(l.canActivate(e,n));else{if(!Tt(l))throw new Error("Invalid CanActivate guard");h=fr(l(e,n))}return h.pipe(Qo())}));return et(i).pipe(cc())}(n,i.route,t))),Qo(i=>!0!==i,!0))}(r,a,n,e):et(h)),(0,Et.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Ei.b)(h=>{if(di(h.guardsResult)){const w=Wu(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const g=new Wh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),er(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),W_(h=>{if(h.guards.canActivateChecks.length)return et(h).pipe((0,Ei.b)(g=>{const w=new $u(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(w)}),Dn(g=>{let w=!1;return et(g).pipe(function S0(n,e){return(0,tr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return et(t);let a=0;return(0,En.D)(i).pipe(wi(l=>function HR(n,e,t,r){return function ta(n,e,t,r){const i=ug(n);if(0===i.length)return et({});const a={};return(0,En.D)(i).pipe((0,tr.z)(l=>function q_(n,e,t,r){const i=af(n,e,r);return fr(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Ei.b)(h=>{a[l]=h}))),dd(1),(0,tr.z)(()=>ug(a).length===i.length?et(a):Cs.E))}(n._resolve,n,e,r).pipe((0,Et.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),tg(n,t).resolve),null)))}(l.route,r,n,e)),(0,Ei.b)(()=>a++),dd(1),(0,tr.z)(l=>a===i.length?et(t):Cs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ei.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,Ei.b)(g=>{const w=new Gr(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(w)}))}),W_(h=>{const{targetSnapshot:g,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:M,replaceUrl:V}}=h;return this.hooks.afterPreactivation(g,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!M,replaceUrl:!!V})}),(0,Et.U)(h=>{const g=function N_(n,e,t){const r=ac(n,e._root,t?t._root:void 0);return new oc(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:g})}),(0,Ei.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Et.U)(r=>(new Ne(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Ei.b)({next(){a=!0},complete(){a=!0}}),function qh(n){return(0,Rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),ui(h=>{if(l=!0,function Io(n){return n&&n[ci]}(h)){const g=di(h.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const w=new nc(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),g?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hg(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new nr(i.id,this.serializeUrl(i.extractedUrl),h);r.next(g);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return Cs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const g=Object.assign({},l);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){nf(t),this.config=t.map(rf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:g}=r,w=i||this.routerState.root,D=g?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function Yh(n,e,t,r,i){if(0===t.length)return Qh(e.root,e.root,e,r,i);const a=function O_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new k_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return hr(a.outlets,(g,w)=>{h[w]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new k_(t,e,r)}(t);if(a.toRoot())return Qh(e.root,new J([],{}),e,r,i);const l=function _0(n,e,t){if(n.isAbsolute)return new Xh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Xh(a,a===e.root,0)}const r=xs(n.commands[0])?0:1;return function ng(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Xh(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?v(l.segmentGroup,l.index,a.commands):F_(l.segmentGroup,l.index,a.commands);return Qh(l.segmentGroup,h,e,r,i)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=di(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function mT(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},P0):!1===r?Object.assign({},gT):r,di(t))return Zu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Zu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ts(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,g,w;if(this.disposed)return Promise.resolve(!1);const D=this.transitions.value,S=hg(r)&&D&&!hg(D.source),M=D.rawUrl.toString()===t.toString(),V=D.id===(null===(h=this.currentNavigation)||void 0===h?void 0:h.id);if(S&&M&&V)return Promise.resolve(!0);let Ce,ke,gt;l?(Ce=l.resolve,ke=l.reject,gt=l.promise):gt=new Promise((ft,vn)=>{Ce=ft,ke=vn});const wt=++this.navigationId;let Ct;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Ct=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Ct=0,this.setTransition({id:wt,targetPageId:Ct,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:Ce,reject:ke,promise:gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),gt.catch(ft=>Promise.reject(ft))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new nc(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function hg(n){return"imperative"!==n}let hc=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new Is.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Ad(this.skipLocationChange),replaceUrl:Ad(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ad(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(hi),_.Y36(ea),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},n.\u0275dir=_.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&_.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),n})();function Ad(n){return""===n||!!n}class fg{}class pg{preload(e,t){return et(null)}}let k0=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new cg(i,r,g=>t.triggerEvent(new Ii(g)),g=>t.triggerEvent(new za(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(er(t=>t instanceof Ts),wi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(_.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,En.D)(i).pipe((0,os.J)(),(0,Et.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?et(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,tr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(hi),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(fg))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Z_=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ju?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ts&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Gu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const il=new _.OlP("ROUTER_CONFIGURATION"),sl=new _.OlP("ROUTER_FORROOT_GUARD"),O0=[be,{provide:Xt,useClass:Gn},{provide:hi,useFactory:function V0(n,e,t,r,i,a,l={},h,g){const w=new hi(null,n,e,t,r,i,Ku(a));return h&&(w.urlHandlingStrategy=h),g&&(w.routeReuseStrategy=g),function Q_(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,w),l.enableTracing&&w.events.subscribe(D=>{var S,M;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(M=console.groupEnd)||void 0===M||M.call(console)}),w},deps:[Xt,nl,be,_.zs3,_.Sil,lg,il,[class z_{},new _.FiY],[class A0{},new _.FiY]]},nl,{provide:ea,useFactory:function B0(n){return n.routerState.root},deps:[hi]},k0,pg,class M0{preload(e,t){return t().pipe(ui(()=>et(null)))}},{provide:il,useValue:{enableTracing:!1}}];function L0(){return new _.PXZ("Router",hi)}let F0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[O0,Y_(t),{provide:sl,useFactory:U0,deps:[[hi,new _.FiY,new _.tp0]]},{provide:il,useValue:r||{}},{provide:Q,useFactory:vT,deps:[ue,[new _.tBr(Re),new _.FiY],il]},{provide:Z_,useFactory:gg,deps:[hi,sd,il]},{provide:fg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:pg},{provide:_.PXZ,multi:!0,useFactory:L0},[xd,{provide:_.ip1,multi:!0,useFactory:mg,deps:[xd]},{provide:_g,useFactory:j0,deps:[xd]},{provide:_.tb,multi:!0,useExisting:_g}]]}}static forChild(t){return{ngModule:n,providers:[Y_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(sl,8),_.LFG(hi,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function gg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Z_(n,e,t)}function vT(n,e,t={}){return t.useHash?new he(n,e):new Pe(n,e)}function U0(n){return"guarded"}function Y_(n){return[{provide:_.deG,multi:!0,useValue:n},{provide:lg,multi:!0,useValue:n}]}let xd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Is.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(hi),l=this.injector.get(il);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?et(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(il),i=this.injector.get(k0),a=this.injector.get(Z_),l=this.injector.get(hi),h=this.injector.get(_.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function mg(n){return n.appInitializer.bind(n)}function j0(n){return n.bootstrapListener.bind(n)}const _g=new _.OlP("Router Initializer");let hf=(()=>{class n{constructor(){this.title="angularfiebase-authentication"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[bd],styles:[""]}),n})();var Vr=O(2011),yg=O(6451),vg=O(5363),wT=O(6063);class G0 extends Is.x{constructor(e=1/0,t=1/0,r=wT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)h=g;h&&r.splice(0,h+1)}}}var wg=O(3099);function J_(n,e,t){var r,i;let a,l=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,l=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,wg.B)({connector:()=>new G0(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function ET(n,e){return(0,tc.m)(e)?Dn(()=>n,e):Dn(()=>n)}var Eg=O(9468),un=O(5813);O(5867);var we=O(5861),kn=O(9681),Xs=O(4859),k=O(2090),Rs=O(1877);const ra=new Map,ey={activated:!1,tokenObservers:[]},q0={initialized:!1,enabled:!1};function Pr(n){return ra.get(n)||ey}function ia(n,e){ra.set(n,e)}function ff(){return q0}class YR{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function RT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Hi=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ry(n){if(!Pr(n).activated)throw Hi.create("use-before-activation",{appName:n.name})}function Ag(n,e){return xg.apply(this,arguments)}function xg(){return(xg=(0,we.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw Hi.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw Hi.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Hi.create("fetch-parse-error",{originalErrorMessage:S.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Hi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(g[1]),D=Date.now();return{token:h.attestationToken,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function JR(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Rg="firebase-app-check-store";let ay=null;function kT(){return ay||(ay=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Hi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Rg,{keyPath:"compositeKey"})}}catch(t){e(Hi.create("storage-open",{originalErrorMessage:t.message}))}}),ay)}function uy(){return(uy=(0,we.Z)(function*(n,e){const r=(yield kT()).transaction(Rg,"readwrite"),a=r.objectStore(Rg).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var w;h(Hi.create("storage-set",{originalErrorMessage:null===(w=g.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const fc=new Rs.Yd("@firebase/app-check");function dy(n,e){return(0,k.hl)()?function nP(n,e){return function Pg(n,e){return uy.apply(this,arguments)}(function cy(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function z0(){return ff().enabled}function hy(){return fy.apply(this,arguments)}function fy(){return(fy=(0,we.Z)(function*(){const n=ff();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mf={error:"UNKNOWN_ERROR"};function Rd(n){return k.US.encodeString(JSON.stringify(n),!1)}function Pd(n){return al.apply(this,arguments)}function al(){return(al=(0,we.Z)(function*(n,e=!1){const t=n.app;ry(t);const r=Pr(t);let a,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&Nd(g)&&(i=g)}if(!e&&i&&Nd(i))return{token:i.token};let h,l=!1;if(z0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ag(JR(t,yield hy()),n.platformLoggerProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),l=!0);const g=yield r.exchangeTokenPromise;return yield dy(t,g),ia(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),l=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?fc.warn(g.message):fc.error(g),a=g}return i?(h={token:i.token},ia(t,Object.assign(Object.assign({},r),{token:i})),yield dy(t,i)):h=gy(a),l&&py(t,h),h})).apply(this,arguments)}function ul(n,e){const t=Pr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ia(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function K0(n){const{app:e}=n,t=Pr(e);let r=t.tokenRefresher;r||(r=function Z0(n){const{app:e}=n;return new YR((0,we.Z)(function*(){let r;if(r=Pr(e).token?yield Pd(n,!0):yield Pd(n),r.error)throw r.error}),()=>!0,()=>{const t=Pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ia(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function py(n,e){const t=Pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Nd(n){return n.expireTimeMillis-Date.now()>0}function gy(n){return{token:Rd(mf),error:n}}class Y0{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Pr(this.app);for(const t of e)ul(this.app,t.next);return Promise.resolve()}}const rE="app-check-internal";!function iE(){(0,kn._registerComponent)(new Xs.wA("app-check",n=>function Ng(n,e){return new Y0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rE).initialize()})),(0,kn._registerComponent)(new Xs.wA(rE,n=>function UT(n){return{getToken:e=>Pd(n,e),addTokenListener:e=>function pc(n,e,t,r){const{app:i}=n,a=Pr(i),l={next:t,error:r,type:e};if(ia(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&Nd(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),K0(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>K0(n))}(n,"INTERNAL",e),removeTokenListener:e=>ul(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,kn.registerVersion)("@firebase/app-check","0.5.3")}();class cs{constructor(){return(0,un.vb)("app-check")}}"undefined"!=typeof window&&window;var Md=O(127);const by=new _.OlP("angularfire2.auth.use-emulator"),Ty=new _.OlP("angularfire2.auth.settings"),_f=new _.OlP("angularfire2.auth.tenant-id"),cE=new _.OlP("angularfire2.auth.langugage-code"),Dy=new _.OlP("angularfire2.auth.use-device-language"),Og=new _.OlP("angularfire.auth.persistence"),Lg=(n,e,t,r,i,a,l,h)=>(0,Vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))g.settings[w]=D;return h&&g.setPersistence(h),g},[t,r,i,a,l,h]);let kd=(()=>{class n{constructor(t,r,i,a,l,h,g,w,D,S,M,V){const Z=new Is.x,Ce=et(void 0).pipe((0,vg.Q)(l.outsideAngular),Dn(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,Et.U)(()=>(0,Vr.on)(t,a,r)),(0,Et.U)(ke=>Lg(ke,a,h,w,D,S,g,M)),J_({bufferSize:1,refCount:!1}));if(Aa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{Ce.pipe(Qo()).subscribe();const gt=Ce.pipe(Dn(ft=>ft.getRedirectResult().then(vn=>vn,()=>null)),un.iC,J_({bufferSize:1,refCount:!1})),wt=Ce.pipe(Dn(ft=>new $n.y(vn=>({unsubscribe:a.runOutsideAngular(()=>ft.onAuthStateChanged(Oi=>vn.next(Oi),Oi=>vn.error(Oi),()=>vn.complete()))})))),Ct=Ce.pipe(Dn(ft=>new $n.y(vn=>({unsubscribe:a.runOutsideAngular(()=>ft.onIdTokenChanged(Oi=>vn.next(Oi),Oi=>vn.error(Oi),()=>vn.complete()))}))));this.authState=gt.pipe(ET(wt),(0,Eg.R)(l.outsideAngular),(0,vg.Q)(l.insideAngular)),this.user=gt.pipe(ET(Ct),(0,Eg.R)(l.outsideAngular),(0,vg.Q)(l.insideAngular)),this.idToken=this.user.pipe(Dn(ft=>ft?(0,En.D)(ft.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(Dn(ft=>ft?(0,En.D)(ft.getIdTokenResult()):et(null))),this.credential=(0,yg.T)(gt,Z,this.authState.pipe(er(ft=>!ft))).pipe((0,Et.U)(ft=>(null==ft?void 0:ft.user)?ft:null),(0,Eg.R)(l.outsideAngular),(0,vg.Q)(l.insideAngular))}return(0,Vr.pX)(this,Ce,a,{spy:{apply:(ke,gt,wt)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&wt.then(Ct=>Z.next(Ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Vr.Dh),_.LFG(Vr.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(un.HU),_.LFG(by,8),_.LFG(Ty,8),_.LFG(_f,8),_.LFG(cE,8),_.LFG(Dy,8),_.LFG(Og,8),_.LFG(cs,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dE=(()=>{class n{constructor(){Md.Z.registerVersion("angularfire",un.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[kd]}),n})();var Fg=O(4986),Od=O(3942);const hE="firebasestorage.googleapis.com",fE="storageBucket";class rr extends k.ZR{constructor(e,t){super(yf(e),`Firebase Storage: ${t} (${yf(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rr.prototype)}_codeEquals(e){return yf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function yf(n){return"storage/"+n}function gc(){return new rr("unknown","An unknown error occurred, please check the error payload for server response.")}function Ug(){return new rr("canceled","User canceled the upload/download.")}function mc(){return new rr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ld(n){return new rr("invalid-argument",n)}function _c(){return new rr("app-deleted","The Firebase app was deleted.")}function vE(n){return new rr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vf(n,e){return new rr("invalid-format","String does not match format '"+n+"': "+e)}function wf(n){throw new rr("internal-error","Internal error: "+n)}class bi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=bi.makeFromUrl(e,t)}catch(i){return new bi(e,"")}if(""===r.path)return r;throw function XT(n){return new rr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(ft){ft.path_=decodeURIComponent(ft.path)}const S=t.replace(/[.]/g,"\\."),Ct=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ft){"/"===ft.path.charAt(ft.path.length-1)&&(ft.path_=ft.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===hE?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let ft=0;ft<Ct.length;ft++){const vn=Ct[ft],Oi=vn.regex.exec(e);if(Oi){let h0=Oi[vn.indices.path];h0||(h0=""),r=new bi(Oi[vn.indices.bucket],h0),vn.postModify(r);break}}if(null==r)throw function JT(n){return new rr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class eo{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Vg(n){return"string"==typeof n||n instanceof String}function bE(n){return Ry()&&n instanceof Blob}function Ry(){return"undefined"!=typeof Blob}function Py(n,e,t,r){if(r<e)throw Ld(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ld(`Invalid value for '${n}'. Expected ${t} or less.`)}function oa(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function tD(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var eu=(()=>{return(n=eu||(eu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",eu;var n})();class nD{constructor(e,t,r,i,a,l,h,g,w,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=g,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,V)=>{this.resolve_=M,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function EE(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==h){const g=gc();g.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,g):g)}else l(i.canceled?this.appDelete_?_c():Ug():function QT(){return new rr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Bg(!1,null,!0)):this.backoffId_=function xy(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function g(){return 2===h}let w=!1;function D(...ke){w||(w=!0,e.apply(null,ke))}function S(ke){i=setTimeout(()=>{i=null,n(V,g())},ke)}function M(){a&&clearTimeout(a)}function V(ke,...gt){if(w)return void M();if(ke)return M(),void D.call(null,ke,...gt);if(g()||l)return M(),void D.call(null,ke,...gt);let Ct;r<64&&(r*=2),1===h?(h=2,Ct=0):Ct=1e3*(r+Math.random()),S(Ct)}let Z=!1;function Ce(ke){Z||(Z=!0,M(),!w&&(null!==i?(ke||(h=2),clearTimeout(i),S(0)):ke||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,Ce(!0)},t),Ce}((r,i)=>{if(i)return void r(!1,new Bg(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===eu.NO_ERROR,g=a.getStatus();if(!h||this.isRetryStatusCode_(g)){const D=a.getErrorCode()===eu.ABORT;return void r(!1,new Bg(!1,null,D))}const w=-1!==this.successCodes_.indexOf(g);r(!0,new Bg(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function wE(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class Bg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function _P(...n){const e=function DE(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Ry())return new Blob(n);throw new rr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const to={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jg{constructor(e,t){this.data=e,this.contentType=t||null}}function $g(n,e){switch(n){case to.RAW:return new jg(My(e));case to.BASE64:case to.BASE64URL:return new jg(sD(n,e));case to.DATA_URL:return new jg(function SE(n){const e=new ky(n);return e.base64?sD(to.BASE64,e.rest):function iD(n){let e;try{e=decodeURIComponent(n)}catch(t){throw vf(to.DATA_URL,"Malformed data URL.")}return My(e)}(e.rest)}(e),function oD(n){return new ky(n).contentType}(e))}throw gc()}function My(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function sD(n,e){switch(n){case to.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw vf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case to.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw vf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function yP(n){return atob(n)}(e)}catch(i){throw vf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class ky{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw vf(to.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Oy(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class aa{constructor(e,t){let r=0,i="";bE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(bE(this.data_)){const i=function To(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new aa(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new aa(r,!0)}}static getBlob(...e){if(Ry()){const t=e.map(r=>r instanceof aa?r.data_:r);return new aa(_P.apply(null,t))}{const t=e.map(l=>Vg(l)?$g(to.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new aa(i,!0)}}uploadData(){return this.data_}}function Ly(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function CE(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function AE(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function lD(n,e){return e}class Kr{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||lD}}let tu=null;function nu(){if(tu)return tu;const n=[];n.push(new Kr("bucket")),n.push(new Kr("generation")),n.push(new Kr("metageneration")),n.push(new Kr("name","fullPath",!0));const t=new Kr("name");t.xform=function e(a,l){return function cD(n){return!Vg(n)||n.length<2?n:AE(n)}(l)},n.push(t);const i=new Kr("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Kr("timeCreated")),n.push(new Kr("updated")),n.push(new Kr("md5Hash",null,!0)),n.push(new Kr("cacheControl",null,!0)),n.push(new Kr("contentDisposition",null,!0)),n.push(new Kr("contentEncoding",null,!0)),n.push(new Kr("contentLanguage",null,!0)),n.push(new Kr("contentType",null,!0)),n.push(new Kr("metadata","customMetadata",!0)),tu=n,tu}function Hg(n,e,t){const r=Ly(e);return null===r?null:function hD(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function dD(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new bi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function yc(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const fi="prefixes";class ro{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Gi(n){if(!n)throw gc()}function ru(n,e){return function t(r,i){const a=Hg(n,i,e);return Gi(null!==a),a}}function Do(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function gE(){return new rr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function pE(){return new rr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Ay(n){return new rr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function mE(n){return new rr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function la(n){const e=Do(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function YT(n){return new rr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function vc(n,e,t){const i=oa(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ro(i,"GET",ru(n,t),l);return h.errorHandler=la(e),h}function Vd(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=oa(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new ro(h,"GET",function Fd(n,e){return function t(r,i){const a=function no(n,e,t){const r=Ly(t);return null===r?null:function Gg(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[fi])for(const i of t[fi]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new bi(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new bi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Gi(null!==a),a}}(n,e.bucket),w);return D.urlParams=a,D.errorHandler=Do(e),D}function Fy(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function NE(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Ef{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function qg(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Gi(!1)}return Gi(!!t&&-1!==(e||["active"]).indexOf(t)),t}const kE={STATE_CHANGED:"state_changed"},Ti={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function By(n){switch(n){case"running":case"pausing":case"canceling":return Ti.RUNNING;case"paused":return Ti.PAUSED;case"success":return Ti.SUCCESS;case"canceled":return Ti.CANCELED;default:return Ti.ERROR}}class gD{constructor(e,t,r){if(function IE(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Ec(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class mD extends class LE{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=eu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=eu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=eu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw wf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wf("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw wf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function So(){return new mD}class FE{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=nu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function ME(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=Fy(e,r,i),h={name:l.fullPath},g=oa(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=yc(l,t),Z=new ro(g,"POST",function V(Ce){let ke;qg(Ce);try{ke=Ce.getResponseHeader("X-Goog-Upload-URL")}catch(gt){Gi(!1)}return Gi(Vg(ke)),ke},n.maxUploadRetryTime);return Z.urlParams=h,Z.headers=D,Z.body=S,Z.errorHandler=Do(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,So,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function fD(n,e,t,r){const g=new ro(t,"POST",function a(w){const D=qg(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){Gi(!1)}S||Gi(!1);const M=Number(S);return Gi(!isNaN(M)),new Ef(M,r.size(),"final"===D)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Do(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,So,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Ef(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function pD(n,e,t,r,i,a,l,h){const g=new Ef(0,0);if(l?(g.current=l.current,g.total=l.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function yE(){return new rr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=g.total-g.current;let D=w;i>0&&(D=Math.min(D,i));const S=g.current,Z={"X-Goog-Upload-Command":D===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},Ce=r.slice(S,S+D);if(null===Ce)throw mc();const Ct=new ro(t,"POST",function ke(ft,vn){const Oi=qg(ft,["active","final"]),Oh=g.current+D,h0=r.size();let BR;return BR="final"===Oi?ru(e,a)(ft,vn):null,new Ef(Oh,h0,"final"===Oi,BR)},e.maxUploadRetryTime);return Ct.headers=Z,Ct.body=Ce.uploadData(),Ct.progressCallback=h||null,Ct.errorHandler=Do(n),Ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(l,So,i,a);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=vc(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,So,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Uy(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let Ct="";for(let ft=0;ft<2;ft++)Ct+=Math.random().toString().slice(2);return Ct}();l["Content-Type"]="multipart/related; boundary="+g;const w=Fy(e,r,i),D=yc(w,t),V=aa.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+g+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===V)throw mc();const Z={name:w.fullPath},Ce=oa(a,n.host,n._protocol),gt=n.maxUploadRetryTime,wt=new ro(Ce,"POST",ru(n,t),gt);return wt.urlParams=Z,wt.headers=l,wt.body=V.uploadData(),wt.errorHandler=Do(e),wt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,So,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ug(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=By(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new gD(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(By(this._state)){case Ti.SUCCESS:Ec(this._resolve.bind(null,this.snapshot))();break;case Ti.CANCELED:case Ti.ERROR:Ec(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(By(this._state)){case Ti.RUNNING:case Ti.PAUSED:e.next&&Ec(e.next.bind(e,this.snapshot))();break;case Ti.SUCCESS:e.complete&&Ec(e.complete.bind(e))();break;default:e.error&&Ec(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Bd{constructor(e,t){this._service=e,this._location=t instanceof bi?t:bi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bd(e,t)}get root(){const e=new bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AE(this._location.path)}get storage(){return this._service}get parent(){const e=function aD(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new bi(this._location.bucket,e);return new Bd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw vE(e)}}function Ic(n,e,t){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,we.Z)(function*(n,e,t){const i=yield Gy(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Ic(n,e,i.nextPageToken))})).apply(this,arguments)}function Gy(n,e){null!=e&&"number"==typeof e.maxResults&&Py("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Vd(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,So)}function Wg(n){n._throwIfRoot("getDownloadURL");const e=function xE(n,e,t){const i=oa(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ro(i,"GET",function Ud(n,e){return function t(r,i){const a=Hg(n,i,e);return Gi(null!==a),function ua(n,e,t,r){const i=Ly(e);if(null===i||!Vg(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return oa("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+tD({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=la(e),h}(n.storage,n._location,nu());return n.storage.makeRequestWithTokens(e,So).then(t=>{if(null===t)throw function eD(){return new rr("no-download-url","The given file does not have any download URLs.")}();return t})}function qy(n,e){const t=function uD(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new bi(n._location.bucket,t);return new Bd(n.storage,r)}function jE(n,e){if(n instanceof Wy){const t=n;if(null==t._bucket)throw function _E(){return new rr("no-default-bucket","No default bucket found. Did you set the '"+fE+"' property when initializing the app?")}();const r=new Bd(t,t._bucket);return null!=e?jE(r,e):r}return void 0!==e?qy(n,e):n}function CD(n,e){if(e&&function ED(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Wy)return function ID(n,e){return new Bd(n,e)}(n,e);throw Ld("To use ref(service, url), the first argument must be a Storage instance.")}return jE(n,e)}function $E(n,e){const t=null==e?void 0:e[fE];return null==t?null:bi.makeFromBucketSpec(t,n)}class Wy{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=hE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?bi.makeFromBucketSpec(i,this._host):$E(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?bi.makeFromBucketSpec(this._url,e):$E(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Py("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Py("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bd(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new eo(_c());{const a=function TE(n,e,t,r,i,a){const l=tD(n.urlParams),h=n.url+l,g=Object.assign({},n.headers);return function Ny(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function gP(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function mP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(g,a),function rD(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new nD(h,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,we.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const zy="@firebase/storage";function Cf(n,e){return CD(n=(0,k.m9)(n),e)}function KE(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Wy(t,r,i,e,kn.SDK_VERSION)}!function ZE(){(0,kn._registerComponent)(new Xs.wA("storage",KE,"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(zy,"0.9.2",""),(0,kn.registerVersion)(zy,"0.9.2","esm2017")}();class jd{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Jy{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new jd(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new jd(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new jd(l,this,this._ref)):{next:t.next?l=>t.next(new jd(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Xy{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ao(e,this._service))}get items(){return this._delegate.items.map(e=>new Ao(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ao{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Qy(n,e){return qy(n,e)}(this._delegate,e);return new Ao(t,this.storage)}get root(){return new Ao(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ao(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Jy(function bP(n,e,t){return function VE(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new FE(n,new aa(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=to.RAW,r){this._throwIfRoot("putString");const i=$g(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Jy(new FE(this._delegate,new aa(i.data,!0),a),this)}listAll(){return function Yy(n){return function yD(n){const e={prefixes:[],items:[]};return Ic(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new Xy(e,this.storage))}list(e){return function Zy(n,e){return Gy(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Xy(t,this.storage))}getMetadata(){return function If(n){return function vD(n){n._throwIfRoot("getMetadata");const e=vc(n.storage,n._location,nu());return n.storage.makeRequestWithTokens(e,So)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function qE(n,e){return function BE(n,e){n._throwIfRoot("updateMetadata");const t=function RE(n,e,t,r){const a=oa(e.fullServerUrl(),n.host,n._protocol),h=yc(t,r),w=n.maxOperationRetryTime,D=new ro(a,"PATCH",ru(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=la(e),D}(n.storage,n._location,e,nu());return n.storage.makeRequestWithTokens(t,So)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function bD(n){return Wg(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Kg(n){return function wD(n){n._throwIfRoot("deleteObject");const e=function PE(n,e){const r=oa(e.fullServerUrl(),n.host,n._protocol),h=new ro(r,"DELETE",function l(g,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=la(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,So)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw vE(e)}}class ev{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(YE(e))throw Ld("ref() expected a child path but got a URL, use refFromURL instead.");return new Ao(Cf(this._delegate,e),this)}refFromURL(e){if(!YE(e))throw Ld("refFromURL() expected a full URL but got a child path, use ref() instead.");try{bi.makeFromUrl(e,this._delegate.host)}catch(t){throw Ld("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ao(Cf(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function TD(n,e,t,r={}){!function HE(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function YE(n){return/^[A-Za-z]+:\/\//.test(n)}function DD(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new ev(t,r)}function XE(n){const e=function AD(n){return new $n.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function Xa(n,e=Fg.z){return(0,Rr.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function g(){const w=l+n,D=e.now();if(D<w)return i=this.schedule(void 0,w-D),void r.add(i);h()}t.subscribe((0,hn.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Et.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function $d(n){return{getDownloadURL:()=>et(void 0).pipe(un.fc,Dn(()=>n.getDownloadURL()),un.iC),getMetadata:()=>et(void 0).pipe(un.fc,Dn(()=>n.getMetadata()),un.iC),delete:()=>(0,En.D)(n.delete()),child:e=>$d(n.child(e)),updateMetadata:e=>(0,En.D)(n.updateMetadata(e)),put:(e,t)=>XE(n.put(e,t)),putString:(e,t,r)=>XE(n.putString(e,t,r)),list:e=>(0,En.D)(n.list(e)),listAll:()=>(0,En.D)(n.listAll())}}!function SD(n){const e={TaskState:Ti,TaskEvent:kE,StringFormat:to,Storage:ev,Reference:Ao};n.INTERNAL.registerComponent(new Xs.wA("storage-compat",DD,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.10")}(Od.Z);const nv=new _.OlP("angularfire2.storageBucket"),eI=new _.OlP("angularfire2.storage.maxUploadRetryTime"),tI=new _.OlP("angularfire2.storage.maxOperationRetryTime"),nI=new _.OlP("angularfire2.storage.use-emulator");let rI=(()=>{class n{constructor(t,r,i,a,l,h,g,w,D,S){const M=(0,Vr.on)(t,l,r);this.storage=(0,Vr.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const V=l.runOutsideAngular(()=>M.storage(i||void 0)),Z=D;return Z&&V.useEmulator(...Z),g&&V.setMaxUploadRetryTime(g),w&&V.setMaxOperationRetryTime(w),V},[g,w])}ref(t){return $d(this.storage.ref(t))}refFromURL(t){return $d(this.storage.refFromURL(t))}upload(t,r,i){return $d(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Vr.Dh),_.LFG(Vr.xv,8),_.LFG(nv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(un.HU),_.LFG(eI,8),_.LFG(tI,8),_.LFG(nI,8),_.LFG(cs,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})(),sI=(()=>{class n{constructor(){Md.Z.registerVersion("angularfire",un.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[rI],imports:[iI]}),n})();function Zg(){return(0,Rr.e)((n,e)=>{let t,r=!1;n.subscribe((0,hn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function RD(n,e=ss.y){return n=null!=n?n:PD,(0,Rr.e)((t,r)=>{let i,a=!0;t.subscribe((0,hn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function PD(n,e){return n===e}O(5881);var Ge,oI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},iu={},Yg=Yg||{},Rt=oI||self;function Qg(){}function Jg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xg="closure_uid_"+(1e9*Math.random()>>>0),Hd=0;function ND(n,e,t){return n.call.apply(n.bind,arguments)}function MD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Zr(n,e,t){return(Zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ND:MD).apply(null,arguments)}function em(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Yr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Cc(){this.s=this.s,this.o=this.o}var lI={};Cc.prototype.s=!1,Cc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function aI(n){return Object.prototype.hasOwnProperty.call(n,Xg)&&n[Xg]||(n[Xg]=++Hd)}(this);delete lI[n]}},Cc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xo=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},cI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Ro(n){return Array.prototype.concat.apply([],arguments)}function Ps(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ds(n){return/^[\s\xa0]*$/.test(n)}var qi,rv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Di(n,e){return-1!=n.indexOf(e)}function iv(n,e){return n<e?-1:n>e?1:0}e:{var dI=Rt.navigator;if(dI){var hI=dI.userAgent;if(hI){qi=hI;break e}}qi=""}function Tf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Gd(n){const e={};for(const t in n)e[t]=n[t];return e}var fI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<fI.length;a++)t=fI[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ov(n){return ov[" "](n),n}ov[" "]=Qg;var Df,n,gI=Di(qi,"Opera"),su=Di(qi,"Trident")||Di(qi,"MSIE"),mI=Di(qi,"Edge"),tm=mI||su,av=Di(qi,"Gecko")&&!(Di(qi.toLowerCase(),"webkit")&&!Di(qi,"Edge"))&&!(Di(qi,"Trident")||Di(qi,"MSIE"))&&!Di(qi,"Edge"),uv=Di(qi.toLowerCase(),"webkit")&&!Di(qi,"Edge");function nm(){var n=Rt.document;return n?n.documentMode:void 0}e:{var rm="",im=(n=qi,av?/rv:([^\);]+)(\)|;)/.exec(n):mI?/Edge\/([\d\.]+)/.exec(n):su?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uv?/WebKit\/(\S+)/.exec(n):gI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(im&&(rm=im?im[1]:""),su){var sm=nm();if(null!=sm&&sm>parseFloat(rm)){Df=String(sm);break e}}Df=rm}var _I={};var OD=Rt.document&&su&&(nm()||parseInt(Df,10))||void 0,LD=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",Qg,e),Rt.removeEventListener("test",Qg,e)}catch(t){}return n}();function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Sf(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(av){e:{try{ov(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:FD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sf.Z.h.call(this)}}Si.prototype.h=function(){this.defaultPrevented=!0},Yr(Sf,Si);var FD={2:"touch",3:"pen",4:"mouse"};Sf.prototype.h=function(){Sf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Af="closure_listenable_"+(1e6*Math.random()|0),UD=0;function VD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++UD,this.ca=this.fa=!1}function am(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function um(n){this.src=n,this.g={},this.h=0}function cv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=xo(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(am(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function dv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}um.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=dv(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new VD(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var hv="closure_lm_"+(1e6*Math.random()|0),fv={};function vI(n,e,t,r,i){if(r&&r.once)return EI(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)vI(n,e[a],t,r,i);return null}return t=hm(t),n&&n[Af]?n.N(e,t,bf(r)?!!r.capture:!!r,i):wI(n,e,t,!1,r,i)}function wI(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=bf(i)?!!i.capture:!!i,h=cm(n);if(h||(n[hv]=h=new um(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function BD(){var e=II;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)LD||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(gv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function EI(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)EI(n,e[a],t,r,i);return null}return t=hm(t),n&&n[Af]?n.O(e,t,bf(r)?!!r.capture:!!r,i):wI(n,e,t,!0,r,i)}function pv(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)pv(n,e[a],t,r,i);else r=bf(r)?!!r.capture:!!r,t=hm(t),n&&n[Af]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=dv(a=n.g[e],t,r,i))&&(am(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=cm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=dv(e,t,r,i)),(t=-1<n?e[n]:null)&&lm(t))}function lm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Af])cv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(gv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=cm(e))?(cv(t,n),0==t.h&&(t.src=null,e[hv]=null)):am(n)}}}function gv(n){return n in fv?fv[n]:fv[n]="on"+n}function II(n,e){if(n.ca)n=!0;else{e=new Sf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&lm(n),n=t.call(r,e)}return n}function cm(n){return(n=n[hv])instanceof um?n:null}var dm="__closure_events_fn_"+(1e9*Math.random()>>>0);function hm(n){return"function"==typeof n?n:(n[dm]||(n[dm]=function(e){return n.handleEvent(e)}),n[dm])}function Br(){Cc.call(this),this.i=new um(this),this.P=this,this.I=null}function Qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var i=e;sv(e=new Si(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=xf(l,r,!0,e)&&i}if(i=xf(l=e.g=n,r,!0,e)&&i,i=xf(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=xf(l=e.g=t[a],r,!1,e)&&i}function xf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,g=l.ia||l.src;l.fa&&cv(n.i,l),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}Yr(Br,Cc),Br.prototype[Af]=!0,Br.prototype.removeEventListener=function(n,e,t,r){pv(this,n,e,t,r)},Br.prototype.M=function(){if(Br.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)am(t[r]);delete n.g[e],n.h--}}this.I=null},Br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var fm=Rt.JSON.stringify;function bc(){var n=$D;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bI,CI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new qd,n=>n.reset());class qd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function DP(n){Rt.setTimeout(()=>{throw n},0)}function Rf(n,e){bI||function TI(){var n=Rt.Promise.resolve(void 0);bI=function(){n.then(vt)}}(),pm||(bI(),pm=!0),$D.add(n,e)}var pm=!1,$D=new class jD{constructor(){this.h=this.g=null}add(e,t){const r=CI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function vt(){for(var n;n=bc();){try{n.h.call(n.g)}catch(t){DP(t)}var e=CI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}pm=!1}function gm(n,e){Br.call(this),this.h=n||1,this.g=e||Rt,this.j=Zr(this.kb,this),this.l=Date.now()}function mv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function _v(n,e,t){if("function"==typeof n)t&&(n=Zr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function Pf(n){n.g=_v(()=>{n.g=null,n.i&&(n.i=!1,Pf(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yr(gm,Br),(Ge=gm.prototype).da=!1,Ge.S=null,Ge.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qr(this,"tick"),this.da&&(mv(this),this.start()))}},Ge.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ge.M=function(){gm.Z.M.call(this),mv(this),delete this.g};class HD extends Cc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Pf(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cl(n){Cc.call(this),this.h=n,this.g={}}Yr(cl,Cc);var Nf=[];function ir(n,e,t,r){Array.isArray(t)||(t&&(Nf[0]=t.toString()),t=Nf);for(var i=0;i<t.length;i++){var a=vI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function GD(n){Tf(n.g,function(e,t){this.g.hasOwnProperty(t)&&lm(e)},n),n.g={}}function Mf(){this.g=!0}function Tc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function SI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return fm(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}cl.prototype.M=function(){cl.Z.M.call(this),GD(this)},cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mf.prototype.Aa=function(){this.g=!1},Mf.prototype.info=function(){};var dl={},AI=null;function mm(){return AI=AI||new Br}function xI(n){Si.call(this,dl.Ma,n)}function ou(n){const e=mm();Qr(e,new xI(e,n))}function RI(n,e){Si.call(this,dl.STAT_EVENT,n),this.stat=e}function Wi(n){const e=mm();Qr(e,new RI(e,n))}function PI(n,e){Si.call(this,dl.Na,n),this.size=e}function hl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}dl.Ma="serverreachability",Yr(xI,Si),dl.STAT_EVENT="statevent",Yr(RI,Si),dl.Na="timingevent",Yr(PI,Si);var kf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function _m(){}function Wd(){}_m.prototype.h=null;var Ev,au={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vv(){Si.call(this,"d")}function wv(){Si.call(this,"c")}function Of(){}function zd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new cl(this),this.P=zD,this.W=new gm(n=tm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Iv}function Iv(){this.i=null,this.g="",this.h=!1}Yr(vv,Si),Yr(wv,Si),Yr(Of,_m),Of.prototype.g=function(){return new XMLHttpRequest},Of.prototype.i=function(){return{}},Ev=new Of;var zD=45e3,ym={},vm={};function Cv(n,e,t){n.K=1,n.v=Vf(hs(e)),n.s=t,n.U=!0,KD(n,null)}function KD(n,e){n.F=Date.now(),Kd(n),n.A=hs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),FI(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Iv,n.g=XI(n.l,t?e:null,!n.s),0<n.O&&(n.L=new HD(Zr(n.Ia,n,n.g),n.O)),ir(n.V,n.g,"readystatechange",n.gb),e=n.H?Gd(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),ou(1),function qD(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),g=0;g<h.length;g++){var w=h[g].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ZD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function YD(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=SP(n,t),i==vm){4==e&&(n.o=4,Wi(14),r=!1),Tc(n.j,n.m,null,"[Incomplete Response]");break}if(i==ym){n.o=4,Wi(15),Tc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Tc(n.j,n.m,i,null),Dc(n,i)}ZD(n)&&i!=vm&&i!=ym&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Wi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),QI(e),e.L=!0,Wi(11))):(Tc(n.j,n.m,t,"[Invalid Chunked Response]"),fl(n),Ff(n))}function SP(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?vm:(t=Number(e.substring(t,r)),isNaN(t)?ym:(r+=1)+t>e.length?vm:(e=e.substr(r,t),n.C=r+t,e))}function Kd(n){n.Y=Date.now()+n.P,Lf(n,n.P)}function Lf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hl(Zr(n.eb,n),e)}function wm(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Ff(n){0==n.l.G||n.I||Pc(n.l,n)}function fl(n){wm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,mv(n.W),GD(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Dc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Pv(t.i,n)))if(t.I=n.N,!n.J&&Pv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=hl(Zr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Dm(t),Rc(t)}jv(t),Wi(18)}if(1>=BI(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else io(t,11)}else if((n.J||t.g==n)&&Dm(t),!ds(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const M=w[5];null!=M&&"number"==typeof M&&0<M&&(t.K=r=1.5*M,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const Z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;!a.g&&(Di(Z,"spdy")||Di(Z,"quic")||Di(Z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Cm(a,a.h),a.h=null))}if(r.D){const Ce=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;Ce&&(r.sa=Ce,qn(r.F,r.D,Ce))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=Hv(r,r.H?r.la:null,r.W),l.J){jI(r.i,l);var h=l,g=r.K;g&&h.setTimeout(g),h.B&&(wm(h),Kd(h)),r.g=l}else Tm(r);0<t.l.length&&zf(t)}else"stop"!=w[0]&&"close"!=w[0]||io(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?io(t,7):Wf(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}ou(4)}catch(w){}}function bv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Jg(n)||"string"==typeof n)cI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Jg(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function QD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Jg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Zd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Zd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Tv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Sc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Sc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Sc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ge=zd.prototype).setTimeout=function(n){this.P=n},Ge.gb=function(n){n=n.target;const e=this.L;e&&3==uu(n)?e.l():this.Ia(n)},Ge.Ia=function(n){try{if(n==this.g)e:{const D=uu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||tm||this.g&&(this.h.h||this.g.ga()||zI(this.g)))){this.I||4!=D||7==e||ou(8==e||0>=S?3:2),wm(this);var t=this.g.ba();this.N=t;t:if(ZD(this)){var r=zI(this.g);n="";var i=r.length,a=4==uu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fl(this),Ff(this);var l="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function WD(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ds(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Wi(12),fl(this),Ff(this);break e}Tc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Dc(this,t)}this.U?(YD(this,D,l),tm&&this.i&&3==D&&(ir(this.V,this.W,"tick",this.fb),this.W.start())):(Tc(this.j,this.m,l,null),Dc(this,l)),4==D&&fl(this),this.i&&!this.I&&(4==D?Pc(this.l,this):(this.i=!1,Kd(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Wi(12)):(this.o=0,Wi(13)),fl(this),Ff(this)}}}catch(D){}},Ge.fb=function(){if(this.g){var n=uu(this.g),e=this.g.ga();this.C<e.length&&(wm(this),YD(this,n,e),this.i&&4!=n&&Kd(this))}},Ge.cancel=function(){this.I=!0,fl(this)},Ge.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function DI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ou(3),Wi(17)),fl(this),this.o=2,Ff(this)):Lf(this,this.Y-n)},(Ge=Zd.prototype).R=function(){Tv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ge.T=function(){return Tv(this),this.g.concat()},Ge.get=function(n,e){return Sc(this.h,n)?this.h[n]:e},Ge.set=function(n,e){Sc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ge.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Dv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ac(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ac){this.g=void 0!==e?e:n.g,Em(this,n.j),this.s=n.s,Uf(this,n.i),Im(this,n.m),this.l=n.l,e=n.h;var t=new Qd;t.i=e.i,e.g&&(t.g=new Zd(e.g),t.h=e.h),Sv(this,t),this.o=n.o}else n&&(t=String(n).match(Dv))?(this.g=!!e,Em(this,t[1]||"",!0),this.s=Bf(t[2]||""),Uf(this,t[3]||"",!0),Im(this,t[4]),this.l=Bf(t[5]||"",!0),Sv(this,t[6]||"",!0),this.o=Bf(t[7]||"")):(this.g=!!e,this.h=new Qd(null,this.g))}function hs(n){return new Ac(n)}function Em(n,e,t){n.j=t?Bf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Uf(n,e,t){n.i=t?Bf(e,!0):e}function Im(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Sv(n,e,t){e instanceof Qd?(n.h=e,function rS(n,e){e&&!n.j&&(pl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(OI(this,r),FI(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Yd(e,xv)),n.h=new Qd(e,n.g))}function qn(n,e,t){n.h.set(e,t)}function Vf(n){return qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Bf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Yd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,MI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function MI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ac.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Yd(e,kI,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Yd(e,kI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Yd(t,"/"==t.charAt(0)?tS:eS,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Yd(t,nS)),n.join("")};var kI=/[#\/\?@]/g,eS=/[#\?:]/g,tS=/[#\?]/g,xv=/[#\?@]/g,nS=/#/g;function Qd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pl(n){n.g||(n.g=new Zd,n.h=0,n.i&&function JD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function OI(n,e){pl(n),e=Jd(n,e),Sc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Sc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Tv(n)))}function LI(n,e){return pl(n),e=Jd(n,e),Sc(n.g.h,e)}function FI(n,e,t){OI(n,e),0<t.length&&(n.i=null,n.g.set(Jd(n,e),Ps(t)),n.h+=t.length)}function Jd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function UI(n){this.l=n||VI,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ge=Qd.prototype).add=function(n,e){pl(this),this.i=null,n=Jd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ge.forEach=function(n,e){pl(this),this.g.forEach(function(t,r){cI(t,function(i){n.call(e,i,r,this)},this)},this)},Ge.T=function(){pl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Ge.R=function(n){pl(this);var e=[];if("string"==typeof n)LI(this,n)&&(e=Ro(e,this.g.get(Jd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Ro(e,n[t])}return e},Ge.set=function(n,e){return pl(this),this.i=null,LI(this,n=Jd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ge.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var VI=10;function Rv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function BI(n){return n.h?1:n.g?n.g.size:0}function Pv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Cm(n,e){n.g?n.g.add(e):n.h=e}function jI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $I(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ps(n.i)}function Nv(){}function Mv(){this.g=new Nv}function kv(n,e,t){const r=t||"";try{bv(n,function(i,a){let l=i;bf(i)&&(l=fm(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Xd(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function jf(n){this.l=n.$b||null,this.j=n.ib||!1}function bm(n,e){Br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=$f,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}UI.prototype.cancel=function(){if(this.i=$I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Nv.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},Nv.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},Yr(jf,_m),jf.prototype.g=function(){return new bm(this.l,this.j)},jf.prototype.i=function(n){return function(){return n}}({}),Yr(bm,Br);var $f=0;function GI(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Hf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Gf(n)}function Gf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ge=bm.prototype).open=function(n,e){if(this.readyState!=$f)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Gf(this)},Ge.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hf(this)),this.readyState=$f},Ge.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Gf(this)),this.g&&(this.readyState=3,Gf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;GI(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ge.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Hf(this):Gf(this),3==this.readyState&&GI(this)}},Ge.Ua=function(n){this.g&&(this.response=this.responseText=n,Hf(this))},Ge.Ta=function(n){this.g&&(this.response=n,Hf(this))},Ge.ha=function(){this.g&&Hf(this)},Ge.setRequestHeader=function(n,e){this.v.append(n,e)},Ge.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ge.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(bm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var qI=Rt.JSON.parse;function Nr(n){Br.call(this),this.headers=new Zd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ov,this.K=this.L=!1}Yr(Nr,Br);var Ov="",AP=/^https?$/i,sS=["POST","PUT"];function oS(n){return"content-type"==n.toLowerCase()}function xc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,eh(n),Lv(n)}function eh(n){n.D||(n.D=!0,Qr(n,"complete"),Qr(n,"error"))}function WI(n){if(n.h&&void 0!==Yg&&(!n.C[1]||4!=uu(n)||2!=n.ba()))if(n.v&&4==uu(n))_v(n.Fa,0,n);else if(Qr(n,"readystatechange"),4==uu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Dv)[1]||null;if(!i&&Rt.self&&Rt.self.location){var a=Rt.self.location.protocol;i=a.substr(0,a.length-1)}r=!AP.test(i?i.toLowerCase():"")}t=r}if(t)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var l=2<uu(n)?n.g.statusText:""}catch(g){l=""}n.j=l+" ["+n.ba()+"]",eh(n)}}finally{Lv(n)}}}function Lv(n,e){if(n.g){Fv(n);const t=n.g,r=n.C[0]?Qg:null;n.g=null,n.C=null,e||Qr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Fv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function uu(n){return n.g?n.g.readyState:0}function zI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ov:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Uv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function aS(n){let e="";return Tf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):qn(n,e,t))}function th(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Vv(n){this.za=0,this.l=[],this.h=new Mf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=th("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=th("baseRetryDelayMs",5e3,n),this.$a=th("retryDelaySeedMs",1e4,n),this.Ya=th("forwardChannelMaxRetries",2,n),this.ra=th("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new UI(n&&n.concurrentRequestLimit),this.Ca=new Mv,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Wf(n){if(nh(n),3==n.G){var e=n.V++,t=hs(n.F);qn(t,"SID",n.J),qn(t,"RID",e),qn(t,"TYPE","terminate"),Kf(n,t),(e=new zd(n,n.h,e,void 0)).K=2,e.v=Vf(hs(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=XI(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Kd(e)}uS(n)}function Rc(n){n.g&&(QI(n),n.g.cancel(),n.g=null)}function nh(n){Rc(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Dm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Bv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&zf(n)}function zf(n){Rv(n.i)||n.m||(n.m=!0,Rf(n.Ha,n),n.C=0)}function ZI(n,e){var t;t=e?e.m:n.V++;const r=hs(n.F);qn(r,"SID",n.J),qn(r,"RID",t),qn(r,"AID",n.U),Kf(n,r),n.o&&n.s&&Uv(r,n.o,n.s),t=new zd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=YI(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Cm(n.i,t),Cv(t,r,e)}function Kf(n,e){n.j&&bv({},function(t,r){qn(e,r,t)})}function YI(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Zr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let g=0;g<t;g++){let w=i[g].h;const D=i[g].g;if(w-=a,0>w)a=Math.max(0,i[g].h-100),h=!1;else try{kv(D,l,"req"+w+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Tm(n){n.g||n.u||(n.Y=1,Rf(n.Ga,n),n.A=0)}function jv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=hl(Zr(n.Ga,n),$v(n,n.A)),n.A++,0))}function QI(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function JI(n){n.g=new zd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=hs(n.oa);qn(e,"RID","rpc"),qn(e,"SID",n.J),qn(e,"CI",n.N?"0":"1"),qn(e,"AID",n.U),Kf(n,e),qn(e,"TYPE","xmlhttp"),n.o&&n.s&&Uv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Vf(hs(e)),t.s=null,t.U=!0,KD(t,n)}function Dm(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function Pc(n,e){var t=null;if(n.g==e){Dm(n),QI(n),n.g=null;var r=2}else{if(!Pv(n.i,e))return;t=e.D,jI(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Qr(r=mm(),new PI(r,t,e,i)),zf(n)}else Tm(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function KI(n,e){return!(BI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=hl(Zr(n.Ha,n,e),$v(n,n.C)),n.C++,0)))}(n,e)||2==r&&jv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:io(n,5);break;case 4:io(n,10);break;case 3:io(n,6);break;default:io(n,2)}}function $v(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function io(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Zr(n.jb,n);t||(t=new Ac("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Em(t,"https"),Vf(t)),function HI(n,e){const t=new Mf;if(Rt.Image){const r=new Image;r.onload=em(Xd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=em(Xd,t,r,"TestLoadImage: error",!1,e),r.onabort=em(Xd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=em(Xd,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Wi(2);n.G=0,n.j&&n.j.va(e),uS(n),nh(n)}function uS(n){n.G=0,n.I=-1,n.j&&((0!=$I(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Ps(n.l),n.l.length=0),n.j.ua())}function Hv(n,e,t){let r=function XD(n){return n instanceof Ac?hs(n):new Ac(n,void 0)}(t);if(""!=r.i)e&&Uf(r,e+"."+r.i),Im(r,r.m);else{const i=Rt.location;r=function Av(n,e,t,r){var i=new Ac(null,void 0);return n&&Em(i,n),e&&Uf(i,e),t&&Im(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Tf(n.aa,function(i,a){qn(r,a,i)}),t=n.sa,(e=n.D)&&t&&qn(r,e,t),qn(r,"VER",n.ma),Kf(n,r),r}function XI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nr(t&&n.Ba&&!n.qa?new jf({ib:!0}):n.qa)).L=n.H,e}function lS(){}function Zf(){if(su&&!(10<=Number(OD)))throw Error("Environmental error: no available transport.")}function so(n,e){Br.call(this),this.g=new Vv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ds(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ds(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new rh(this)}function Gv(n){vv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Sm(){wv.call(this),this.status=1}function rh(n){this.g=n}(Ge=Nr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ev.g(),this.C=function NI(n){return n.h||(n.h=n.i())}(this.u?this.u:Ev),this.g.onreadystatechange=Zr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void xc(this,a)}n=t||"";const i=new Zd(this.headers);r&&bv(r,function(a,l){i.set(l,a)}),r=function kD(n){e:{var e=oS;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=xo(sS,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fv(this),0<this.B&&((this.K=function qf(n){return su&&function yI(){return function pI(n){var e=_I;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=rv(String(Df)).split("."),t=rv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=iv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||iv(0==i[2].length,0==a[2].length)||iv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zr(this.pa,this)):this.A=_v(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){xc(this,a)}},Ge.pa=function(){void 0!==Yg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},Ge.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),Lv(this))},Ge.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lv(this,!0)),Nr.Z.M.call(this)},Ge.Fa=function(){this.s||(this.F||this.v||this.l?WI(this):this.cb())},Ge.cb=function(){WI(this)},Ge.ba=function(){try{return 2<uu(this)?this.g.status:-1}catch(n){return-1}},Ge.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ge.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),qI(e)}},Ge.Da=function(){return this.m},Ge.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ge=Vv.prototype).ma=8,Ge.G=1,Ge.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ge.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new zd(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Gd(a),sv(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=YI(this,i,e),qn(t=hs(this.F),"RID",n),qn(t,"CVER",22),this.D&&qn(t,"X-HTTP-Session-Id",this.D),Kf(this,t),this.o&&a&&Uv(t,this.o,a),Cm(this.i,i),this.Ra&&qn(t,"TYPE","init"),this.ja?(qn(t,"$req",e),qn(t,"SID","null"),i.$=!0,Cv(i,t,null)):Cv(i,t,e),this.G=2}}else 3==this.G&&(n?ZI(this,n):0==this.l.length||Rv(this.i)||ZI(this))},Ge.Ga=function(){if(this.u=null,JI(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=hl(Zr(this.bb,this),n)}},Ge.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Wi(10),Rc(this),JI(this))},Ge.ab=function(){null!=this.v&&(this.v=null,Rc(this),jv(this),Wi(19))},Ge.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Wi(2)):(this.h.info("Failed to ping google.com"),Wi(1))},(Ge=lS.prototype).xa=function(){},Ge.wa=function(){},Ge.va=function(){},Ge.ua=function(){},Ge.Oa=function(){},Zf.prototype.g=function(n,e){return new so(n,e)},Yr(so,Br),so.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Rf(Zr(n.hb,n,e))),Wi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Hv(n,null,n.W),zf(n)},so.prototype.close=function(){Wf(this.g)},so.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Bv(this.g,e)}else this.v?((e={}).__data__=fm(n),Bv(this.g,e)):Bv(this.g,n)},so.prototype.M=function(){this.g.j=null,delete this.j,Wf(this.g),delete this.g,so.Z.M.call(this)},Yr(Gv,vv),Yr(Sm,wv),Yr(rh,lS),rh.prototype.xa=function(){Qr(this.g,"a")},rh.prototype.wa=function(n){Qr(this.g,new Gv(n))},rh.prototype.va=function(n){Qr(this.g,new Sm(n))},rh.prototype.ua=function(){Qr(this.g,"b")},Zf.prototype.createWebChannel=Zf.prototype.g,so.prototype.send=so.prototype.u,so.prototype.open=so.prototype.m,so.prototype.close=so.prototype.close,kf.NO_ERROR=0,kf.TIMEOUT=8,kf.HTTP_ERROR=6,yv.COMPLETE="complete",Wd.EventType=au,au.OPEN="a",au.CLOSE="b",au.ERROR="c",au.MESSAGE="d",Br.prototype.listen=Br.prototype.N,Nr.prototype.listenOnce=Nr.prototype.O,Nr.prototype.getLastError=Nr.prototype.La,Nr.prototype.getLastErrorCode=Nr.prototype.Da,Nr.prototype.getStatus=Nr.prototype.ba,Nr.prototype.getResponseJson=Nr.prototype.Qa,Nr.prototype.getResponseText=Nr.prototype.ga,Nr.prototype.send=Nr.prototype.ea;var cS=iu.createWebChannelTransport=function(){return new Zf},dS=iu.getStatEventTarget=function(){return mm()},qv=iu.ErrorCode=kf,hS=iu.EventType=yv,fS=iu.Event=dl,eC=iu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pS=iu.FetchXmlHttpFactory=jf,Am=iu.WebChannel=Wd,gS=iu.XhrIo=Nr;const ih="@firebase/firestore";class Jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");let Nc="9.6.7";const lu=new Rs.Yd("@firebase/firestore");function xm(){return lu.logLevel}function Be(n,...e){if(lu.logLevel<=Rs.in.DEBUG){const t=e.map(Wv);lu.debug(`Firestore (${Nc}): ${n}`,...t)}}function Mr(n,...e){if(lu.logLevel<=Rs.in.ERROR){const t=e.map(Wv);lu.error(`Firestore (${Nc}): ${n}`,...t)}}function Yf(n,...e){if(lu.logLevel<=Rs.in.WARN){const t=e.map(Wv);lu.warn(`Firestore (${Nc}): ${n}`,...t)}}function Wv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${Nc}) INTERNAL ASSERTION FAILED: `+n;throw Mr(e),new Error(e)}function Dt(n,e){n||lt()}function We(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jr.UNAUTHENTICATED))}shutdown(){}}class Qf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _S{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Sn,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,we.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},g=w=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>g(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?g(w):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Sn)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new nC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Jr(e)}}class yS{constructor(e,t,r){this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class vS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new yS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rm{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new Jf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ns{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function rC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ns.A=-1;class Kv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=rC(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function Mc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iC(n){return n+"\0"}class Xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xr.fromMillis(Date.now())}static fromDate(e){return Xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Xr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Pm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Zv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class kc{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===kc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends kc{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const wS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ei extends kc{construct(e,t,r){return new ei(e,t,r)}static isValidIdentifier(e){return wS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ei.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ei(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Me(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Me(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Me(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ei(t)}static emptyPath(){return new ei([])}}class sh{constructor(e){this.fields=e,e.sort(ei.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new kr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const Yv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function du(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=Yv.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pr(n.seconds),nanos:pr(n.nanos)}}function pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function gl(n){return"string"==typeof n?kr.fromBase64String(n):kr.fromUint8Array(n)}function Nm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sC(n){const e=n.mapValue.fields.__previous_value__;return Nm(e)?sC(e):e}function oh(n){const e=du(n.mapValue.fields.__local_write_time__.timestampValue);return new Xr(e.seconds,e.nanos)}class oC{constructor(e,t,r,i,a,l,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class Oc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oc&&e.projectId===this.projectId&&e.database===this.database}}function ml(n){return null==n}function Xf(n){return 0===n&&1/n==-1/0}function Ai(n){return"number"==typeof n&&Number.isInteger(n)&&!Xf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(tn.fromString(e))}static fromName(e){return new Xe(tn.fromString(e).popFirst(5))}static empty(){return new Xe(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new tn(e.slice()))}}const IS={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function Lc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nm(n)?4:10:lt()}function ca(n,e){if(n===e)return!0;const t=Lc(n);if(t!==Lc(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return oh(n).isEqual(oh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=du(r.timestampValue),l=du(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,gl(n.bytesValue).isEqual(gl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return pr(r.geoPointValue.latitude)===pr(i.geoPointValue.latitude)&&pr(r.geoPointValue.longitude)===pr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return pr(r.integerValue)===pr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=pr(r.doubleValue),l=pr(i.doubleValue);return a===l?Xf(a)===Xf(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Mc(n.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Pm(a)!==Pm(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!ca(a[h],l[h])))return!1;return!0}(n,e);default:return lt()}var i}function hu(n,e){return void 0!==(n.values||[]).find(t=>ca(t,e))}function ah(n,e){if(n===e)return 0;const t=Lc(n),r=Lc(e);if(t!==r)return $t(t,r);switch(t){case 0:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=pr(i.integerValue||i.doubleValue),h=pr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return Mm(n.timestampValue,e.timestampValue);case 4:return Mm(oh(n),oh(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(i,a){const l=gl(i),h=gl(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let g=0;g<l.length&&g<h.length;g++){const w=$t(l[g],h[g]);if(0!==w)return w}return $t(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=$t(pr(i.latitude),pr(a.latitude));return 0!==l?l:$t(pr(i.longitude),pr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let g=0;g<l.length&&g<h.length;++g){const w=ah(l[g],h[g]);if(w)return w}return $t(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const l=i.fields||{},h=Object.keys(l),g=a.fields||{},w=Object.keys(g);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=$t(h[D],w[D]);if(0!==S)return S;const M=ah(l[h[D]],g[w[D]]);if(0!==M)return M}return $t(h.length,w.length)}(n.mapValue,e.mapValue);default:throw lt()}}function Mm(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=du(n),r=du(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function uh(n){return km(n)}function km(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=du(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?gl(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=km(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${km(r.fields[h])}`;return a+"}"}(n.mapValue):lt();var e}function Om(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qv(n){return!!n&&"integerValue"in n}function lh(n){return!!n&&"arrayValue"in n}function Jv(n){return!!n&&"nullValue"in n}function Xv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Fc(n){return!!n&&"mapValue"in n}function Uc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Uc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uc(n.arrayValue.values[t]);return e}return Object.assign({},n)}class zi{constructor(e){this.value=e}static empty(){return new zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Fc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uc(t)}setAll(e){let t=ei.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Uc(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Fc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Fc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){cu(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new zi(Uc(this.value))}}function ew(n){const e=[];return cu(n.fields,(t,r)=>{const i=new ei([t]);if(Fc(r)){const a=ew(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new sh(e)}class sr{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new sr(e,0,It.min(),It.min(),zi.empty(),0)}static newFoundDocument(e,t,r){return new sr(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new sr(e,2,t,It.min(),zi.empty(),0)}static newUnknownDocument(e,t){return new sr(e,3,t,It.min(),zi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let Lm=(()=>{class n{constructor(t,r,i,a){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=a}}return n.UNKNOWN_ID=-1,n})();class Vc{constructor(e,t){this.fieldPath=e,this.kind=t}}class ch{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ch(0,Fm.min())}}class Fm{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fm(It.min(),Xe.empty(),-1)}}class tw{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.P=null}}function Um(n,e=null,t=[],r=[],i=null,a=null,l=null){return new tw(n,e,t,r,i,a,l)}function Vm(n){const e=We(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+uh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ml(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uh(r)).join(",")),e.P=t}return e.P}function Bm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!hC(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ca(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pC(n.startAt,e.startAt)&&pC(n.endAt,e.endAt)}function ep(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class xi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new bS(e,t,r):"array-contains"===t?new TS(e,r):"in"===t?new cC(e,r):"not-in"===t?new DS(e,r):"array-contains-any"===t?new dC(e,r):new xi(e,t,r)}static v(e,t,r){return"in"===t?new aC(e,r):new uC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(ah(t,this.value)):null!==t&&Lc(this.value)===Lc(t)&&this.V(ah(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class bS extends xi{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.V(t)}}class aC extends xi{constructor(e,t){super(e,"in",t),this.keys=lC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class uC extends xi{constructor(e,t){super(e,"not-in",t),this.keys=lC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class TS extends xi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lh(t)&&hu(t.arrayValue,this.value)}}class cC extends xi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hu(this.value.arrayValue,t)}}class DS extends xi{constructor(e,t){super(e,"not-in",t)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hu(this.value.arrayValue,t)}}class dC extends xi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hu(this.value.arrayValue,r))}}class Bc{constructor(e,t){this.position=e,this.inclusive=t}}class jc{constructor(e,t="asc"){this.field=e,this.dir=t}}function hC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function fC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):ah(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function pC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ca(n.position[t],e.position[t]))return!1;return!0}class _l{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=g,this.D=null,this.C=null}}function nw(n,e,t,r,i,a,l,h){return new _l(n,e,t,r,i,a,l,h)}function tp(n){return new _l(n)}function rw(n){return!ml(n.limit)&&"F"===n.limitType}function iw(n){return!ml(n.limit)&&"L"===n.limitType}function gC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function mC(n){for(const e of n.filters)if(e.S())return e.field;return null}function _C(n){return null!==n.collectionGroup}function np(n){const e=We(n);if(null===e.D){e.D=[];const t=mC(e),r=gC(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new jc(t)),e.D.push(new jc(ei.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new jc(ei.keyField(),a))}}}return e.D}function Po(n){const e=We(n);if(!e.C)if("F"===e.limitType)e.C=Um(e.path,e.collectionGroup,np(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of np(e))t.push(new jc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Bc(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Bc(e.startAt.position,!e.startAt.inclusive):null;e.C=Um(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function rp(n,e,t){return new _l(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jm(n,e){return Bm(Po(n),Po(e))&&n.limitType===e.limitType}function $m(n){return`${Vm(Po(n))}|lt:${n.limitType}`}function yl(n){return`Query(target=${function CS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${uh(r.value)}`;var r}).join(", ")}]`),ml(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>uh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>uh(t)).join(",")),`Target(${e})`}(Po(n))}; limitType=${n.limitType})`}function Hm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=fC(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,np(t),r)||t.endAt&&!function(i,a,l){const h=fC(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,np(t),r)));var t,r}function yC(n){return(e,t)=>{let r=!1;for(const i of np(n)){const a=SS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function SS(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),g=l.data.field(i);return null!==h&&null!==g?ah(h,g):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function Gm(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xf(e)?"-0":e}}function sw(n){return{integerValue:""+n}}function ow(n,e){return Ai(e)?sw(e):Gm(n,e)}class ip{constructor(){this._=void 0}}function RP(n,e,t){return n instanceof $c?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof dh?AS(n,e):n instanceof hh?wC(n,e):function(r,i){const a=sp(r,i),l=EC(a)+EC(r.k);return Qv(a)&&Qv(r.k)?sw(l):Gm(r.O,l)}(n,e)}function vC(n,e,t){return n instanceof dh?AS(n,e):n instanceof hh?wC(n,e):t}function sp(n,e){return n instanceof vl?Qv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $c extends ip{}class dh extends ip{constructor(e){super(),this.elements=e}}function AS(n,e){const t=xS(e);for(const r of n.elements)t.some(i=>ca(i,r))||t.push(r);return{arrayValue:{values:t}}}class hh extends ip{constructor(e){super(),this.elements=e}}function wC(n,e){let t=xS(e);for(const r of n.elements)t=t.filter(i=>!ca(i,r));return{arrayValue:{values:t}}}class vl extends ip{constructor(e,t){super(),this.O=e,this.k=t}}function EC(n){return pr(n.integerValue||n.doubleValue)}function xS(n){return lh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class op{constructor(e,t){this.field=e,this.transform=t}}class RS{constructor(e,t){this.version=e,this.transformResults=t}}class ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fh{}function PS(n,e,t){n instanceof ap?function(r,i,a){const l=r.value.clone(),h=IC(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof wl?function(r,i,a){if(!qm(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=IC(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(hw(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uw(n,e,t){var i;n instanceof ap?function(r,i,a){if(!qm(r.precondition,i))return;const l=r.value.clone(),h=CC(r.fieldTransforms,a,i);l.setAll(h),i.convertToFoundDocument(dw(i),l).setHasLocalMutations()}(n,e,t):n instanceof wl?function(r,i,a){if(!qm(r.precondition,i))return;const l=CC(r.fieldTransforms,a,i),h=i.data;h.setAll(hw(r)),h.setAll(l),i.convertToFoundDocument(dw(i),h).setHasLocalMutations()}(n,e,t):qm(n.precondition,i=e)&&i.convertToNoDocument(It.min())}function lw(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=sp(r.transform,i||null);null!=a&&(null==t&&(t=zi.empty()),t.set(r.field,a))}return t||null}function cw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Mc(t,r,(i,a)=>function aw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof dh&&r instanceof dh||t instanceof hh&&r instanceof hh?Mc(t.elements,r.elements,ca):t instanceof vl&&r instanceof vl?ca(t.k,r.k):t instanceof $c&&r instanceof $c);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function dw(n){return n.isFoundDocument()?n.version:It.min()}class ap extends fh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class wl extends fh{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function hw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function IC(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,vC(l,h,t[i]))}return r}function CC(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,RP(a,l,e))}return r}class Hc extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Ms extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class NS{constructor(e){this.count=e}}var jr,nn;function fw(n){switch(n){default:return lt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function bC(n){if(void 0===n)return Mr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case jr.OK:return ge.OK;case jr.CANCELLED:return ge.CANCELLED;case jr.UNKNOWN:return ge.UNKNOWN;case jr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case jr.INTERNAL:return ge.INTERNAL;case jr.UNAVAILABLE:return ge.UNAVAILABLE;case jr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case jr.NOT_FOUND:return ge.NOT_FOUND;case jr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case jr.ABORTED:return ge.ABORTED;case jr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case jr.DATA_LOSS:return ge.DATA_LOSS;default:return lt()}}(nn=jr||(jr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class Cr{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new Cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new up(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new up(this.root,e,this.comparator,!1)}getReverseIterator(){return new up(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new up(this.root,e,this.comparator,!0)}}class up{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:pi.RED,this.left=null!=i?i:pi.EMPTY,this.right=null!=a?a:pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new pi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return pi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1,pi.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new pi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class or{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pw(this.data.getIterator())}getIteratorFrom(e){return new pw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new or(this.comparator);return t.data=e,t}}class pw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gc(n){return n.hasNext()?n.getNext():void 0}const MS=new Cr(Xe.comparator);function oo(){return MS}const TC=new Cr(Xe.comparator);function qc(){return TC}const gw=new Cr(Xe.comparator),DC=new or(Xe.comparator);function _n(...n){let e=DC;for(const t of n)e=e.add(t);return e}const SC=new or($t);function lp(){return SC}class cp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,dp.createSynthesizedTargetChangeForCurrentChange(e,t)),new cp(It.min(),r,lp(),oo(),_n())}}class dp{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new dp(kr.EMPTY_BYTE_STRING,t,_n(),_n(),_n())}}class mw{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class kS{constructor(e,t){this.targetId=e,this.F=t}}class _w{constructor(e,t,r=kr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class AC{constructor(){this.B=0,this.L=LS(),this.U=kr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=_n(),t=_n(),r=_n();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new dp(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=LS()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class OS{constructor(e){this.nt=e,this.st=new Map,this.it=oo(),this.rt=xC(),this.ot=new or($t)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const a=i.target;if(ep(a))if(0===r){const l=new Xe(a.path);this.at(t,l,sr.newNoDocument(l,It.min()))}else Dt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const h=this.wt(l);if(h){if(a.current&&ep(h.target)){const g=new Xe(h.target.path);null!==this.it.get(g)||this.It(l,g)||this.at(l,g,sr.newNoDocument(g,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=_n();this.rt.forEach((a,l)=>{let h=!0;l.forEachWhile(g=>{const w=this.wt(g);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new cp(e,t,this.ot,this.it,r);return this.it=oo(),this.rt=xC(),this.ot=new or($t),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new AC,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new or($t),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new AC),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function xC(){return new Cr(Xe.comparator)}function LS(){return new Cr(Xe.comparator)}const PP={asc:"ASCENDING",desc:"DESCENDING"},NP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class MP{constructor(e,t){this.databaseId=e,this.N=t}}function Wm(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RC(n,e){return n.N?e.toBase64():e.toUint8Array()}function zm(n,e){return Wm(n,e.toTimestamp())}function ti(n){return Dt(!!n),It.fromTimestamp(function(e){const t=du(e);return new Xr(t.seconds,t.nanos)}(n))}function yw(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vw(n){const e=tn.fromString(n);return Dt(Ew(e)),e}function No(n,e){return yw(n.databaseId,e.path)}function Mo(n,e){const t=vw(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(Zm(t))}function hp(n,e){return yw(n.databaseId,e)}function Km(n){const e=vw(n);return 4===e.length?tn.emptyPath():Zm(e)}function fp(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Zm(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ym(n,e,t){return{name:No(n,e),fields:t.value.mapValue.fields}}function pp(n,e,t){const r=Mo(n,e.name),i=ti(e.updateTime),a=new zi({mapValue:{fields:e.fields}}),l=sr.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Qm(n,e){let t;if(e instanceof ap)t={update:Ym(n,e.key,e.value)};else if(e instanceof Hc)t={delete:No(n,e.key)};else if(e instanceof wl)t={update:Ym(n,e.key,e.data),updateMask:LP(e.fieldMask)};else{if(!(e instanceof Ms))return lt();t={verify:No(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof $c)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof dh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof hh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vl)return{fieldPath:a.field.canonicalString(),increment:l.k};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:zm(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function PC(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ln.updateTime(ti(i.updateTime)):void 0!==i.exists?ln.exists(i.exists):ln.none():ln.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Dt("REQUEST_TIME"===l.setToServerValue),h=new $c):"appendMissingElements"in l?h=new dh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new hh(l.removeAllFromArray.values||[]):"increment"in l?h=new vl(a,l.increment):lt();const g=ei.fromServerFormat(l.fieldPath);return new op(g,h)}(n,i)):[];var i;if(e.update){const i=Mo(n,e.update.name),a=new zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new sh((e.updateMask.fieldPaths||[]).map(w=>ei.fromServerFormat(w)));return new wl(i,a,l,t,r)}return new ap(i,a,t,r)}if(e.delete){const i=Mo(n,e.delete);return new Hc(i,t)}if(e.verify){const i=Mo(n,e.verify);return new Ms(i,t)}return lt()}function MC(n,e){return{documents:[hp(n,e.path)]}}function kC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=hp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=hp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const w=g.map(D=>function(S){if("=="===S.op){if(Xv(S.value))return{unaryFilter:{field:ph(S.field),op:"IS_NAN"}};if(Jv(S.value))return{unaryFilter:{field:ph(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(Xv(S.value))return{unaryFilter:{field:ph(S.field),op:"IS_NOT_NAN"}};if(Jv(S.value))return{unaryFilter:{field:ph(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ph(S.field),op:FC(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(w=>{return{field:ph((D=w).field),direction:LC(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.N||ml(w)?w:{value:w});var w,h,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function OC(n){let e=Km(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=ww(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new jc(gh((S=D).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,ml(S)?null:S}(t.limit));let g=null;var D;t.startAt&&(g=new Bc((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Bc(D.values||[],!D.before)}(t.endAt)),nw(e,i,l,a,h,"F",g,w)}function ww(n){return n?void 0!==n.unaryFilter?[Jm(n)]:void 0!==n.fieldFilter?[UC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ww(e)).reduce((e,t)=>e.concat(t)):lt():[]}function LC(n){return PP[n]}function FC(n){return NP[n]}function ph(n){return{fieldPath:n.canonicalString()}}function gh(n){return ei.fromServerFormat(n.fieldPath)}function UC(n){return xi.create(gh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Jm(n){switch(n.unaryFilter.op){case"IS_NAN":const e=gh(n.unaryFilter.field);return xi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=gh(n.unaryFilter.field);return xi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gh(n.unaryFilter.field);return xi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=gh(n.unaryFilter.field);return xi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function LP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ew(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function br(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VC(e)),e=US(n.get(t),e);return VC(e)}function US(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function VC(n){return n+"\x01\x01"}function da(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&lt(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:lt()}a=l+2}return new tn(r)}class VS{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ao{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}ao.store="owner",ao.key="owner";class El{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}El.store="mutationQueues",El.keyPath="userId";class On{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}On.store="mutations",On.keyPath="batchId",On.userMutationsIndex="userMutationsIndex",On.userMutationsKeyPath=["userId","batchId"];class Ri{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,br(t)]}static key(e,t,r){return[e,br(t),r]}}Ri.store="documentMutations",Ri.PLACEHOLDER=new Ri;class BS{constructor(e,t){this.path=e,this.readTime=t}}class jS{constructor(e,t){this.path=e,this.version=t}}class gr{constructor(e,t,r,i,a,l){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=l}}gr.store="remoteDocuments",gr.readTimeIndex="readTimeIndex",gr.readTimeIndexPath="readTime",gr.collectionReadTimeIndex="collectionReadTimeIndex",gr.collectionReadTimeIndexPath=["parentPath","readTime"];class ha{constructor(e){this.byteSize=e}}ha.store="remoteDocumentGlobal",ha.key="remoteDocumentGlobalKey";class fs{constructor(e,t,r,i,a,l,h){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=l,this.query=h}}fs.store="targets",fs.keyPath="targetId",fs.queryTargetsIndexName="queryTargetsIndex",fs.queryTargetsKeyPath=["canonicalId","targetId"];class Pi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Pi.store="targetDocuments",Pi.keyPath=["targetId","path"],Pi.documentTargetsIndex="documentTargetsIndex",Pi.documentTargetsKeyPath=["path","targetId"];class uo{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}uo.key="targetGlobalKey",uo.store="targetGlobal";class mh{constructor(e,t){this.collectionId=e,this.parent=t}}mh.store="collectionParents",mh.keyPath=["collectionId","parent"];class Il{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Il.store="clientMetadata",Il.keyPath="clientId";class gp{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}gp.store="bundles",gp.keyPath="bundleId";class _h{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}_h.store="namedQueries",_h.keyPath="name";class lo{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}lo.store="indexConfiguration",lo.keyPath="indexId",lo.collectionGroupIndex="collectionGroupIndex",lo.collectionGroupIndexPath="collectionGroup";class ko{constructor(e,t,r,i,a,l){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=l}}ko.store="indexState",ko.keyPath=["indexId","uid"],ko.sequenceNumberIndex="sequenceNumberIndex",ko.sequenceNumberIndexPath=["uid","sequenceNumber"];class Oo{constructor(e,t,r,i,a){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}}Oo.store="indexEntries",Oo.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Oo.documentKeyIndex="documentKeyIndex",Oo.documentKeyIndexPath=["indexId","uid","documentKey"];class gi{constructor(e,t,r,i,a,l){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=l}}gi.store="documentOverlays",gi.keyPath=["userId","collectionPath","documentId"],gi.collectionPathOverlayIndex="collectionPathOverlayIndex",gi.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],gi.collectionGroupOverlayIndex="collectionGroupOverlayIndex",gi.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const s=[El.store,On.store,Ri.store,gr.store,fs.store,ao.store,uo.store,Pi.store,Il.store,ha.store,mh.store,gp.store,_h.store],o=[...s,gi.store],u=[...o,lo.store,ko.store,Oo.store],c="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class f{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new f((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof f?t:f.resolve(t)}catch(t){return f.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):f.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):f.reject(t)}static resolve(e){return new f((t,r)=>{t(e)})}static reject(e){return new f((t,r)=>{r(e)})}static waitFor(e){return new f((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=f.resolve(!1);for(const r of e)t=t.next(i=>i?f.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class y{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Sn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new A(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Ee(r.target.error);this.At.reject(new A(e,i))}}static open(e,t,r,i){try{return new y(t,e.transaction(i,r))}catch(a){throw new A(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new F(t)}}class E{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===E.vt((0,k.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),H(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,k.hl)())return!1;if(E.St())return!0;const e=(0,k.z$)(),t=E.vt(e),r=0<t&&t<10,i=E.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,we.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new A(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Me(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Me(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new A(e,h))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.bt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,we.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.xt(e);const g=y.open(a.db,e,l?"readonly":"readwrite",r),w=i(g).next(D=>(g.Pt(),D)).catch(D=>(g.abort(D),f.reject(D))).toPromise();return w.catch(()=>{}),yield g.Rt,w}catch(g){const w="FirebaseError"!==g.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",g.message,"Retrying:",w),a.close(),!w)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class C{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return H(this.$t.delete())}}class A extends Me{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function x(n){return"IndexedDbTransactionError"===n.name}class F{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),H(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),H(this.store.add(e))}get(e){return H(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),H(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),H(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new f((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,h)=>h.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new f((r,i)=>{t.onerror=a=>{const l=Ee(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new f((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const g=new C(h),w=t(h.primaryKey,h.value,g);if(w instanceof f){const D=w.catch(S=>(g.done(),f.reject(S)));r.push(D)}g.isDone?i():null===g.Lt?h.continue():h.continue(g.Lt)}}).next(()=>f.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function H(n){return new f((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Ee(r.target.error);t(i)}})}let ee=!1;function Ee(n){const e=E.vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ee||(ee=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ve extends d{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Ue(n,e){const t=We(n);return E.Nt(t.zt,e)}class tt{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&PS(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&uw(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&uw(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_n())}isEqual(e){return this.batchId===e.batchId&&Mc(this.mutations,e.mutations,(t,r)=>cw(t,r))&&Mc(this.baseMutations,e.baseMutations,(t,r)=>cw(t,r))}}class Ae{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=gw;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Ae(e,t,r,i)}}class pt{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Pt{constructor(e,t,r,i,a=It.min(),l=It.min(),h=kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Pt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Pt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Pt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class fn{constructor(e){this.Ht=e}}function ps(n,e){let t;if(e.document)t=pp(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=pu(e.noDocument.readTime);t=sr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Xe.fromSegments(e.unknownDocument.path),i=pu(e.unknownDocument.version);t=sr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(_p(e.readTime)),t}function Cl(n,e){const t=mp(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:No(l=n.Ht,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:Wm(l,h.version.toTimestamp())};return new gr(null,null,i,e.hasCommittedMutations,t,r)}var l,h;if(e.isNoDocument()){const i=e.key.path.toArray(),a=fu(e.version),l=e.hasCommittedMutations;return new gr(null,new BS(i,a),null,l,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),a=fu(e.version);return new gr(new jS(i,a),null,null,!0,t,r)}return lt()}function mp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _p(n){const e=new Xr(n[0],n[1]);return It.fromTimestamp(e)}function fu(n){const e=n.toTimestamp();return new VS(e.seconds,e.nanoseconds)}function pu(n){const e=new Xr(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function bl(n,e){const t=(e.baseMutations||[]).map(a=>PC(n.Ht,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>PC(n.Ht,a)),i=Xr.fromMillis(e.localWriteTimeMs);return new tt(e.batchId,i,t,r)}function Wc(n){const e=pu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pu(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=Po(tp(Km(i.documents[0])))):r=Po(OC(n.query)),new Pt(r,n.targetId,0,n.lastListenSequenceNumber,e,t,kr.fromBase64String(n.resumeToken))}function Xm(n,e){const t=fu(e.snapshotVersion),r=fu(e.lastLimboFreeSnapshotVersion);let i;i=ep(e.target)?MC(n.Ht,e.target):kC(n.Ht,e.target);const a=e.resumeToken.toBase64();return new fs(e.targetId,Vm(e.target),t,a,e.sequenceNumber,r,i)}function yp(n){const e=OC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?rp(e,e.limit,"L"):e}function vp(n,e){return new pt(e.largestBatchId,PC(n.Ht,e.overlayMutation))}function FP(n,e){const t=e.path.lastSegment();return[n,br(e.path.popLast()),t]}class XO{getBundleMetadata(e,t){return UP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return UP(e).put({bundleId:(r=t).id,createTime:fu(ti(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return VP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:yp(i.bundledQuery),readTime:pu(i.readTime)};var i})}saveNamedQuery(e,t){return VP(e).put({name:(r=t).name,readTime:fu(ti(r.readTime)),bundledQuery:r.bundledQuery});var r}}function UP(n){return Ue(n,gp.store)}function VP(n){return Ue(n,_h.store)}class $S{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new $S(e,t.uid||"")}getOverlay(e,t){return Iw(e).get(FP(this.userId,t)).next(r=>r?vp(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(a=>{const l=new pt(t,a);i.push(this.Yt(e,l))}),f.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(br(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Iw(e).Gt(gi.collectionPathOverlayIndex,h))}),f.waitFor(a)}getOverlaysForCollection(e,t,r){const i=new Map,a=br(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Iw(e).qt(gi.collectionPathOverlayIndex,l).next(h=>{for(const g of h){const w=vp(this.O,g);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=new Map;let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Iw(e).Qt({index:gi.collectionGroupOverlayIndex,range:h},(g,w,D)=>{const S=vp(this.O,w);a.size<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}Yt(e,t){return Iw(e).put(function(r,i,a){const[l,h,g]=FP(i,a.mutation.key);return new gi(i,h,g,a.mutation.key.getCollectionGroup(),a.largestBatchId,Qm(r.Ht,a.mutation))}(this.O,this.userId,t))}}function Iw(n){return Ue(n,gi.store)}class BC{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(pr(e.integerValue));else if("doubleValue"in e){const r=pr(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),Xf(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(gl(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?ca(e,IS)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):lt()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),Xe.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function e1(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function BP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=e1(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}BC.le=new BC;class t1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=BP(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=BP(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class n1{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class r1{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class jP{constructor(){this.Se=new t1,this.De=new n1(this.Se),this.Ce=new r1(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class HS{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function GS(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:(t=$P(n.arrayValue,e.arrayValue),0!==t?t:$P(n.directionalValue,e.directionalValue)))}function $P(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class i1{constructor(){this.xe=new qS}addToCollectionParentIndex(e,t){return this.xe.add(t),f.resolve()}getCollectionParents(e,t){return f.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return f.resolve()}deleteFieldIndex(e,t){return f.resolve()}getDocumentsMatchingTarget(e,t,r){return f.resolve(_n())}getFieldIndex(e,t){return f.resolve(null)}getFieldIndexes(e,t){return f.resolve([])}getNextCollectionGroupToUpdate(e){return f.resolve(null)}updateCollectionGroup(e,t,r){return f.resolve()}updateIndexEntries(e,t){return f.resolve()}}class qS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new or(tn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new or(tn.comparator)).toArray()}}class s1{constructor(e){this.user=e,this.ke=new qS,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const a={collectionId:r,parent:br(i)};return HP(e).put(a)}return f.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[iC(t),""],!1,!0);return HP(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(da(l.parent))}return r})}addFieldIndex(e,t){const r=$C(e),i=new lo((a=t).indexId,a.collectionGroup,a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind]));var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=$C(e),i=HC(e),a=jC(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return f.resolve(_n())}getFieldIndex(e,t){return f.resolve(null)}Oe(e,t){const r=new jP;for(const i of e.fields.filter(l=>2!==l.kind)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);BC.le.Xt(a,l)}return r.Ve()}Me(e){const t=new jP;return BC.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=$C(e),i=HC(e);return(t?r.qt(lo.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return f.forEach(a,h=>i.get([h.indexId,this.uid]).next(g=>{l.push(function(w,D){const S=D?new ch(D.sequenceNumber,new Fm(pu(D.readTime),new Xe(da(D.documentKey)),D.largestBatchId)):ch.empty(),M=w.fields.map(([V,Z])=>new Vc(ei.fromServerFormat(V),Z));return new Lm(w.indexId,w.collectionGroup,M,S)}(h,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=$C(e),a=HC(e);return this.$e(e).next(l=>i.qt(lo.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(h=>f.forEach(h,g=>{return a.put(new ko(g.indexId,this.user.uid||"",l,fu((M=r).readTime),br(M.documentKey.path),M.largestBatchId));var M})))}updateIndexEntries(e,t){const r=new Map;return f.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?f.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),f.forEach(h,g=>this.Fe(e,i,g).next(w=>{const D=this.Be(a,g);return w.isEqual(D)?f.resolve():this.Le(e,a,w,D)}))))})}Ue(e,t,r){return jC(e).put(new Oo(r.indexId,this.uid,r.arrayValue,r.directionalValue,br(t.key.path)))}qe(e,t,r){return jC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,br(t.key.path)])}Fe(e,t,r){const i=jC(e);let a=new or(GS);return i.Qt({index:Oo.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,br(t.path)])},(l,h)=>{a=a.add(new HS(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}Be(e,t){let r=new or(GS);const i=this.Oe(t,e);if(null==i)return r;const a=t.fields.find(h=>2===h.kind);if(null!=a){const l=e.data.field(a.fieldPath);if(lh(l))for(const h of l.arrayValue.values||[])r=r.add(new HS(t.indexId,e.key,this.Me(h),i))}else r=r.add(new HS(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(l,h,g,w,D){const S=l.getIterator(),M=h.getIterator();let V=Gc(S),Z=Gc(M);for(;V||Z;){let Ce=!1,ke=!1;if(V&&Z){const gt=g(V,Z);gt<0?ke=!0:gt>0&&(Ce=!0)}else null!=V?ke=!0:Ce=!0;Ce?(w(Z),Z=Gc(M)):ke?(D(V),V=Gc(S)):(V=Gc(S),Z=Gc(M))}}(r,i,GS,l=>{a.push(this.Ue(e,t,l))},l=>{a.push(this.qe(e,t,l))}),f.waitFor(a)}$e(e){let t=1;return HC(e).Qt({index:ko.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}}function HP(n){return Ue(n,mh.store)}function jC(n){return Ue(n,Oo.store)}function $C(n){return Ue(n,lo.store)}function HC(n){return Ue(n,ko.store)}const GP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class co{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new co(e,co.DEFAULT_COLLECTION_PERCENTILE,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qP(n,e,t){const r=n.store(On.store),i=n.store(Ri.store),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const g=r.Qt({range:l},(D,S,M)=>(h++,M.delete()));a.push(g.next(()=>{Dt(1===h)}));const w=[];for(const D of t.mutations){const S=Ri.key(e,D.key.path,t.batchId);a.push(i.delete(S)),w.push(D.key)}return f.waitFor(a).next(()=>w)}function GC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}co.DEFAULT_COLLECTION_PERCENTILE=10,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,co.DEFAULT=new co(41943040,co.DEFAULT_COLLECTION_PERCENTILE,co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),co.DISABLED=new co(-1,0,0);class WS{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){Dt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new WS(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).Qt({index:On.userMutationsIndex,range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=e_(e),l=yh(e);return l.add({}).next(h=>{Dt("number"==typeof h);const g=new tt(h,t,r,i),w=function(M,V,Z){const Ce=Z.baseMutations.map(gt=>Qm(M.Ht,gt)),ke=Z.mutations.map(gt=>Qm(M.Ht,gt));return new On(V,Z.batchId,Z.localWriteTime.toMillis(),Ce,ke)}(this.O,this.userId,g),D=[];let S=new or((M,V)=>$t(M.canonicalString(),V.canonicalString()));for(const M of i){const V=Ri.key(this.userId,M.key.path,h);S=S.add(M.key.path.popLast()),D.push(l.put(w)),D.push(a.put(V,Ri.PLACEHOLDER))}return S.forEach(M=>{D.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.Ke[h]=g.keys()}),f.waitFor(D).next(()=>g)})}lookupMutationBatch(e,t){return yh(e).get(t).next(r=>r?(Dt(r.userId===this.userId),bl(this.O,r)):null)}Ge(e,t){return this.Ke[t]?f.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return yh(e).Qt({index:On.userMutationsIndex,range:i},(l,h,g)=>{h.userId===this.userId&&(Dt(h.batchId>=r),a=bl(this.O,h)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yh(e).Qt({index:On.userMutationsIndex,range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).qt(On.userMutationsIndex,t).next(r=>r.map(i=>bl(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ri.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return e_(e).Qt({range:i},(l,h,g)=>{const[w,D,S]=l,M=da(D);if(w===this.userId&&t.path.isEqual(M))return yh(e).get(S).next(V=>{if(!V)throw lt();Dt(V.userId===this.userId),a.push(bl(this.O,V))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or($t);const i=[];return t.forEach(a=>{const l=Ri.prefixForPath(this.userId,a.path),h=IDBKeyRange.lowerBound(l),g=e_(e).Qt({range:h},(w,D,S)=>{const[M,V,Z]=w,Ce=da(V);M===this.userId&&a.path.isEqual(Ce)?r=r.add(Z):S.done()});i.push(g)}),f.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Ri.prefixForPath(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new or($t);return e_(e).Qt({range:l},(g,w,D)=>{const[S,M,V]=g,Z=da(M);S===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(h=h.add(V)):D.done()}).next(()=>this.je(e,h))}je(e,t){const r=[],i=[];return t.forEach(a=>{i.push(yh(e).get(a).next(l=>{if(null===l)throw lt();Dt(l.userId===this.userId),r.push(bl(this.O,l))}))}),f.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return qP(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),f.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return f.resolve();const r=IDBKeyRange.lowerBound(Ri.prefixForUser(this.userId)),i=[];return e_(e).Qt({range:r},(a,l,h)=>{if(a[0]===this.userId){const g=da(a[1]);i.push(g)}else h.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return WP(e,this.userId,t)}We(e){return zP(e).get(this.userId).next(t=>t||new El(this.userId,-1,""))}}function WP(n,e,t){const r=Ri.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return e_(n).Qt({range:a,jt:!0},(h,g,w)=>{const[D,S,M]=h;D===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function yh(n){return Ue(n,On.store)}function e_(n){return Ue(n,Ri.store)}function zP(n){return Ue(n,El.store)}class wp{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new wp(0)}static Je(){return new wp(-1)}}class o1{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new wp(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>It.fromTimestamp(new Xr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>t_(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return t_(e).Qt((l,h)=>{const g=Wc(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>f.waitFor(a)).next(()=>i)}forEachTarget(e,t){return t_(e).Qt((r,i)=>{const a=Wc(i);t(a)})}Ye(e){return KP(e).get(uo.key).next(t=>(Dt(null!==t),t))}Xe(e,t){return KP(e).put(uo.key,t)}Ze(e,t){return t_(e).put(Xm(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return t_(e).Qt({range:i,index:fs.queryTargetsIndexName},(l,h,g)=>{const w=Wc(h);Bm(t,w.target)&&(a=w,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=vh(e);return t.forEach(l=>{const h=br(l.path);i.push(a.put(new Pi(r,h))),i.push(this.referenceDelegate.addReference(e,r,l))}),f.waitFor(i)}removeMatchingKeys(e,t,r){const i=vh(e);return f.forEach(t,a=>{const l=br(a.path);return f.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=vh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=vh(e);let a=_n();return i.Qt({range:r,jt:!0},(l,h,g)=>{const w=da(l[1]),D=new Xe(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=br(t.path),i=IDBKeyRange.bound([r],[iC(r)],!1,!0);let a=0;return vh(e).Qt({index:Pi.documentTargetsIndex,jt:!0,range:i},([l,h],g,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}Tt(e,t){return t_(e).get(t).next(r=>r?Wc(r):null)}}function t_(n){return Ue(n,fs.store)}function KP(n){return Ue(n,uo.store)}function vh(n){return Ue(n,Pi.store)}function Ep(n){return zS.apply(this,arguments)}function zS(){return zS=(0,we.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==c)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),zS.apply(this,arguments)}function ZP([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class a1{constructor(e){this.en=e,this.buffer=new or(ZP),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ZP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class u1{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,we.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){x(i)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ep(i)}yield t.un(e)}))}}class l1{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return f.resolve(Ns.A);const r=new a1(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),f.resolve(GP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GP):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,a,l,h,g,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),xm()<=Rs.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(g-h)+`ms\n\tRemoved ${S} documents in `+(w-g)+`ms\nTotal Duration: ${w-D}ms`),f.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class c1{constructor(e,t){this.db=e,this.garbageCollector=new l1(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return qC(e,r)}removeReference(e,t,r){return qC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qC(e,t)}wn(e,t){return function(r,i){let a=!1;return zP(r).Wt(l=>WP(r,l,i).next(h=>(h&&(a=!0),f.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._n(e,(l,h)=>{if(h<=t){const g=this.wn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),vh(e).delete([0,br(l.path)])))});i.push(g)}}).next(()=>f.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qC(e,t)}_n(e,t){const r=vh(e);let i,a=Ns.A;return r.Qt({index:Pi.documentTargetsIndex},([l,h],{path:g,sequenceNumber:w})=>{0===l?(a!==Ns.A&&t(new Xe(da(i)),a),a=w,i=g):a=Ns.A}).next(()=>{a!==Ns.A&&t(new Xe(da(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qC(n,e){return vh(n).put((r=n.currentSequenceNumber,new Pi(0,br(e.path),r)));var r}class n_{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){cu(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Zv(this.inner)}}class YP{constructor(){this.changes=new n_(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?f.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class d1{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return wh(e).put(WC(t),r)}removeEntry(e,t){const r=wh(e),i=WC(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return wh(e).get(WC(t)).next(r=>this.gn(t,r))}yn(e,t){return wh(e).get(WC(t)).next(r=>({document:this.gn(t,r),size:GC(r)}))}getEntries(e,t){let r=oo();return this.pn(e,t,(i,a)=>{const l=this.gn(i,a);r=r.insert(i,l)}).next(()=>r)}In(e,t){let r=oo(),i=new Cr(Xe.comparator);return this.pn(e,t,(a,l)=>{const h=this.gn(a,l);r=r.insert(a,h),i=i.insert(a,GC(l))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return f.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let l=a.getNext();return wh(e).Qt({range:i},(h,g,w)=>{const D=Xe.fromSegments(h);for(;l&&Xe.comparator(l,D)<0;)r(l,null),l=a.getNext();l&&l.isEqual(D)&&(r(l,g),l=a.hasNext()?a.getNext():null),l?w.Ut(l.path.toArray()):w.done()}).next(()=>{for(;l;)r(l,null),l=a.hasNext()?a.getNext():null})}getAll(e,t,r){let i=oo();const a=t.length+1,l={};if(r.isEqual(It.min())){const h=t.toArray();l.range=IDBKeyRange.lowerBound(h)}else{const h=t.toArray(),g=mp(r);l.range=IDBKeyRange.lowerBound([h,g],!0),l.index=gr.collectionReadTimeIndex}return wh(e).Qt(l,(h,g,w)=>{if(h.length!==a)return;const D=this.gn(Xe.fromSegments(h),g);t.isPrefixOf(D.key.path)?i=i.insert(D.key,D):w.done()}).next(()=>i)}newChangeBuffer(e){return new h1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QP(e).get(ha.key).next(t=>(Dt(!!t),t))}mn(e,t){return QP(e).put(ha.key,t)}gn(e,t){if(t){const r=ps(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return sr.newInvalidDocument(e)}}class h1 extends YP{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new n_(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new or((a,l)=>$t(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.An.get(a);if(l.isValidDocument()){const g=Cl(this.Tn.O,l);i=i.add(a.path.popLast()),r+=GC(g)-h,t.push(this.Tn.addEntry(e,a,g))}else if(r-=h,this.trackRemovals){const g=Cl(this.Tn.O,l.convertToNoDocument(It.min()));t.push(this.Tn.addEntry(e,a,g))}else t.push(this.Tn.removeEntry(e,a))}),i.forEach(a=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Tn.updateMetadata(e,r)),f.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((a,l)=>{this.An.set(a,l)}),r))}}function QP(n){return Ue(n,ha.store)}function wh(n){return Ue(n,gr.store)}function WC(n){return n.path.toArray()}class f1{constructor(e){this.O=e}kt(e,t,r,i){const a=new y("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore(ao.store),(h=e).createObjectStore(El.store,{keyPath:El.keyPath}),h.createObjectStore(On.store,{keyPath:On.keyPath,autoIncrement:!0}).createIndex(On.userMutationsIndex,On.userMutationsKeyPath,{unique:!0}),h.createObjectStore(Ri.store),JP(e),function(h){h.createObjectStore(gr.store)}(e));let l=f.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore(Pi.store),h.deleteObjectStore(fs.store),h.deleteObjectStore(uo.store)}(e),JP(e)),l=l.next(()=>function(h){const g=h.store(uo.store),w=new uo(0,0,It.min().toTimestamp(),0);return g.put(uo.key,w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,g){return g.store(On.store).qt().next(w=>{h.deleteObjectStore(On.store),h.createObjectStore(On.store,{keyPath:On.keyPath,autoIncrement:!0}).createIndex(On.userMutationsIndex,On.userMutationsKeyPath,{unique:!0});const D=g.store(On.store),S=w.map(M=>D.put(M));return f.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore(Il.store,{keyPath:Il.keyPath})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Rn(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore(ha.store)}(e),this.Pn(a)))),r<7&&i>=7&&(l=l.next(()=>this.bn(a))),r<8&&i>=8&&(l=l.next(()=>this.vn(e,a))),r<9&&i>=9&&(l=l.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const g=h.objectStore(gr.store);g.createIndex(gr.readTimeIndex,gr.readTimeIndexPath,{unique:!1}),g.createIndex(gr.collectionReadTimeIndex,gr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(l=l.next(()=>this.Vn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore(gp.store,{keyPath:gp.keyPath})})(e),function(h){h.createObjectStore(_h.store,{keyPath:_h.keyPath})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const g=h.createObjectStore(gi.store,{keyPath:gi.keyPath});g.createIndex(gi.collectionPathOverlayIndex,gi.collectionPathOverlayIndexPath,{unique:!1}),g.createIndex(gi.collectionGroupOverlayIndex,gi.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>{!function(h){h.createObjectStore(lo.store,{keyPath:lo.keyPath,autoIncrement:!0}).createIndex(lo.collectionGroupIndex,lo.collectionGroupIndexPath,{unique:!1}),h.createObjectStore(ko.store,{keyPath:ko.keyPath}).createIndex(ko.sequenceNumberIndex,ko.sequenceNumberIndexPath,{unique:!1}),h.createObjectStore(Oo.store,{keyPath:Oo.keyPath}).createIndex(Oo.documentKeyIndex,Oo.documentKeyIndexPath,{unique:!1})}(e)})),l}Pn(e){let t=0;return e.store(gr.store).Qt((r,i)=>{t+=GC(i)}).next(()=>{const r=new ha(t);return e.store(ha.store).put(ha.key,r)})}Rn(e){const t=e.store(El.store),r=e.store(On.store);return t.qt().next(i=>f.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt(On.userMutationsIndex,l).next(h=>f.forEach(h,g=>{Dt(g.userId===a.userId);const w=bl(this.O,g);return qP(e,a.userId,w).next(()=>{})}))}))}bn(e){const t=e.store(Pi.store),r=e.store(gr.store);return e.store(uo.store).get(uo.key).next(i=>{const a=[];return r.Qt((l,h)=>{const g=new tn(l),w=[0,br(g)];a.push(t.get(w).next(D=>D?f.resolve():t.put(new Pi(0,br(g),i.highestListenSequenceNumber))))}).next(()=>f.waitFor(a))})}vn(e,t){e.createObjectStore(mh.store,{keyPath:mh.keyPath});const r=t.store(mh.store),i=new qS,a=l=>{if(i.add(l)){const h=l.lastSegment(),g=l.popLast();return r.put({collectionId:h,parent:br(g)})}};return t.store(gr.store).Qt({jt:!0},(l,h)=>{const g=new tn(l);return a(g.popLast())}).next(()=>t.store(Ri.store).Qt({jt:!0},([l,h,g],w)=>{const D=da(h);return a(D.popLast())}))}Vn(e){const t=e.store(fs.store);return t.Qt((r,i)=>{const a=Wc(i),l=Xm(this.O,a);return t.put(l)})}}function JP(n){n.createObjectStore(Pi.store,{keyPath:Pi.keyPath}).createIndex(Pi.documentTargetsIndex,Pi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(fs.store,{keyPath:fs.keyPath}).createIndex(fs.queryTargetsIndexName,fs.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(uo.store)}const KS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ZS{constructor(e,t,r,i,a,l,h,g,w,D,S=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=a,this.window=l,this.document=h,this.Dn=w,this.Cn=D,this.schemaVersion=S,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=M=>Promise.resolve(),!ZS.Vt())throw new Me(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new c1(this,i),this.Bn=t+"main",this.O=new fn(g),this.Ln=new E(this.Bn,this.schemaVersion,new f1(this.O)),this.Un=new o1(this.referenceDelegate,this.O),this.qn=new d1(this.O),this.Kn=new XO,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===D&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ge.FAILED_PRECONDITION,KS);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Ns(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zC(e).put(new Il(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(x(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return Cw(e).get(ao.key).next(t=>f.resolve(this.ts(t)))}es(e){return zC(e).delete(this.clientId)}ns(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ue(r,Il.store);return i.qt().next(a=>{const l=e.rs(a,18e5),h=a.filter(g=>-1===l.indexOf(g));return f.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?f.resolve(!0):Cw(e).get(ao.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Me(ge.FAILED_PRECONDITION,KS);return!1}}return!(!this.networkEnabled||!this.inForeground)||zC(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[ao.store,Il.store],t=>{const r=new Ve(t,Ns.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>zC(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return WS.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new s1(e)}getDocumentOverlayCache(e){return $S.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=13===(l=this.schemaVersion)?u:12===l?o:11===l?s:void lt();var l;let h;return this.Ln.runTransaction(e,i,a,g=>(h=new Ve(g,this.Nn?this.Nn.next():Ns.A),"readwrite-primary"===t?this.Jn(h).next(w=>!!w||this.Yn(h)).next(w=>{if(!w)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Me(ge.FAILED_PRECONDITION,c);return r(h)}).next(w=>this.Zn(h).next(()=>w)):this._s(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}_s(e){return Cw(e).get(ao.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ge.FAILED_PRECONDITION,KS)})}Zn(e){const t=new ao(this.clientId,this.allowTabSynchronization,Date.now());return Cw(e).put(ao.key,t)}static Vt(){return E.Vt()}Xn(e){const t=Cw(e);return t.get(ao.key).next(r=>this.ts(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete(ao.key)):f.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){Mr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cw(n){return Ue(n,ao.store)}function zC(n){return Ue(n,Il.store)}function YS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class p1{constructor(e,t){this.progress=e,this.ws=t}}class g1{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):_C(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new Xe(t)).next(r=>{let i=qc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let a=qc();return this.indexManager.getCollectionParents(e,i).next(l=>f.forEach(l,h=>{const g=(w=t,D=h.child(i),new _l(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.bs(e,g,r).next(w=>{w.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(a=>(i=a,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const h of l.mutations){const g=h.key;let w=i.get(g);null==w&&(w=sr.newInvalidDocument(g),i=i.insert(g,w)),uw(h,w,l.localWriteTime),w.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((a,l)=>{Hm(t,l)||(i=i.remove(a))}),i))}}class QS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=_n(),i=_n();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new QS(e,t.fromCache,r,i)}}class XP{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(It.min())?this.Ns(e,t):this.Cs.Es(e,i).next(a=>{const l=this.xs(t,a);return(rw(t)||iw(t))&&this.ks(t.limitType,l,i,r)?this.Ns(e,t):(xm()<=Rs.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yl(t)),this.Cs.As(e,t,r).next(h=>(l.forEach(g=>{h=h.insert(g.key,g)}),h)))});var a}xs(e,t){let r=new or(yC(e));return t.forEach((i,a)=>{Hm(e,a)&&(r=r.add(a))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ns(e,t){return xm()<=Rs.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",yl(t)),this.Cs.As(e,t,It.min())}}class m1{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new Cr($t),this.$s=new n_(a=>Vm(a),Bm),this.Fs=It.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new g1(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function eN(n,e,t,r){return new m1(n,e,t,r)}function tN(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,we.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.gs.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let g=_n();for(const w of i){l.push(w.batchId);for(const D of w.mutations)g=g.add(D.key)}for(const w of a){h.push(w.batchId);for(const D of w.mutations)g=g.add(D.key)}return t.Us.Es(r,g).next(w=>({qs:w,removedBatchIds:l,addedBatchIds:h}))})})}),JS.apply(this,arguments)}function _1(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(l,h,g,w){const D=g.batch,S=D.keys();let M=f.resolve();return S.forEach(V=>{M=M.next(()=>w.getEntry(h,V)).next(Z=>{const Ce=g.docVersions.get(V);Dt(null!==Ce),Z.version.compareTo(Ce)<0&&(D.applyToRemoteDocument(Z,g),Z.isValidDocument()&&(Z.setReadTime(g.commitVersion),w.addEntry(Z)))})}),M.next(()=>l.gs.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function nN(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function y1(n,e){const t=We(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((w,D)=>{const S=i.get(D);if(!S)return;h.push(t.Un.removeMatchingKeys(a,w.removedDocuments,D).next(()=>t.Un.addMatchingKeys(a,w.addedDocuments,D)));let M=S.withSequenceNumber(a.currentSequenceNumber);var V,Z,Ce;e.targetMismatches.has(D)?M=M.withResumeToken(kr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):w.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(w.resumeToken,r)),i=i.insert(D,M),Z=M,Ce=w,(0===(V=S).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0)&&h.push(t.Un.updateTargetData(a,M))});let g=oo();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),h.push(rN(a,l,e.documentUpdates).next(w=>{g=w})),!r.isEqual(It.min())){const w=t.Un.getLastRemoteSnapshotVersion(a).next(D=>t.Un.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(w)}return f.waitFor(h).next(()=>l.apply(a)).next(()=>t.Us.Ts(a,g)).next(()=>g)}).then(a=>(t.Ms=i,a))}function rN(n,e,t){let r=_n();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=oo();return t.forEach((l,h)=>{const g=i.get(l);h.isNoDocument()&&h.version.isEqual(It.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||0===h.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):Be("LocalStore","Ignoring outdated watch update for ",l,". Current version:",g.version," Watch version:",h.version)}),a})}function v1(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function r_(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(a=>a?(i=a,f.resolve(i)):t.Un.allocateTargetId(r).next(l=>(i=new Pt(e,l,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function i_(n,e,t){return XS.apply(this,arguments)}function XS(){return XS=(0,we.Z)(function*(n,e,t){const r=We(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!x(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),XS.apply(this,arguments)}function KC(n,e,t){const r=We(n);let i=It.min(),a=_n();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,g,w){const D=We(h),S=D.$s.get(w);return void 0!==S?f.resolve(D.Ms.get(S)):D.Un.getTargetData(g,w)}(r,l,Po(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(l,h.targetId).next(g=>{a=g})}).next(()=>r.Os.As(l,e,t?i:It.min(),t?a:_n())).next(h=>({documents:h,Ks:a})))}function iN(n,e){const t=We(n),r=We(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Tt(a,e).next(l=>l?l.target:null))}function sN(n){const e=We(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const l=We(r);let h=oo(),g=mp(a);const w=wh(i),D=IDBKeyRange.lowerBound(g,!0);return w.Qt({index:gr.readTimeIndex,range:D},(S,M)=>{const V=ps(l.O,M);h=h.insert(V.key,V),g=M.readTime}).next(()=>({ws:h,readTime:_p(g)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function eA(){return eA=(0,we.Z)(function*(n){const e=We(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=wh(r);let a=It.min();return i.Qt({index:gr.readTimeIndex,reverse:!0},(l,h,g)=>{h.readTime&&(a=_p(h.readTime)),g.done()}).next(()=>a)}(t)).then(t=>{e.Fs=t})}),eA.apply(this,arguments)}function tA(){return tA=(0,we.Z)(function*(n,e,t,r){const i=We(n);let a=_n(),l=oo();for(const w of t){const D=e.Gs(w.metadata.name);w.document&&(a=a.add(D));const S=e.js(w);S.setReadTime(e.Qs(w.metadata.readTime)),l=l.insert(D,S)}const h=i.Bs.newChangeBuffer({trackRemovals:!0}),g=yield r_(i,(w=r,Po(tp(tn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>rN(w,h,l).next(D=>(h.apply(w),D)).next(D=>i.Un.removeMatchingKeysForTargetId(w,g.targetId).next(()=>i.Un.addMatchingKeys(w,a,g.targetId)).next(()=>i.Us.Ts(w,D)).next(()=>D)))}),tA.apply(this,arguments)}function I1(n,e){return nA.apply(this,arguments)}function nA(){return nA=(0,we.Z)(function*(n,e,t=_n()){const r=yield r_(n,Po(yp(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=ti(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Kn.saveNamedQuery(a,e);const h=r.withResumeToken(kr.EMPTY_BYTE_STRING,l);return i.Ms=i.Ms.insert(h.targetId,h),i.Un.updateTargetData(a,h).next(()=>i.Un.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Un.addMatchingKeys(a,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(a,e))})}),nA.apply(this,arguments)}class C1{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return f.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:ti(r.createTime)}),f.resolve()}getNamedQuery(e,t){return f.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:yp(r.bundledQuery),readTime:ti(r.readTime)}),f.resolve();var r}}class b1{constructor(){this.overlays=new Cr(Xe.comparator),this.Hs=new Map}getOverlay(e,t){return f.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),f.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Hs.delete(r)),f.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,a=t.length+1,l=new Xe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const g=h.getNext().value,w=g.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return f.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Cr((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=new Map,a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=new Map,g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((w,D)=>h.set(D,w)),!(h.size>=i)););return f.resolve(h)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new pt(t,r));let a=this.Hs.get(t);void 0===a&&(a=new Set,this.Hs.set(t,a)),a.add(r.key)}}class rA{constructor(){this.Js=new or(Ni.Ys),this.Xs=new or(Ni.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new Ni(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new Ni(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Xe(new tn([])),r=new Ni(t,e),i=new Ni(t,e+1),a=[];return this.Xs.forEachInRange([r,i],l=>{this.ei(l),a.push(l.key)}),a}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Xe(new tn([])),r=new Ni(t,e),i=new Ni(t,e+1);let a=_n();return this.Xs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ni(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ni{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Xe.comparator(e.key,t.key)||$t(e.oi,t.oi)}static Zs(e,t){return $t(e.oi,t.oi)||Xe.comparator(e.key,t.key)}}class T1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new or(Ni.Ys)}checkEmpty(e){return f.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const a=this.ci;this.ci++;const l=new tt(a,t,r,i);this.gs.push(l);for(const h of i)this.ui=this.ui.add(new Ni(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return f.resolve(l)}lookupMutationBatch(e,t){return f.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),a=i<0?0:i;return f.resolve(this.gs.length>a?this.gs[a]:null)}getHighestUnacknowledgedBatchId(){return f.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return f.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ni(t,0),i=new Ni(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],l=>{const h=this.ai(l.oi);a.push(h)}),f.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or($t);return t.forEach(i=>{const a=new Ni(i,0),l=new Ni(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([a,l],h=>{r=r.add(h.oi)})}),f.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const l=new Ni(new Xe(a),0);let h=new or($t);return this.ui.forEachWhile(g=>{const w=g.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(g.oi)),!0)},l),f.resolve(this.li(h))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return f.forEach(t.mutations,i=>{const a=new Ni(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new Ni(t,0),i=this.ui.firstAfterOrEqual(r);return f.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return f.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class D1{constructor(e){this.di=e,this.docs=new Cr(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return f.resolve(r?r.document.mutableCopy():sr.newInvalidDocument(t))}getEntries(e,t){let r=oo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():sr.newInvalidDocument(i))}),f.resolve(r)}getAll(e,t,r){let i=oo();const a=new Xe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:g}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||g.readTime.compareTo(r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return f.resolve(i)}_i(e,t){return f.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new S1(this)}getSize(e){return f.resolve(this.size)}}class S1 extends YP{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),f.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class A1{constructor(e){this.persistence=e,this.wi=new n_(t=>Vm(t),Bm),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.mi=0,this.gi=new rA,this.targetCount=0,this.yi=wp.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),f.resolve()}getLastRemoteSnapshotVersion(e){return f.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return f.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),f.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),f.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new wp(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,f.resolve()}updateTargetData(e,t){return this.Ze(t),f.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,f.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.wi.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.wi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),f.waitFor(a).next(()=>i)}getTargetCount(e){return f.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return f.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),f.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),f.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),f.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return f.resolve(r)}containsKey(e,t){return f.resolve(this.gi.containsKey(t))}}class x1{constructor(e,t){this.pi={},this.overlays={},this.Nn=new Ns(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new A1(this),this.indexManager=new i1,this.qn=new D1(r=>this.referenceDelegate.Ii(r)),this.O=new fn(t),this.Kn=new C1(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new T1(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new R1(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.Ti(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,t){return f.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class R1 extends d{constructor(e){super(),this.currentSequenceNumber=e}}class iA{constructor(e){this.persistence=e,this.Ri=new rA,this.Pi=null}static bi(e){return new iA(e)}get vi(){if(this.Pi)return this.Pi;throw lt()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),f.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),f.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),f.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.vi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return f.forEach(this.vi,r=>{const i=Xe.fromPath(r);return this.Vi(e,i).next(a=>{a||t.removeEntry(i,It.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return f.or([()=>f.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function oN(n,e){return`firestore_clients_${n}_${e}`}function aN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sA(n,e){return`firestore_targets_${n}_${e}`}class ZC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Me(i.error.code,i.error.message))),l?new ZC(e,t,i.state,a):(Mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new bw(e,r.state,i):(Mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class YC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=lp();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=Ai(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new YC(e,a):(Mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class oA{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oA(t.clientId,t.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aA{constructor(){this.activeTargetIds=lp()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uA{constructor(e,t,r,i,a){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Cr($t),this.started=!1,this.$i=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=oN(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new aA),this.Li=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const a=e.getItem(oN(e.persistenceKey,i));if(a){const l=YC.Si(i,a);l&&(e.Mi=e.Mi.insert(l.clientId,l))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(sA(this.persistenceKey,e));if(r){const i=bw.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(a){let l=Ns.A;if(null!=a)try{const h=JSON.parse(a);Dt("number"==typeof h),l=h}catch(h){Mr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Ns.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new ZC(this.currentUser,e,t,r),a=aN(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Di())}Ji(e){const t=aN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=sA(this.persistenceKey,e),a=new bw(e,t,r);this.setItem(i,a.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return YC.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return ZC.Si(new Jr(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return bw.Si(i,t)}Qi(e){return oA.Si(e)}rr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),l=[],h=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||h.push(g)}),this.syncEngine.dr(l,h).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=lp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class uN{constructor(){this._r=new aA,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new aA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class P1{mr(e){}shutdown(){}}class lN{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const N1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class M1{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class k1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,a){const l=this.$r(e,t);Be("RestConnection","Sending: ",l,r);const h={};return this.Fr(h,i,a),this.Br(e,l,h,r).then(g=>(Be("RestConnection","Received: ",g),g),g=>{throw Yf("RestConnection",`${e} failed with error: `,g,"url: ",l,"request:",r),g})}Lr(e,t,r,i,a){return this.Mr(e,t,r,i,a)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}$r(e,t){return`${this.kr}/v1/${t}:${N1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((a,l)=>{const h=new gS;h.listenOnce(hS.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case qv.NO_ERROR:const w=h.getResponseJson();Be("Connection","XHR received:",JSON.stringify(w)),a(w);break;case qv.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),l(new Me(ge.DEADLINE_EXCEEDED,"Request time out"));break;case qv.HTTP_ERROR:const D=h.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const M=function(V){const Z=V.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Z)>=0?Z:ge.UNKNOWN}(S.status);l(new Me(M,S.message))}else l(new Me(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Me(ge.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);h.send(t,"POST",g,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cS(),l=dS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new pS({})),this.Fr(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Be("Connection","Creating WebChannel: "+g,h);const w=a.createWebChannel(g,h);let D=!1,S=!1;const M=new M1({Ar:Z=>{S?Be("Connection","Not sending because WebChannel is closed:",Z):(D||(Be("Connection","Opening WebChannel transport."),w.open(),D=!0),Be("Connection","WebChannel sending:",Z),w.send(Z))},Rr:()=>w.close()}),V=(Z,Ce,ke)=>{Z.listen(Ce,gt=>{try{ke(gt)}catch(wt){setTimeout(()=>{throw wt},0)}})};return V(w,Am.EventType.OPEN,()=>{S||Be("Connection","WebChannel transport opened.")}),V(w,Am.EventType.CLOSE,()=>{S||(S=!0,Be("Connection","WebChannel transport closed"),M.Cr())}),V(w,Am.EventType.ERROR,Z=>{S||(S=!0,Yf("Connection","WebChannel transport errored:",Z),M.Cr(new Me(ge.UNAVAILABLE,"The operation could not be completed")))}),V(w,Am.EventType.MESSAGE,Z=>{var Ce;if(!S){const ke=Z.data[0];Dt(!!ke);const gt=ke,wt=gt.error||(null===(Ce=gt[0])||void 0===Ce?void 0:Ce.error);if(wt){Be("Connection","WebChannel received error:",wt);const Ct=wt.status;let ft=function(Oi){const Oh=jr[Oi];if(void 0!==Oh)return bC(Oh)}(Ct),vn=wt.message;void 0===ft&&(ft=ge.INTERNAL,vn="Unknown error status: "+Ct+" with message "+wt.message),S=!0,M.Cr(new Me(ft,vn)),w.close()}else Be("Connection","WebChannel received:",ke),M.Nr(ke)}}),V(l,fS.STAT_EVENT,Z=>{Z.stat===eC.PROXY?Be("Connection","Detected buffering proxy"):Z.stat===eC.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.Dr()},0),M}}function cN(){return"undefined"!=typeof window?window:null}function QC(){return"undefined"!=typeof document?document:null}function Tw(n){return new MP(n,!0)}class lA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class dN{constructor(e,t,r,i,a,l,h,g){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new lA(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,we.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,we.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new Me(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,we.Z)(function*(){e.state=0,e.start()}))}Io(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O1 extends dN{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.O=a}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function OP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:lt(),i=e.targetChange.targetIds||[],a=function(g,w){return g.N?(Dt(void 0===w||"string"==typeof w),kr.fromBase64String(w||"")):(Dt(void 0===w||w instanceof Uint8Array),kr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(g){const w=void 0===g.code?ge.UNKNOWN:bC(g.code);return new Me(w,g.message||"")}(l);t=new _w(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Mo(n,r.document.name),a=ti(r.document.updateTime),l=new zi({mapValue:{fields:r.document.fields}}),h=sr.newFoundDocument(i,a,l);t=new mw(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Mo(n,r.document),a=r.readTime?ti(r.readTime):It.min(),l=sr.newNoDocument(i,a);t=new mw([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Mo(n,r.document);t=new mw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,a=new NS(r.count||0);t=new kS(r.targetId,a)}}var g;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return It.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?It.min():a.readTime?ti(a.readTime):It.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=fp(this.O),t.addTarget=function(i,a){let l;const h=a.target;return l=ep(h)?{documents:MC(i,h)}:{query:kC(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=RC(i,a.resumeToken):a.snapshotVersion.compareTo(It.min())>0&&(l.readTime=Wm(i,a.snapshotVersion.toTimestamp())),l}(this.O,e);const r=function FS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=fp(this.O),t.removeTarget=e,this.fo(t)}}class L1 extends dN{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.O=a,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function NC(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let a=ti(r.updateTime?r.updateTime:i);return a.isEqual(It.min())&&(a=ti(i)),new RS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ti(e.commitTime);return this.listener.Vo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=fp(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qm(this.O,r))};this.fo(t)}}class F1 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new Me(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Mr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ge.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Lr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ge.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class U1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Mr(t),this.Oo=!1):Be("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class V1{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr(h=>{r.enqueueAndForget((0,we.Z)(function*(){var g;Eh(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,we.Z)(function*(w){const D=We(w);D.Ko.add(4),yield s_(D),D.Qo.set("Unknown"),D.Ko.delete(4),yield Dw(D)}),function(w){return g.apply(this,arguments)})(l))}))}),this.Qo=new U1(r,i)}}function Dw(n){return cA.apply(this,arguments)}function cA(){return cA=(0,we.Z)(function*(n){if(Eh(n))for(const e of n.Go)yield e(!0)}),cA.apply(this,arguments)}function s_(n){return dA.apply(this,arguments)}function dA(){return dA=(0,we.Z)(function*(n){for(const e of n.Go)yield e(!1)}),dA.apply(this,arguments)}function JC(n,e){const t=We(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),pA(t)?fA(t):a_(t).co()&&hA(t,e))}function Sw(n,e){const t=We(n),r=a_(t);t.qo.delete(e),r.co()&&hN(t,e),0===t.qo.size&&(r.co()?r.ho():Eh(t)&&t.Qo.set("Unknown"))}function hA(n,e){n.Wo.Z(e.targetId),a_(n).Ao(e)}function hN(n,e){n.Wo.Z(e),a_(n).Ro(e)}function fA(n){n.Wo=new OS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),a_(n).start(),n.Qo.Mo()}function pA(n){return Eh(n)&&!a_(n).oo()&&n.qo.size>0}function Eh(n){return 0===We(n).Ko.size}function fN(n){n.Wo=void 0}function B1(n){return gA.apply(this,arguments)}function gA(){return gA=(0,we.Z)(function*(n){n.qo.forEach((e,t)=>{hA(n,e)})}),gA.apply(this,arguments)}function j1(n,e){return mA.apply(this,arguments)}function mA(){return mA=(0,we.Z)(function*(n,e){fN(n),pA(n)?(n.Qo.Bo(e),fA(n)):n.Qo.set("Unknown")}),mA.apply(this,arguments)}function $1(n,e,t){return _A.apply(this,arguments)}function _A(){return _A=(0,we.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof _w&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.qo.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.qo.delete(h),i.Wo.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield XC(n,r)}else if(e instanceof mw?n.Wo.ct(e):e instanceof kS?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(It.min()))try{const r=yield nN(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Wo.yt(a);return l.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.qo.get(g);w&&i.qo.set(g,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const g=i.qo.get(h);if(!g)return;i.qo.set(h,g.withResumeToken(kr.EMPTY_BYTE_STRING,g.snapshotVersion)),hN(i,h);const w=new Pt(g.target,h,1,g.sequenceNumber);hA(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield XC(n,r)}var r}),_A.apply(this,arguments)}function XC(n,e,t){return yA.apply(this,arguments)}function yA(){return yA=(0,we.Z)(function*(n,e,t){if(!x(e))throw e;n.Ko.add(1),yield s_(n),n.Qo.set("Offline"),t||(t=()=>nN(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield Dw(n)}))}),yA.apply(this,arguments)}function pN(n,e){return e().catch(t=>XC(n,t,e))}function o_(n){return vA.apply(this,arguments)}function vA(){return vA=(0,we.Z)(function*(n){const e=We(n),t=Ih(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;H1(e);)try{const i=yield v1(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,G1(e,i)}catch(i){yield XC(e,i)}gN(e)&&mN(e)}),vA.apply(this,arguments)}function H1(n){return Eh(n)&&n.Uo.length<10}function G1(n,e){n.Uo.push(e);const t=Ih(n);t.co()&&t.bo&&t.vo(e.mutations)}function gN(n){return Eh(n)&&!Ih(n).oo()&&n.Uo.length>0}function mN(n){Ih(n).start()}function q1(n){return wA.apply(this,arguments)}function wA(){return wA=(0,we.Z)(function*(n){Ih(n).Do()}),wA.apply(this,arguments)}function W1(n){return EA.apply(this,arguments)}function EA(){return EA=(0,we.Z)(function*(n){const e=Ih(n);for(const t of n.Uo)e.vo(t.mutations)}),EA.apply(this,arguments)}function z1(n,e,t){return IA.apply(this,arguments)}function IA(){return IA=(0,we.Z)(function*(n,e,t){const r=n.Uo.shift(),i=Ae.from(r,e,t);yield pN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield o_(n)}),IA.apply(this,arguments)}function K1(n,e){return CA.apply(this,arguments)}function CA(){return CA=(0,we.Z)(function*(n,e){var t;e&&Ih(n).bo&&(yield(t=(0,we.Z)(function*(r,i){if(fw(a=i.code)&&a!==ge.ABORTED){const l=r.Uo.shift();Ih(r).ao(),yield pN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield o_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),gN(n)&&mN(n)}),CA.apply(this,arguments)}function _N(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,we.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Eh(t);t.Ko.add(3),yield s_(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield Dw(t)}),bA.apply(this,arguments)}function TA(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,we.Z)(function*(n,e){const t=We(n);e?(t.Ko.delete(2),yield Dw(t)):e||(t.Ko.add(2),yield s_(t),t.Qo.set("Unknown"))}),DA.apply(this,arguments)}function a_(n){return n.zo||(n.zo=function(e,t,r){const i=We(e);return i.No(),new O1(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:B1.bind(null,n),vr:j1.bind(null,n),To:$1.bind(null,n)}),n.Go.push(function(){var e=(0,we.Z)(function*(t){t?(n.zo.ao(),pA(n)?fA(n):n.Qo.set("Unknown")):(yield n.zo.stop(),fN(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Ih(n){return n.Ho||(n.Ho=function(e,t,r){const i=We(e);return i.No(),new L1(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:q1.bind(null,n),vr:K1.bind(null,n),So:W1.bind(null,n),Vo:z1.bind(null,n)}),n.Go.push(function(){var e=(0,we.Z)(function*(t){t?(n.Ho.ao(),yield o_(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class SA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new SA(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u_(n,e){if(Mr("AsyncQueue",`${e}: ${n}`),x(n))return new Me(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class l_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=qc(),this.sortedSet=new Cr(this.comparator)}static emptySet(e){return new l_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof l_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new l_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class yN{constructor(){this.Jo=new Cr(Xe.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):lt():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class c_{constructor(e,t,r,i,a,l,h,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new c_(e,t,l_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Z1{constructor(){this.Xo=void 0,this.listeners=[]}}class Y1{constructor(){this.queries=new n_(e=>$m(e),jm),this.onlineState="Unknown",this.Zo=new Set}}function AA(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,we.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Z1),i)try{a.Xo=yield t.onListen(r)}catch(l){const h=u_(l,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.tc(t.onlineState),a.Xo&&e.ec(a.Xo)&&NA(t)}),xA.apply(this,arguments)}function RA(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,we.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),PA.apply(this,arguments)}function Q1(n,e){const t=We(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.ec(i)&&(r=!0);l.Xo=i}}r&&NA(t)}function J1(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function NA(n){n.Zo.forEach(e=>{e.next()})}class MA{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new c_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=c_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class X1{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class vN{constructor(e){this.O=e}Gs(e){return Mo(this.O,e)}js(e){return e.metadata.exists?pp(this.O,e.document,!1):sr.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return ti(e)}}class eL{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=wN(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new vN(this.O);for(const i of e)if(i.metadata.queries){const a=r.Gs(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||_n()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function E1(n,e,t,r){return tA.apply(this,arguments)}(e.localStore,new vN(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield I1(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new p1(Object.assign({},e.progress),t)})()}}function wN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class EN{constructor(e){this.key=e}}class IN{constructor(e){this.key=e}}class CN{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=_n(),this.mutatedKeys=_n(),this.mc=yC(e),this.gc=new l_(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new yN,i=t?t.gc:this.gc;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const g=rw(this.query)&&i.size===this.query.limit?i.last():null,w=iw(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const M=i.get(D),V=Hm(this.query,S)?S:null,Z=!!M&&this.mutatedKeys.has(M.key),Ce=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ke=!1;M&&V?M.data.isEqual(V.data)?Z!==Ce&&(r.track({type:3,doc:V}),ke=!0):this.Tc(M,V)||(r.track({type:2,doc:V}),ke=!0,(g&&this.mc(V,g)>0||w&&this.mc(V,w)<0)&&(h=!0)):!M&&V?(r.track({type:0,doc:V}),ke=!0):M&&!V&&(r.track({type:1,doc:M}),ke=!0,(g||w)&&(h=!0)),ke&&(V?(l=l.add(V),a=Ce?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),rw(this.query)||iw(this.query))for(;l.size>this.query.limit;){const D=rw(this.query)?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{gc:l,Ec:r,ks:h,mutatedKeys:a}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const a=e.Ec.Yo();a.sort((w,D)=>function(S,M){const V=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return V(S)-V(M)}(w.type,D.type)||this.mc(w.doc,D.doc)),this.Ac(r);const l=t?this.Rc():[],h=0===this.wc.size&&this.current?1:0,g=h!==this._c;return this._c=h,0!==a.length||g?{snapshot:new c_(this.query,e.gc,i,a,e.mutatedKeys,0===h,g,!1),Pc:l}:{Pc:l}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new yN,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=_n(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new IN(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new EN(r))}),t}vc(e){this.dc=e.Ks,this.wc=_n();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return c_.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class tL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nL{constructor(e){this.key=e,this.Sc=!1}}class rL{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Dc={},this.Cc=new n_(h=>$m(h),jm),this.Nc=new Map,this.xc=new Set,this.kc=new Cr(Xe.comparator),this.Oc=new Map,this.Mc=new rA,this.$c={},this.Fc=new Map,this.Bc=wp.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function iL(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,we.Z)(function*(n,e){const t=rx(n);let r,i;const a=t.Cc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Vc();else{const l=yield r_(t.localStore,Po(e));t.isPrimaryClient&&JC(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield OA(t,e,r,"current"===h)}return i}),kA.apply(this,arguments)}function OA(n,e,t,r){return LA.apply(this,arguments)}function LA(){return LA=(0,we.Z)(function*(n,e,t,r){n.Uc=(D,S,M)=>{return(V=(0,we.Z)(function*(Z,Ce,ke,gt){let wt=Ce.view.Ic(ke);wt.ks&&(wt=yield KC(Z.localStore,Ce.query,!1).then(({documents:vn})=>Ce.view.Ic(vn,wt)));const Ct=gt&&gt.targetChanges.get(Ce.targetId),ft=Ce.view.applyChanges(wt,Z.isPrimaryClient,Ct);return WA(Z,Ce.targetId,ft.Pc),ft.snapshot}),function(Z,Ce,ke,gt){return V.apply(this,arguments)})(n,D,S,M);var V};const i=yield KC(n.localStore,e,!0),a=new CN(e,i.Ks),l=a.Ic(i.documents),h=dp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=a.applyChanges(l,n.isPrimaryClient,h);WA(n,t,g.Pc);const w=new tL(e,t,a);return n.Cc.set(e,w),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),g.snapshot}),LA.apply(this,arguments)}function sL(n,e){return FA.apply(this,arguments)}function FA(){return FA=(0,we.Z)(function*(n,e){const t=We(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(a=>!jm(a,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield i_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Sw(t.remoteStore,r.targetId),d_(t,r.targetId)}).catch(Ep))):(d_(t,r.targetId),yield i_(t.localStore,r.targetId,!0))}),FA.apply(this,arguments)}function UA(){return UA=(0,we.Z)(function*(n,e,t){const r=ix(n);try{const i=yield function(a,l){const h=We(a),g=Xr.now(),w=l.reduce((S,M)=>S.add(M.key),_n());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.Us.Es(S,w).next(M=>{D=M;const V=[];for(const Z of l){const Ce=lw(Z,D.get(Z.key));null!=Ce&&V.push(new wl(Z.key,Ce,ew(Ce.value.mapValue),ln.exists(!0)))}return h.gs.addMutationBatch(S,g,V,l)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let g=a.$c[a.currentUser.toKey()];g||(g=new Cr($t)),g=g.insert(l,h),a.$c[a.currentUser.toKey()]=g}(r,i.batchId,t),yield zc(r,i.changes),yield o_(r.remoteStore)}catch(i){const a=u_(i,"Failed to persist write");t.reject(a)}}),UA.apply(this,arguments)}function bN(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,we.Z)(function*(n,e){const t=We(n);try{const r=yield y1(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.Oc.get(a);l&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Sc=!0:i.modifiedDocuments.size>0?Dt(l.Sc):i.removedDocuments.size>0&&(Dt(l.Sc),l.Sc=!1))}),yield zc(t,r,e)}catch(r){yield Ep(r)}}),VA.apply(this,arguments)}function TN(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((a,l)=>{const h=l.view.tc(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=We(a);h.onlineState=l;let g=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.tc(l)&&(g=!0)}),g&&NA(h)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aL(n,e,t){return BA.apply(this,arguments)}function BA(){return BA=(0,we.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),a=i&&i.key;if(a){let l=new Cr(Xe.comparator);l=l.insert(a,sr.newNoDocument(a,It.min()));const h=_n().add(a),g=new cp(It.min(),new Map,new or($t),l,h);yield bN(r,g),r.kc=r.kc.remove(a),r.Oc.delete(e),zA(r)}else yield i_(r.localStore,e,!1).then(()=>d_(r,e,t)).catch(Ep)}),BA.apply(this,arguments)}function uL(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,we.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const i=yield _1(t.localStore,e);qA(t,r,null),GA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield zc(t,i)}catch(i){yield Ep(i)}}),jA.apply(this,arguments)}function lL(n,e,t){return $A.apply(this,arguments)}function $A(){return $A=(0,we.Z)(function*(n,e,t){const r=We(n);try{const i=yield function(a,l){const h=We(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let w;return h.gs.lookupMutationBatch(g,l).next(D=>(Dt(null!==D),w=D.keys(),h.gs.removeMutationBatch(g,D))).next(()=>h.gs.performConsistencyCheck(g)).next(()=>h.Us.Es(g,w))})}(r.localStore,e);qA(r,e,t),GA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield zc(r,i)}catch(i){yield Ep(i)}}),$A.apply(this,arguments)}function HA(){return HA=(0,we.Z)(function*(n,e){const t=We(n);Eh(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=We(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.gs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=u_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),HA.apply(this,arguments)}function GA(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function qA(n,e,t){const r=We(n);let i=r.$c[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function d_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||DN(n,r)})}function DN(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(Sw(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),zA(n))}function WA(n,e,t){for(const r of t)r instanceof EN?(n.Mc.addReference(r.key,e),dL(n,r)):r instanceof IN?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||DN(n,r.key)):lt()}function dL(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.xc.add(r),zA(n))}function zA(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Xe(tn.fromString(e)),r=n.Bc.next();n.Oc.set(r,new nL(t)),n.kc=n.kc.insert(t,r),JC(n.remoteStore,new Pt(Po(tp(t.path)),r,2,Ns.A))}}function zc(n,e,t){return KA.apply(this,arguments)}function KA(){return KA=(0,we.Z)(function*(n,e,t){const r=We(n),i=[],a=[],l=[];var h;r.Cc.isEmpty()||(r.Cc.forEach((h,g)=>{l.push(r.Uc(g,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,w.fromCache?"not-current":"current"),i.push(w);const D=QS.Ss(g.targetId,w);a.push(D)}}))}),yield Promise.all(l),r.Dc.To(i),yield(h=(0,we.Z)(function*(g,w){const D=We(g);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>f.forEach(w,M=>f.forEach(M.vs,V=>D.persistence.referenceDelegate.addReference(S,M.targetId,V)).next(()=>f.forEach(M.Vs,V=>D.persistence.referenceDelegate.removeReference(S,M.targetId,V)))))}catch(S){if(!x(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const M=S.targetId;if(!S.fromCache){const V=D.Ms.get(M),Ce=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);D.Ms=D.Ms.insert(M,Ce)}}}),function(g,w){return h.apply(this,arguments)})(r.localStore,a))}),KA.apply(this,arguments)}function hL(n,e){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,we.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield tN(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(l=>{l.forEach(h=>{h.reject(new Me(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zc(t,r.qs)}var i}),ZA.apply(this,arguments)}function fL(n,e){const t=We(n),r=t.Oc.get(e);if(r&&r.Sc)return _n().add(r.key);{let i=_n();const a=t.Nc.get(e);if(!a)return i;for(const l of a){const h=t.Cc.get(l);i=i.unionWith(h.view.yc)}return i}}function pL(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,we.Z)(function*(n,e){const t=We(n),r=yield KC(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&WA(t,e.targetId,i.Pc),i}),YA.apply(this,arguments)}function gL(n){return QA.apply(this,arguments)}function QA(){return QA=(0,we.Z)(function*(n){const e=We(n);return sN(e.localStore).then(t=>zc(e,t))}),QA.apply(this,arguments)}function mL(n,e,t,r){return JA.apply(this,arguments)}function JA(){return JA=(0,we.Z)(function*(n,e,t,r){const i=We(n),a=yield function(l,h){const g=We(l),w=We(g.gs);return g.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Ge(D,h).next(S=>S?g.Us.Es(D,S):f.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield o_(i.remoteStore):"acknowledged"===t||"rejected"===t?(qA(i,e,r||null),GA(i,e),h=e,We(We(i.localStore).gs).Qe(h)):lt(),yield zc(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),JA.apply(this,arguments)}function XA(){return XA=(0,we.Z)(function*(n,e){const t=We(n);if(rx(t),ix(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield SN(t,r.toArray());t.Lc=!0,yield TA(t.remoteStore,!0);for(const a of i)JC(t.remoteStore,a)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(d_(t,l),i_(t.localStore,l,!0))),Sw(t.remoteStore,l)}),yield i,yield SN(t,r),function(a){const l=We(a);l.Oc.forEach((h,g)=>{Sw(l.remoteStore,g)}),l.Mc.ii(),l.Oc=new Map,l.kc=new Cr(Xe.comparator)}(t),t.Lc=!1,yield TA(t.remoteStore,!1)}}),XA.apply(this,arguments)}function SN(n,e,t){return ex.apply(this,arguments)}function ex(){return ex=(0,we.Z)(function*(n,e,t){const r=We(n),i=[],a=[];for(const l of e){let h;const g=r.Nc.get(l);if(g&&0!==g.length){h=yield r_(r.localStore,Po(g[0]));for(const w of g){const D=r.Cc.get(w),S=yield pL(r,D);S.snapshot&&a.push(S.snapshot)}}else{const w=yield iN(r.localStore,l);h=yield r_(r.localStore,w),yield OA(r,AN(w),l,!1)}i.push(h)}return r.Dc.To(a),i}),ex.apply(this,arguments)}function AN(n){return nw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function yL(n){const e=We(n);return We(We(e.localStore).persistence).ds()}function vL(n,e,t,r){return tx.apply(this,arguments)}function tx(){return tx=(0,we.Z)(function*(n,e,t,r){const i=We(n);if(i.Lc)Be("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const a=yield sN(i.localStore),l=cp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield zc(i,a,l);break}case"rejected":yield i_(i.localStore,e,!0),d_(i,e,r);break;default:lt()}}),tx.apply(this,arguments)}function wL(n,e,t){return nx.apply(this,arguments)}function nx(){return nx=(0,we.Z)(function*(n,e,t){const r=rx(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield iN(r.localStore,i),l=yield r_(r.localStore,a);yield OA(r,AN(a),l.targetId,!1),JC(r.remoteStore,l)}for(const i of t)r.Nc.has(i)&&(yield i_(r.localStore,i,!1).then(()=>{Sw(r.remoteStore,i),d_(r,i)}).catch(Ep))}}),nx.apply(this,arguments)}function rx(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aL.bind(null,e),e.Dc.To=Q1.bind(null,e.eventManager),e.Dc.qc=J1.bind(null,e.eventManager),e}function ix(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lL.bind(null,e),e}class xN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.O=Tw(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return eN(this.persistence,new XP,e.initialUser,this.O)}jc(e){return new x1(iA.bi,this.O)}Gc(e){return new uN}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class RN extends xN{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield function w1(n){return eA.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield ix(r.zc.syncEngine),yield o_(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return eN(this.persistence,new XP,e.initialUser,this.O)}Qc(e){return new u1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=YS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?co.withCacheSize(this.cacheSizeBytes):co.DEFAULT;return new ZS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cN(),QC(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new uN}}class IL extends RN{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof uA&&(r.sharedClientState.syncEngine={hr:mL.bind(null,i),lr:vL.bind(null,i),dr:wL.bind(null,i),ds:yL.bind(null,i),ar:gL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var a=(0,we.Z)(function*(l){yield function _L(n,e){return XA.apply(this,arguments)}(r.zc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}Gc(e){const t=cN();if(!uA.Vt(t))throw new Me(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=YS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class sx{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>TN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=hL.bind(null,r.syncEngine),yield TA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Y1}createDatastore(e){const t=Tw(e.databaseInfo.databaseId),r=new k1(e.databaseInfo);return new F1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>TN(this.syncEngine,h,0),l=lN.Vt()?new lN:new P1,new V1(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,g,w){const D=new rL(r,i,a,l,h,g);return w&&(D.Lc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=We(t);Be("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield s_(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function PN(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class eb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class CL{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Sn,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,we.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const a=yield e.nu(i);return new X1(JSON.parse(a),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,we.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,we.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class bL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(a,l){const h=We(a),g=fp(h.O)+"/documents",w={documents:l.map(V=>No(h.O,V))},D=yield h.Lr("BatchGetDocuments",g,w),S=new Map;D.forEach(V=>{const Z=function kP(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=Mo(t,r.found.name),a=ti(r.found.updateTime),l=new zi({mapValue:{fields:r.found.fields}});return sr.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=Mo(t,r.missing),a=ti(r.readTime);return sr.newNoDocument(i,a)}(n,e):lt()}(h.O,V);S.set(Z.key.toString(),Z)});const M=[];return l.forEach(V=>{const Z=S.get(V.toString());Dt(!!Z),M.push(Z)}),M}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new Ms(a,e.precondition(a)))}),yield(r=(0,we.Z)(function*(i,a){const l=We(i),h=fp(l.O)+"/documents",g={writes:a.map(w=>Qm(l.O,w))};yield l.Mr("Commit",h,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ln.updateTime(t):ln.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Me(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ln.updateTime(t)}return ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class TL{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new lA(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,we.Z)(function*(){const t=new bL(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.uu(a)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!ml(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!fw(t)}return!1}}class DL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jr.UNAUTHENTICATED,this.clientId=Kv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,we.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=u_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function NN(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(a){r.isEqual(a)||(yield tN(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ox.apply(this,arguments)}function MN(n,e){return ax.apply(this,arguments)}function ax(){return ax=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ux(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>_N(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>_N(e.remoteStore,a)),n.onlineComponents=e}),ax.apply(this,arguments)}function ux(n){return lx.apply(this,arguments)}function lx(){return lx=(0,we.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield NN(n,new xN)),n.offlineComponents}),lx.apply(this,arguments)}function tb(n){return cx.apply(this,arguments)}function cx(){return cx=(0,we.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield MN(n,new sx)),n.onlineComponents}),cx.apply(this,arguments)}function kN(n){return ux(n).then(e=>e.persistence)}function dx(n){return ux(n).then(e=>e.localStore)}function ON(n){return tb(n).then(e=>e.remoteStore)}function hx(n){return tb(n).then(e=>e.syncEngine)}function h_(n){return fx.apply(this,arguments)}function fx(){return fx=(0,we.Z)(function*(n){const e=yield tb(n),t=e.eventManager;return t.onListen=iL.bind(null,e.syncEngine),t.onUnlisten=sL.bind(null,e.syncEngine),t}),fx.apply(this,arguments)}function LN(n,e,t={}){const r=new Sn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,a,l,h,g){const w=new eb({next:S=>{a.enqueueAndForget(()=>RA(i,D));const M=S.docs.has(l);!M&&S.fromCache?g.reject(new Me(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&h&&"server"===h.source?g.reject(new Me(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),D=new MA(tp(l.path),w,{includeMetadataChanges:!0,uc:!0});return AA(i,D)}(yield h_(n),n.asyncQueue,e,t,r)})),r.promise}function FN(n,e,t={}){const r=new Sn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,a,l,h,g){const w=new eb({next:S=>{a.enqueueAndForget(()=>RA(i,D)),S.fromCache&&"server"===h.source?g.reject(new Me(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),D=new MA(l,w,{includeMetadataChanges:!0,uc:!0});return AA(i,D)}(yield h_(n),n.asyncQueue,e,t,r)})),r.promise}const UN=new Map;function px(n,e,t){if(!t)throw new Me(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VN(n,e,t,r){if(!0===e&&!0===r)throw new Me(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BN(n){if(!Xe.isDocumentKey(n))throw new Me(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jN(n){if(Xe.isDocumentKey(n))throw new Me(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nb(n);throw new Me(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $N(n,e){if(e<=0)throw new Me(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class HN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Aw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HN({}),this._settingsFrozen=!1,e instanceof Oc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Me(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(i.options.projectId)}(e))}get app(){if(!this._app)throw new Me(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new zv;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new vS(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=UN.get(e);t&&(Be("ComponentProvider","Removing Datastore"),UN.delete(e),t.terminate())}(this),Promise.resolve()}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class gs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class Tl extends gs{constructor(e,t,r){super(e,t,tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new Xe(e))}withConverter(e){return new Tl(this.firestore,e,this._path)}}function GN(n,e,...t){if(n=(0,k.m9)(n),px("collection","path",e),n instanceof Aw){const r=tn.fromString(e,...t);return jN(r),new Tl(n,null,r)}{if(!(n instanceof ar||n instanceof Tl))throw new Me(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return jN(r),new Tl(n.firestore,null,r)}}function rb(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=Kv.R()),px("doc","path",e),n instanceof Aw){const r=tn.fromString(e,...t);return BN(r),new ar(n,null,new Xe(r))}{if(!(n instanceof ar||n instanceof Tl))throw new Me(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return BN(r),new ar(n.firestore,n instanceof Tl?n.converter:null,new Xe(r))}}function qN(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof ar||n instanceof Tl)&&(e instanceof ar||e instanceof Tl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function WN(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof gs&&e instanceof gs&&n.firestore===e.firestore&&jm(n._query,e._query)&&n.converter===e.converter}class FL{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new lA(this,"async_queue_retry"),this.yu=()=>{const t=QC();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=QC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=QC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Sn;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,we.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!x(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=SA.createAndSchedule(this,e,t,r,a=>this.Tu(a));return this.du.push(i),i}pu(){this._u&&lt()}verifyOperationInProgress(){}Au(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function gx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class UL{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mr extends Aw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new FL,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||zN(this),this._firestoreClient.terminate()}}function ni(n){return n._firestoreClient||zN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new oC(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new DL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function KN(n,e,t){const r=new Sn;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield NN(n,t),yield MN(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ge.FAILED_PRECONDITION||a.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function ZN(n){if(n._initialized||n._terminated)throw new Me(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ei(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dl(kr.fromBase64String(e))}catch(t){throw new Me(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dl(kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ip{constructor(e){this._methodName=e}}class ib{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const KL=/^__.*__$/;class ZL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new wl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ap(e,this.data,t,this.fieldTransforms)}}class YN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class sb{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new sb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return ub(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(QN(this.Vu)&&KL.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class YL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||Tw(e)}Fu(e,t,r,i=!1){return new sb({Vu:e,methodName:t,$u:r,path:ei.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Cp(n){const e=n._freezeSettings(),t=Tw(n._databaseId);return new YL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ob(n,e,t,r,i,a={}){const l=n.Fu(a.merge||a.mergeFields?2:0,e,t,i);vx("Data must be an object, but it was:",l,r);const h=eM(r,l);let g,w;if(a.merge)g=new sh(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const M=wx(e,S,t);if(!l.contains(M))throw new Me(ge.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);nM(D,M)||D.push(M)}g=new sh(D),w=l.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,w=l.fieldTransforms;return new ZL(new zi(h),g,w)}class xw extends Ip{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xw}}function JN(n,e,t){return new sb({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class mx extends Ip{_toFieldTransform(e){return new op(e.path,new $c)}isEqual(e){return e instanceof mx}}class QL extends Ip{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=JN(this,e,!0),r=this.Bu.map(a=>bp(a,t)),i=new dh(r);return new op(e.path,i)}isEqual(e){return this===e}}class JL extends Ip{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=JN(this,e,!0),r=this.Bu.map(a=>bp(a,t)),i=new hh(r);return new op(e.path,i)}isEqual(e){return this===e}}class XL extends Ip{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new vl(e.O,ow(e.O,this.Lu));return new op(e.path,t)}isEqual(e){return this===e}}function _x(n,e,t,r){const i=n.Fu(1,e,t);vx("Data must be an object, but it was:",i,r);const a=[],l=zi.empty();cu(r,(g,w)=>{const D=ab(e,g,t);w=(0,k.m9)(w);const S=i.xu(D);if(w instanceof xw)a.push(D);else{const M=bp(w,S);null!=M&&(a.push(D),l.set(D,M))}});const h=new sh(a);return new YN(l,h,i.fieldTransforms)}function yx(n,e,t,r,i,a){const l=n.Fu(1,e,t),h=[wx(e,r,t)],g=[i];if(a.length%2!=0)throw new Me(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<a.length;M+=2)h.push(wx(e,a[M])),g.push(a[M+1]);const w=[],D=zi.empty();for(let M=h.length-1;M>=0;--M)if(!nM(w,h[M])){const V=h[M];let Z=g[M];Z=(0,k.m9)(Z);const Ce=l.xu(V);if(Z instanceof xw)w.push(V);else{const ke=bp(Z,Ce);null!=ke&&(w.push(V),D.set(V,ke))}}const S=new sh(w);return new YN(D,S,l.fieldTransforms)}function XN(n,e,t,r=!1){return bp(t,n.Fu(r?4:3,e))}function bp(n,e){if(tM(n=(0,k.m9)(n)))return vx("Unsupported field value:",e,n),eM(n,e);if(n instanceof Ip)return function(t,r){if(!QN(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=bp(l,r.ku(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ow(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Xr.fromDate(t);return{timestampValue:Wm(r.O,i)}}if(t instanceof Xr){const i=new Xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wm(r.O,i)}}if(t instanceof ib)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dl)return{bytesValue:RC(r.O,t._byteString)};if(t instanceof ar){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.Ou(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${nb(t)}`)}(n,e)}function eM(n,e){const t={};return Zv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cu(n,(r,i)=>{const a=bp(i,e.Du(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function tM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xr||n instanceof ib||n instanceof Dl||n instanceof ar||n instanceof Ip)}function vx(n,e,t){if(!tM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=nb(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function wx(n,e,t){if((e=(0,k.m9)(e))instanceof Kc)return e._internalPath;if("string"==typeof e)return ab(n,e);throw ub("Field path arguments must be of type string or ",n,!1,void 0,t)}const eF=new RegExp("[~\\*/\\[\\]]");function ab(n,e,t){if(e.search(eF)>=0)throw ub(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kc(...e.split("."))._internalPath}catch(r){throw ub(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ub(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new Me(ge.INVALID_ARGUMENT,h+n+g)}function nM(n,e){return n.some(t=>t.isEqual(e))}class Rw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tF extends Rw{data(){return super.data()}}function lb(n,e){return"string"==typeof e?ab(n,e):e instanceof Kc?e._internalPath:e._delegate._internalPath}class Tp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zc extends Rw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Pw extends Zc{data(e={}){return super.data(e)}}class Ch{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Pw(this._firestore,this._userDataWriter,r.key,r,new Tp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Pw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Tp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new Pw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Tp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,w=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:nF(l.type),doc:h,oldIndex:g,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function rM(n,e){return n instanceof Zc&&e instanceof Zc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ch&&e instanceof Ch&&n._firestore===e._firestore&&WN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function iM(n){if(iw(n)&&0===n.explicitOrderBy.length)throw new Me(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nw{}function bh(n,...e){for(const t of e)n=t._apply(n);return n}class rF extends Nw{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=Cp(e.firestore),r=function(i,a,l,h,g,w,D){let S;if(g.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){cM(D,w);const V=[];for(const Z of D)V.push(lM(h,i,Z));S={arrayValue:{values:V}}}else S=lM(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||cM(D,w),S=XN(l,"where",D,"in"===w||"not-in"===w);const M=xi.create(g,w,S);return function(V,Z){if(Z.S()){const ke=mC(V);if(null!==ke&&!ke.isEqual(Z.field))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ke.toString()}' and '${Z.field.toString()}'`);const gt=gC(V);null!==gt&&dM(0,Z.field,gt)}const Ce=function(ke,gt){for(const wt of ke.filters)if(gt.indexOf(wt.op)>=0)return wt.op;return null}(V,function(ke){switch(ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==Ce)throw new Me(ge.INVALID_ARGUMENT,Ce===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${Ce.toString()}' filters.`)}(i,M),M}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new gs(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new _l(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class sF extends Nw{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new jc(i,a);return function(h,g){if(null===gC(h)){const w=mC(h);null!==w&&dM(0,w,g.field)}}(r,l),l}(e._query,this.Uu,this.Gu);return new gs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new _l(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class sM extends Nw{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new gs(e.firestore,e.converter,rp(e._query,this.ju,this.Qu))}}class oM extends Nw{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=uM(e,this.type,this.Wu,this.zu);return new gs(e.firestore,e.converter,(i=t,new _l((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class aM extends Nw{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=uM(e,this.type,this.Wu,this.zu);return new gs(e.firestore,e.converter,(i=t,new _l((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function uM(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof Rw)return function(i,a,l,h,g){if(!h)throw new Me(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of np(i))if(D.field.isKeyField())w.push(Om(a,h.key));else{const S=h.data.field(D.field);if(Nm(S))throw new Me(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const M=D.field.canonicalString();throw new Me(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}w.push(S)}return new Bc(w,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Cp(n.firestore);return function(a,l,h,g,w,D){const S=a.explicitOrderBy;if(w.length>S.length)throw new Me(ge.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let V=0;V<w.length;V++){const Z=w[V];if(S[V].field.isKeyField()){if("string"!=typeof Z)throw new Me(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof Z}`);if(!_C(a)&&-1!==Z.indexOf("/"))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${Z}' contains a slash.`);const Ce=a.path.child(tn.fromString(Z));if(!Xe.isDocumentKey(Ce))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Ce}' is not because it contains an odd number of segments.`);const ke=new Xe(Ce);M.push(Om(l,ke))}else{const Ce=XN(h,g,Z);M.push(Ce)}}return new Bc(M,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function lM(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Me(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_C(e)&&-1!==t.indexOf("/"))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!Xe.isDocumentKey(r))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Om(n,new Xe(r))}if(t instanceof ar)return Om(n,t._key);throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nb(t)}.`)}function cM(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function dM(n,e,t){if(!t.isEqual(e))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Ex{convertValue(e,t="none"){switch(Lc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return cu(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new ib(pr(e.latitude),pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=sC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const t=du(e);return new Xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);Dt(Ew(r));const i=new Oc(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||Mr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function cb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class fF extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}class hM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cp(e)}set(e,t,r){this._verifyNotCommitted();const i=Th(e,this._firestore),a=cb(i.converter,t,r),l=ob(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,ln.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Th(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Kc?yx(this._dataReader,"WriteBatch.update",a._key,t,r,i):_x(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Th(e,this._firestore);return this._mutations=this._mutations.concat(new Hc(t._key,ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Th(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Me(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Dp extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function fM(n,e,t){n=rn(n,ar);const r=rn(n.firestore,mr),i=cb(n.converter,e,t);return f_(r,[ob(Cp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ln.none())])}function pM(n,e,t,...r){n=rn(n,ar);const i=rn(n.firestore,mr),a=Cp(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Kc?yx(a,"updateDoc",n._key,e,t,r):_x(a,"updateDoc",n._key,e),f_(i,[l.toMutation(n._key,ln.exists(!0))])}function gM(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||gx(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(gx(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,w,D;if(n instanceof ar)w=rn(n.firestore,mr),D=tp(n._key.path),g={next:S=>{e[l]&&e[l](Ix(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=rn(n,gs);w=rn(S.firestore,mr),D=S._query;const M=new Dp(w);g={next:V=>{e[l]&&e[l](new Ch(w,M,S,V))},error:e[l+1],complete:e[l+2]},iM(n._query)}return function(S,M,V,Z){const Ce=new eb(Z),ke=new MA(M,Ce,V);return S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return AA(yield h_(S),ke)})),()=>{Ce.Jc(),S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return RA(yield h_(S),ke)}))}}(ni(w),D,h,g)}function f_(n,e){return function(t,r){const i=new Sn;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function oL(n,e,t){return UA.apply(this,arguments)}(yield hx(t),r,i)})),i.promise}(ni(n),e)}function Ix(n,e,t){const r=t.docs.get(e._key),i=new Dp(n);return new Zc(n,i,e._key,r,new Tp(t.hasPendingWrites,t.fromCache),e.converter)}class CF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cp(e)}get(e){const t=Th(e,this._firestore),r=new fF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const a=i[0];if(a.isFoundDocument())return new Rw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Rw(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=Th(e,this._firestore),a=cb(i.converter,t,r),l=ob(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Th(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Kc?yx(this._dataReader,"Transaction.update",a._key,t,r,i):_x(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Th(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Th(e,this._firestore),r=new Dp(this._firestore);return super.get(e).then(i=>new Zc(this._firestore,r,t._key,i._document,new Tp(!1,!1),t.converter))}}function Cx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function _M(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function yM(){if(!function ES(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Nc=kn.SDK_VERSION,(0,kn._registerComponent)(new Xs.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new mr(i,new _S(t.getProvider("auth-internal")),new Rm(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,kn.registerVersion)(ih,"3.4.5",n),(0,kn.registerVersion)(ih,"3.4.5","esm2017")}();class Mw{constructor(e){this._delegate=e}static fromBase64String(e){return yM(),new Mw(Dl.fromBase64String(e))}static fromUint8Array(e){return _M(),new Mw(Dl.fromUint8Array(e))}toBase64(){return yM(),this._delegate.toBase64()}toUint8Array(){return _M(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bx(n){return function NF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class MF{enableIndexedDbPersistence(e,t){return function BL(n,e){ZN(n=rn(n,mr));const t=ni(n),r=n._freezeSettings(),i=new sx;return KN(t,i,new RN(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function jL(n){ZN(n=rn(n,mr));const e=ni(n),t=n._freezeSettings(),r=new sx;return KN(e,r,new IL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $L(n){if(n._initialized&&!n._terminated)throw new Me(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!E.Vt())return Promise.resolve();const i=r+"main";yield E.delete(i)}),function(r){return t.apply(this,arguments)})(YS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class vM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Yf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function OL(n,e,t,r={}){var i;const a=(n=rn(n,Aw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Yf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Jr.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Me(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Jr(g)}n._authCredentials=new Qf(new nC(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function GL(n){return function SL(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield kN(n),t=yield ON(n);return e.setNetworkEnabled(!0),function(r){const i=We(r);return i.Ko.delete(0),Dw(i)}(t)}))}(ni(n=rn(n,mr)))}(this._delegate)}disableNetwork(){return function qL(n){return function AL(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield kN(n),t=yield ON(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const a=We(i);a.Ko.add(0),yield s_(a),a.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ni(n=rn(n,mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function HL(n){return function(e){const t=new Sn;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function cL(n,e){return HA.apply(this,arguments)}(yield hx(e),t)})),t.promise}(ni(n=rn(n,mr)))}(this._delegate)}onSnapshotsInSync(e){return function IF(n,e){return function PL(n,e){const t=new eb(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield h_(n),i=t,We(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield h_(n),i=t,void We(r).Zo.delete(i);var r,i}))}}(ni(n=rn(n,mr)),gx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new p_(this,GN(this._delegate,e))}catch(t){throw ks(t,"collection()","Firestore.collection()")}}doc(e){try{return new fa(this,rb(this._delegate,e))}catch(t){throw ks(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Os(this,function LL(n,e){if(n=rn(n,Aw),px("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gs(n,null,(t=e,new _l(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ks(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function bF(n,e){return function NL(n,e){const t=new Sn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const r=yield(i=n,tb(i).then(a=>a.datastore));var i;new TL(n.asyncQueue,r,e,t).run()})),t.promise}(ni(n=rn(n,mr)),t=>e(new CF(n,t)))}(this._delegate,t=>e(new wM(this,t)))}batch(){return ni(this._delegate),new EM(new hM(this._delegate,e=>f_(this._delegate,e)))}loadBundle(e){return function WL(n,e){const t=ni(n=rn(n,mr)),r=new UL;return function ML(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,w){if(g instanceof Uint8Array)return PN(g,w);if(g instanceof ArrayBuffer)return PN(new Uint8Array(g),w);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new CL(g,l);var g}(t,Tw(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function EL(n,e,t){const r=We(n);var i;(i=(0,we.Z)(function*(a,l,h){try{const g=yield l.getMetadata();if(yield function(M,V){const Z=We(M),Ce=ti(V.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",ke=>Z.Kn.getBundleMetadata(ke,V.id)).then(ke=>!!ke&&ke.createTime.compareTo(Ce)>=0)}(a.localStore,g))return yield l.close(),void h._completeWith((M=g,{taskState:"Success",documentsLoaded:M.totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}));h._updateProgress(wN(g));const w=new eL(g,a.localStore,l.O);let D=yield l.Kc();for(;D;){const M=yield w.lc(D);M&&h._updateProgress(M),D=yield l.Kc()}const S=yield w.complete();yield zc(a,S.ws,void 0),yield function(M,V){const Z=We(M);return Z.persistence.runTransaction("Save bundle","readwrite",Ce=>Z.Kn.saveBundleMetadata(Ce,V))}(a.localStore,g),h._completeWith(S.progress)}catch(g){Yf("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g)}var M}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield hx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zL(n,e){return function kL(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=We(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Kn.getNamedQuery(a,r))}(yield dx(n),e)}))}(ni(n=rn(n,mr)),e).then(t=>t?new gs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Os(this,t):null)}}class db extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mw(new Dl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fa.forKey(t,this.firestore,null)}}class wM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new db(e)}get(e){const t=Ap(e);return this._delegate.get(t).then(r=>new kw(this._firestore,new Zc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ap(e);return r?(Cx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ap(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}}class EM{constructor(e){this._delegate=e}set(e,t,r){const i=Ap(e);return r?(Cx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ap(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Sp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Pw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ow(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Sp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Sp(e,new db(e),t),i.set(t,a)),a}}Sp.INSTANCES=new WeakMap;class fa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new db(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fa(t,new ar(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new fa(t,new ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new p_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new p_(this.firestore,GN(this._delegate,e))}catch(t){throw ks(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof ar&&qN(this._delegate,e)}set(e,t){t=Cx("DocumentReference.set",t);try{return t?fM(this._delegate,e,t):fM(this._delegate,e)}catch(r){throw ks(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?pM(this._delegate,e):pM(this._delegate,e,t,...r)}catch(i){throw ks(i,"updateDoc()","DocumentReference.update()")}}delete(){return function wF(n){return f_(rn(n.firestore,mr),[new Hc(n._key,ln.none())])}(this._delegate)}onSnapshot(...e){const t=IM(e),r=CM(e,i=>new kw(this.firestore,new Zc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function gF(n){n=rn(n,ar);const e=rn(n.firestore,mr),t=ni(e),r=new Dp(e);return function xL(n,e){const t=new Sn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,a,l){try{const h=yield function(g,w){const D=We(g);return D.persistence.runTransaction("read document","readonly",S=>D.Us.ys(S,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Me(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=u_(h,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield dx(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Zc(e,r,n._key,i,new Tp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function mF(n){n=rn(n,ar);const e=rn(n.firestore,mr);return LN(ni(e),n._key,{source:"server"}).then(t=>Ix(e,n,t))}(this._delegate):function pF(n){n=rn(n,ar);const e=rn(n.firestore,mr);return LN(ni(e),n._key).then(t=>Ix(e,n,t))}(this._delegate),t.then(r=>new kw(this.firestore,new Zc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fa(this.firestore,this._delegate.withConverter(e?Sp.getInstance(this.firestore,e):null))}}function ks(n,e,t){return n.message=n.message.replace(e,t),n}function IM(n){for(const e of n)if("object"==typeof e&&!bx(e))return e;return{}}function CM(n,e){var t,r;let i;return i=bx(n[0])?n[0]:bx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class kw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return rM(this._delegate,e._delegate)}}class Ow extends kw{data(e){const t=this._delegate.data(e);return function mS(n,e){n||lt()}(void 0!==t),t}}class Os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new db(e)}where(e,t,r){try{return new Os(this.firestore,bh(this._delegate,function iF(n,e,t){const r=e,i=lb("where",n);return new rF(i,r,t)}(e,t,r)))}catch(i){throw ks(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Os(this.firestore,bh(this._delegate,function oF(n,e="asc"){const t=e,r=lb("orderBy",n);return new sF(r,t)}(e,t)))}catch(r){throw ks(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Os(this.firestore,bh(this._delegate,function aF(n){return $N("limit",n),new sM("limit",n,"F")}(e)))}catch(t){throw ks(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Os(this.firestore,bh(this._delegate,function uF(n){return $N("limitToLast",n),new sM("limitToLast",n,"L")}(e)))}catch(t){throw ks(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Os(this.firestore,bh(this._delegate,function lF(...n){return new oM("startAt",n,!0)}(...e)))}catch(t){throw ks(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Os(this.firestore,bh(this._delegate,function cF(...n){return new oM("startAfter",n,!1)}(...e)))}catch(t){throw ks(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Os(this.firestore,bh(this._delegate,function dF(...n){return new aM("endBefore",n,!1)}(...e)))}catch(t){throw ks(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Os(this.firestore,bh(this._delegate,function hF(...n){return new aM("endAt",n,!0)}(...e)))}catch(t){throw ks(t,"endAt()","Query.endAt()")}}isEqual(e){return WN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function yF(n){n=rn(n,gs);const e=rn(n.firestore,mr),t=ni(e),r=new Dp(e);return function RL(n,e){const t=new Sn;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,a,l){try{const h=yield KC(i,a,!0),g=new CN(a,h.Ks),w=g.Ic(h.documents),D=g.applyChanges(w,!1);l.resolve(D.snapshot)}catch(h){const g=u_(h,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield dx(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ch(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function vF(n){n=rn(n,gs);const e=rn(n.firestore,mr),t=ni(e),r=new Dp(e);return FN(t,n._query,{source:"server"}).then(i=>new Ch(e,r,n,i))}(this._delegate):function _F(n){n=rn(n,gs);const e=rn(n.firestore,mr),t=ni(e),r=new Dp(e);return iM(n._query),FN(t,n._query).then(i=>new Ch(e,r,n,i))}(this._delegate),t.then(r=>new Tx(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=IM(e),r=CM(e,i=>new Tx(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gM(this._delegate,t,r)}withConverter(e){return new Os(this.firestore,this._delegate.withConverter(e?Sp.getInstance(this.firestore,e):null))}}class OF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ow(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Tx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Os(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ow(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new OF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ow(this._firestore,r))})}isEqual(e){return rM(this._delegate,e._delegate)}}class p_ extends Os{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fa(this.firestore,e):null}doc(e){try{return new fa(this.firestore,void 0===e?rb(this._delegate):rb(this._delegate,e))}catch(t){throw ks(t,"doc()","CollectionReference.doc()")}}add(e){return function EF(n,e){const t=rn(n.firestore,mr),r=rb(n),i=cb(n.converter,e);return f_(t,[ob(Cp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ln.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new fa(this.firestore,t))}isEqual(e){return qN(this._delegate,e._delegate)}withConverter(e){return new p_(this.firestore,this._delegate.withConverter(e?Sp.getInstance(this.firestore,e):null))}}function Ap(n){return rn(n,ar)}class Dx{constructor(...e){this._delegate=new Kc(...e)}static documentId(){return new Dx(ei.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function DF(){return new mx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xp(e)}static delete(){const e=function TF(){return new xw("deleteField")}();return e._methodName="FieldValue.delete",new xp(e)}static arrayUnion(...e){const t=function SF(...n){return new QL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new xp(t)}static arrayRemove(...e){const t=function AF(...n){return new JL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new xp(t)}static increment(e){const t=function xF(n){return new XL("increment",n)}(e);return t._methodName="FieldValue.increment",new xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LF={Firestore:vM,GeoPoint:ib,Timestamp:Xr,Blob:Mw,Transaction:wM,WriteBatch:EM,DocumentReference:fa,DocumentSnapshot:kw,Query:Os,QueryDocumentSnapshot:Ow,QuerySnapshot:Tx,CollectionReference:p_,FieldPath:Dx,FieldValue:xp,setLogLevel:function kF(n){!function tC(n){lu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function bM(n,e){return function VF(n,e=Fg.z){return new $n.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Sx(n,e){return bM(n,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function hb(n,e){return Sx(n,e).pipe(Eo(void 0),Zg(),(0,Et.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const g=i.find(D=>D.doc.ref.isEqual(l.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function TM(n,e,t){return hb(n,t).pipe(vi((r,i)=>function jF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function $F(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ax(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ax(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ax(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),RD(),(0,Et.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Ax(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function DM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function UF(n){(function FF(n,e){n.INTERNAL.registerComponent(new Xs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},LF)))})(n,(e,t)=>new vM(e,t,new MF)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(Od.Z);class SM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=hb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Eo(void 0),Zg(),er(([r,i])=>i.length>0||!r),(0,Et.U)(([r,i])=>i),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(vi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=DM(e);return TM(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Sx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),un.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new AM(this.ref.doc(e),this.afs)}}class AM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=PM(r,t);return new SM(i,a,this.afs)}snapshotChanges(){return function BF(n,e){return bM(n,e).pipe(Eo(void 0),Zg(),(0,Et.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(un.iC)}}class HF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),er(t=>t.length>0),un.iC):hb(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(vi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=DM(e);return TM(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Sx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),un.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(un.iC)}}const xM=new _.OlP("angularfire2.enableFirestorePersistence"),RM=new _.OlP("angularfire2.firestore.persistenceSettings"),GF=new _.OlP("angularfire2.firestore.settings"),qF=new _.OlP("angularfire2.firestore.use-emulator");function PM(n,e=(t=>t)){return{query:e(n),ref:n}}let NM=(()=>{class n{constructor(t,r,i,a,l,h,g,w,D,S,M,V,Z,Ce,ke,gt,wt){this.schedulers=g;const Ct=(0,Vr.on)(t,h,r),ft=D;S&&Lg(Ct,h,M,Z,Ce,ke,V,gt),[this.firestore,this.persistenceEnabled$]=(0,Vr.cc)(`${Ct.name}.firestore`,"AngularFirestore",Ct.name,()=>{const vn=h.runOutsideAngular(()=>Ct.firestore());if(a&&vn.settings(a),ft&&vn.useEmulator(...ft),i&&!Aa(l)){const Oi=()=>{try{return(0,En.D)(vn.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Oh){return"undefined"!=typeof console&&console.warn(Oh),et(!1)}};return[vn,h.runOutsideAngular(Oi)]}return[vn,et(!1)]},[a,ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=PM(i,r),h=this.schedulers.ngZone.run(()=>a);return new SM(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new HF(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new AM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Vr.Dh),_.LFG(Vr.xv,8),_.LFG(xM,8),_.LFG(GF,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(un.HU),_.LFG(RM,8),_.LFG(qF,8),_.LFG(kd,8),_.LFG(by,8),_.LFG(Ty,8),_.LFG(_f,8),_.LFG(cE,8),_.LFG(Dy,8),_.LFG(Og,8),_.LFG(cs,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WF=(()=>{class n{constructor(){Md.Z.registerVersion("angularfire",un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:xM,useValue:!0},{provide:RM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[NM]}),n})();var zF=O(5032);const MM="@firebase/database";let xx="";function OM(n){xx=n}class YF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class QF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const LM=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new YF(e)}}catch(e){}return new QF},Rp=LM("localStorage"),Rx=LM("sessionStorage"),g_=new Rs.Yd("@firebase/database"),FM=function(){let n=1;return function(){return n++}}(),UM=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},Lw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Lw.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let Pp=null,VM=!0;const BM=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(g_.logLevel=Rs.in.VERBOSE,Pp=g_.log.bind(g_),e&&Rx.set("logging_enabled",!0)):"function"==typeof n?Pp=n:(Pp=null,Rx.remove("logging_enabled"))},Mi=function(...n){if(!0===VM&&(VM=!1,null===Pp&&!0===Rx.get("logging_enabled")&&BM(!0)),Pp){const e=Lw.apply(null,n);Pp(e)}},Fw=function(n){return function(...e){Mi(n,...e)}},Px=function(...n){const e="FIREBASE INTERNAL ERROR: "+Lw(...n);g_.error(e)},Sl=function(...n){const e=`FIREBASE FATAL ERROR: ${Lw(...n)}`;throw g_.error(e),new Error(e)},Ls=function(...n){const e="FIREBASE WARNING: "+Lw(...n);g_.warn(e)},fb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Yc="[MIN_NAME]",Al="[MAX_NAME]",Np=function(n,e){if(n===e)return 0;if(n===Yc||e===Al)return-1;if(e===Yc||n===Al)return 1;{const t=pb(n),r=pb(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},eU=function(n,e){return n===e?0:n<e?-1:1},Uw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},Nx=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=Nx(n[e[r]]);return t+="}",t},jM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ki(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const $M=function(n){(0,k.hu)(!fb(n),"Invalid JSON number");const r=1023;let i,a,l,h,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(g=52;g;g-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(g=0;g<64;g+=8){let M=parseInt(D.substr(g,8),2).toString(16);1===M.length&&(M="0"+M),S+=M}return S.toLowerCase()},iU=new RegExp("^-?(0*)\\d{1,10}$"),HM=-2147483648,Mx=2147483647,pb=function(n){if(iU.test(n)){const e=Number(n);if(e>=HM&&e<=Mx)return e}return null},m_=function(n){try{n()}catch(e){setTimeout(()=>{throw Ls("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Vw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class oU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class aU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Mi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ls(e)}}let Bw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const KM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YM="websocket",QM="long_polling";class Ox{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function JM(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===YM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==QM)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function lU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ki(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class cU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const Lx={},Fx={};function Ux(n){const e=n.toString();return Lx[e]||(Lx[e]=new cU),Lx[e]}class hU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&m_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class __{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fw(e),this.stats_=Ux(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),JM(t,QM,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new hU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vx((...a)=>{const[l,h,g,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&KM.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){__.forceAllow_=!0}static forceDisallow(){__.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!__.forceAllow_&&(__.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=jM(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Vx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=FM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Vx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Mi("frame writing exception"),h.stack&&Mi(h.stack),Mi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Mi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Mi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let jw=null;"undefined"!=typeof MozWebSocket?jw=MozWebSocket:"undefined"!=typeof WebSocket&&(jw=WebSocket);let $w=(()=>{class n{constructor(t,r,i,a,l,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fw(this.connId),this.stats_=Ux(r),this.connURL=n.connectionURL_(r,h,g,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const l={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&KM.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),a&&(l.ac=a),JM(t,YM,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rp.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${xx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new jw(this.connURL,[],a)}else this.mySock=new jw(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==jw&&!n.forceDisallow_}static previouslyFailed(){return Rp.isInMemoryStorage||!0===Rp.get("previous_websocket_failure")}markConnectionHealthy(){Rp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=jM(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Bx{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[__,$w]}initTransports_(e){const t=$w&&$w.isAvailable();let r=t&&!$w.previouslyFailed();if(e.webSocketOnly&&(t||Ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[$w];else{const i=this.transports_=[];for(const a of Bx.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class dk{constructor(e,t,r,i,a,l,h,g,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=g,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fw("c:"+this.id+":"),this.transportManager_=new Bx(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Vw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Uw("t",e),r=Uw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Uw("t",e),r=Uw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Uw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Px("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Px("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Vw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class hk{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class fk{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class mb extends fk{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mb}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new bn("")}function Gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Dh(n){return n.pieces_.length-n.pieceNum_}function Ln(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bn(n.pieces_,e)}function $x(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Hw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function mk(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bn(e,0)}function _r(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new bn(t,0)}function qt(n){return n.pieceNum_>=n.pieces_.length}function Fs(n,e){const t=Gt(n),r=Gt(e);if(null===t)return e;if(t===r)return Fs(Ln(n),Ln(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function kU(n,e){const t=Hw(n,0),r=Hw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Np(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Hx(n,e){if(Dh(n)!==Dh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function pa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Dh(n)>Dh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class OU{constructor(e,t){this.errorPrefix_=t,this.parts_=Hw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);_k(this)}}function _k(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Mp(n))}function Mp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Gx extends fk{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Gx}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Gw=1e3;let yb,kp=(()=>{class n extends hk{constructor(t,r,i,a,l,h,g,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=Fw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&mb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const g=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const w=g.d,D=g.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Px("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Gw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Gw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,w=null;const D=function(){w?w.close():(g=!0,a())};t.realtime_={close:D,sendRequest:function(V){(0,k.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(V)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,Z]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);g?Mi("getToken() completed but was canceled"):(Mi("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=Z&&Z.token,w=new dk(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Ce=>{Ls(Ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),g||(t.repoInfo_.nodeAdmin&&Ls(V),D())}}})()}interrupt(t){Mi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Mi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Gw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>Nx(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new bn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Mi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Mi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+xx.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=mb.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Kt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Kt(e,t)}}class _b{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Kt(Yc,e),i=new Kt(Yc,t);return 0!==this.compare(r,i)}minPost(){return Kt.MIN}}class wk extends _b{static get __EMPTY_NODE(){return yb}static set __EMPTY_NODE(e){yb=e}compare(e,t){return Np(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Kt.MIN}maxPost(){return new Kt(Al,yb)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Kt(e,yb)}toString(){return".key"}}const xl=new wk;class vb{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Wx,gu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ho.EMPTY_NODE,this.right=null!=l?l:ho.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ho.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ho.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ho{constructor(e,t=ho.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ho(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,gu.BLACK,null,null))}remove(e){return new ho(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new vb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new vb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new vb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new vb(this.root_,null,this.comparator_,!0,e)}}function GU(n,e){return Np(n.name,e.name)}function qx(n,e){return Np(n,e)}ho.EMPTY_NODE=new class HU{copy(e,t,r,i,a){return this}insert(e,t,r){return new gu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ek=function(n){return"number"==typeof n?"number:"+$M(n):"string:"+n},Ik=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===Wx||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===Wx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ck,bk,Tk,y_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ik(this.priorityNode_)}static set __childrenNodeConstructor(t){Ck=t}static get __childrenNodeConstructor(){return Ck}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qt(t)?this:".priority"===Gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Gt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Dh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ln(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ek(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?$M(this.value_):this.value_,this.lazyHash_=UM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Wn=new class KU extends _b{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Np(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Kt.MIN}maxPost(){return new Kt(Al,new y_("[PRIORITY-POST]",Tk))}makePost(e,t){const r=bk(e);return new Kt(t,new y_("[PRIORITY-POST]",r))}toString(){return".priority"}},ZU=Math.log(2);class YU{constructor(e){this.count=parseInt(Math.log(e+1)/ZU,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wb=function(n,e,t,r){n.sort(e);const i=function(g,w){const D=w-g;let S,M;if(0===D)return null;if(1===D)return S=n[g],M=t?t(S):S,new gu(M,S.node,gu.BLACK,null,null);{const V=parseInt(D/2,10)+g,Z=i(g,V),Ce=i(V+1,w);return S=n[V],M=t?t(S):S,new gu(M,S.node,gu.BLACK,Z,Ce)}},h=function(g){let w=null,D=null,S=n.length;const M=function(Z,Ce){const ke=S-Z,gt=S;S-=Z;const wt=i(ke+1,gt),Ct=n[ke],ft=t?t(Ct):Ct;V(new gu(ft,Ct.node,Ce,null,wt))},V=function(Z){w?(w.left=Z,w=Z):(D=Z,w=Z)};for(let Z=0;Z<g.count;++Z){const Ce=g.nextBitIsOne(),ke=Math.pow(2,g.count-(Z+1));Ce?M(ke,gu.BLACK):(M(ke,gu.BLACK),M(ke,gu.RED))}return D}(new YU(n.length));return new ho(r||e,h)};let zx;const v_={};class Qc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(v_&&Wn,"ChildrenNode.ts has not been loaded"),zx=zx||new Qc({".priority":v_},{".priority":Wn}),zx}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ho?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==xl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Kt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?wb(r,e.getCompare()):v_;const g=e.toString(),w=Object.assign({},this.indexSet_);w[g]=e;const D=Object.assign({},this.indexes_);return D[g]=h,new Qc(D,w)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===v_){if(l.isDefinedOn(e.node)){const h=[],g=t.getIterator(Kt.Wrap);let w=g.getNext();for(;w;)w.name!==e.name&&h.push(w),w=g.getNext();return h.push(e),wb(h,l.getCompare())}return v_}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new Kt(e.name,h))),g.insert(e,e.node)}});return new Qc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===v_)return i;{const a=t.get(e.name);return a?i.remove(new Kt(e.name,a)):i}});return new Qc(r,this.indexSet_)}}let qw,Vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ik(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qw||(qw=new n(new ho(qx),null,Qc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?qw:r}}getChild(t){const r=Gt(t);return null===r?this:this.getImmediateChild(r).getChild(Ln(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Kt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?qw:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Gt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Gt(t)||1===Dh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Ln(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Wn,(h,g)=>{r[h]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ek(this.getPriority().val())+":"),this.forEachChild(Wn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":UM(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Kt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Kt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Kt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Kt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Kt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ww?-1:0}withIndex(t){if(t===xl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===xl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Wn),a=r.getIterator(Wn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===xl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Ww=new class QU extends Vt{constructor(){super(new ho(qx),Vt.EMPTY_NODE,Qc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function Tr(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new y_(n,Tr(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return ki(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Tr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Tr(e))}{const t=[];let r=!1;if(ki(n,(l,h)=>{if("."!==l.substring(0,1)){const g=Tr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Kt(l,g)))}}),0===t.length)return Vt.EMPTY_NODE;const a=wb(t,GU,l=>l.name,qx);if(r){const l=wb(t,Wn.getCompare());return new Vt(a,Tr(e),new Qc({".priority":l},{".priority":Wn}))}return new Vt(a,Tr(e),Qc.Default)}}Object.defineProperties(Kt,{MIN:{value:new Kt(Yc,Vt.EMPTY_NODE)},MAX:{value:new Kt(Al,Ww)}}),wk.__EMPTY_NODE=Vt.EMPTY_NODE,y_.__childrenNodeConstructor=Vt,function qU(n){Wx=n}(Ww),function zU(n){Tk=n}(Ww),function WU(n){bk=n}(Tr);class Kx extends _b{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!qt(e)&&".priority"!==Gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Np(e.name,t.name):a}makePost(e,t){const r=Tr(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Kt(t,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,Ww);return new Kt(Al,e)}toString(){return Hw(this.indexPath_,0).join("/")}}const Zx=new class XU extends _b{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Np(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Kt.MIN}maxPost(){return Kt.MAX}makePost(e,t){const r=Tr(e);return new Kt(t,r)}toString(){return".value"}},w_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",eV=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=w_.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=w_.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),Ak=function(n){if(n===""+Mx)return"-";const e=pb(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Al;const a=w_.charAt(w_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},xk=function(n){if(n===""+HM)return Yc;const e=pb(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Mx:(delete t[t.length-1],t.join("")):(t[t.length-1]=w_.charAt(w_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Rk(n){return{type:"value",snapshotNode:n}}function E_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function zw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Kw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Qx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(zw(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(E_(t,r)):l.trackChildChange(Kw(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Wn,(i,a)=>{t.hasChild(i)||r.trackChildChange(zw(i,a))}),t.isLeafNode()||t.forEachChild(Wn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(Kw(i,a,l))}else r.trackChildChange(E_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Zw{constructor(e){this.indexedFilter_=new Qx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Zw.getStartPost_(e),this.endPost_=Zw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new Kt(t,r))||(r=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Vt.EMPTY_NODE);const a=this;return t.forEachChild(Wn,(l,h)=>{a.matches(new Kt(l,h))||(i=i.updateImmediateChild(l,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class nV{constructor(e){this.rangedFilter_=new Zw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Kt(t,r))||(r=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Vt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Vt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(M,V)=>S(V,M)}else g=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,D=!1;for(;g.hasNext();){const S=g.getNext();!D&&h(a,S)<=0&&(D=!0),D&&w<this.limit_&&h(S,l)<=0?w++:i=i.updateImmediateChild(S.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(M,V)=>S(V,M)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const g=new Kt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(g);if(h.hasChild(t)){const S=h.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=M&&(M.name===t||h.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const V=null==M?1:l(M,g);if(D&&!r.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(Kw(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(zw(t,S));const Ce=h.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=a&&a.trackChildChange(E_(M.name,M.node)),Ce.updateImmediateChild(M.name,M.node)):Ce}}return r.isEmpty()?e:D&&l(w,g)>=0?(null!=a&&(a.trackChildChange(zw(w.name,w.node)),a.trackChildChange(E_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Vt.EMPTY_NODE)):e}}class Eb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Al}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wn}copy(){const e=new Eb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Jx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Xx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ib(n,e){const t=n.copy();return t.index_=e,t}function Pk(n){const e={};if(n.isDefault())return e;let t;return n.index_===Wn?t="$priority":n.index_===Zx?t="$value":n.index_===xl?t="$key":((0,k.hu)(n.index_ instanceof Kx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Nk(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Wn&&(e.i=n.index_.toString()),e}class Cb extends hk{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Fw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Cb.getListenId_(e,r),h={};this.listens_[l]=h;const g=Pk(e._queryParams);this.restRequest_(a+".json",g,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let M;M=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(M,null)}})}unlisten(e,t){const r=Cb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Pk(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,k.cI)(h.responseText)}catch(w){Ls("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&Ls("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class uV{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function bb(){return{value:null,children:new Map}}function I_(n,e,t){if(qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Gt(e);n.children.has(r)||n.children.set(r,bb()),I_(n.children.get(r),e=Ln(e),t)}}function eR(n,e){if(qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Wn,(r,i)=>{I_(n,new bn(r),i)}),eR(n,e)}}if(n.children.size>0){const t=Gt(e);return e=Ln(e),n.children.has(t)&&eR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function tR(n,e,t){null!==n.value?t(e,n.value):function lV(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{tR(i,new bn(e.toString()+"/"+r),t)})}class cV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ki(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class fV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new cV(e);const r=1e4+2e4*Math.random();Vw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ki(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Vw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ga=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ga||(ga={})),ga))();function iR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Tb{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ga.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bn(e));return new Tb(yn(),t,this.revert)}}return(0,k.hu)(Gt(this.path)===e,"operationForChild called for unrelated child."),new Tb(Ln(this.path),this.affectedTree,this.revert)}}class Yw{constructor(e,t){this.source=e,this.path=t,this.type=ga.LISTEN_COMPLETE}operationForChild(e){return qt(this.path)?new Yw(this.source,yn()):new Yw(this.source,Ln(this.path))}}class Op{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ga.OVERWRITE}operationForChild(e){return qt(this.path)?new Op(this.source,yn(),this.snap.getImmediateChild(e)):new Op(this.source,Ln(this.path),this.snap)}}class C_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ga.MERGE}operationForChild(e){if(qt(this.path)){const t=this.children.subtree(new bn(e));return t.isEmpty()?null:t.value?new Op(this.source,yn(),t.value):new C_(this.source,yn(),t)}return(0,k.hu)(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new C_(this.source,Ln(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class pV{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Qw(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,g)=>function _V(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Kt(e.childName,e.snapshotNode),i=new Kt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),l.forEach(h=>{const g=function mV(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(g,n.query_))})})}function Db(n,e){return{eventCache:n,serverCache:e}}function Jw(n,e,t,r){return Db(new Sh(e,t,r),n.serverCache)}function kk(n,e,t,r){return Db(n.eventCache,new Sh(e,t,r))}function Sb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Lp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sR;class zn{constructor(e,t=(()=>(sR||(sR=new ho(eU)),sR))()){this.value=e,this.children=t}static fromObject(e){let t=new zn(null);return ki(e,(r,i)=>{t=t.set(new bn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(qt(e))return null;{const r=Gt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Ln(e),t);return null!=a?{path:_r(new bn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qt(e))return this;{const t=Gt(e),r=this.children.get(t);return null!==r?r.subtree(Ln(e)):new zn(null)}}set(e,t){if(qt(e))return new zn(t,this.children);{const r=Gt(e),a=(this.children.get(r)||new zn(null)).set(Ln(e),t),l=this.children.insert(r,a);return new zn(this.value,l)}}remove(e){if(qt(e))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const t=Gt(e),r=this.children.get(t);if(r){const i=r.remove(Ln(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new zn(null):new zn(this.value,a)}return this}}get(e){if(qt(e))return this.value;{const t=Gt(e),r=this.children.get(t);return r?r.get(Ln(e)):null}}setTree(e,t){if(qt(e))return t;{const r=Gt(e),a=(this.children.get(r)||new zn(null)).setTree(Ln(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new zn(this.value,l)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(_r(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(qt(e))return null;{const a=Gt(e),l=this.children.get(a);return l?l.findOnPath_(Ln(e),_r(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(qt(e))return this;{this.value&&r(t,this.value);const i=Gt(e),a=this.children.get(i);return a?a.foreachOnPath_(Ln(e),_r(t,i),r):new zn(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(_r(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class mu{constructor(e){this.writeTree_=e}static empty(){return new mu(new zn(null))}}function Xw(n,e,t){if(qt(e))return new mu(new zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Fs(i,e);return a=a.updateChild(l,t),new mu(n.writeTree_.set(i,a))}{const i=new zn(t),a=n.writeTree_.setTree(e,i);return new mu(a)}}}function oR(n,e,t){let r=n;return ki(t,(i,a)=>{r=Xw(r,_r(e,i),a)}),r}function Ok(n,e){if(qt(e))return mu.empty();{const t=n.writeTree_.setTree(e,new zn(null));return new mu(t)}}function aR(n,e){return null!=Fp(n,e)}function Fp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Fs(t.path,e)):null}function Lk(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Wn,(r,i)=>{e.push(new Kt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Kt(r,i.value))}),e}function Ah(n,e){if(qt(e))return n;{const t=Fp(n,e);return new mu(null!=t?new zn(t):n.writeTree_.subtree(e))}}function uR(n){return n.writeTree_.isEmpty()}function b_(n,e){return Fk(yn(),n.writeTree_,e)}function Fk(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Fk(_r(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(_r(n,".priority"),r)),t}}function Ab(n,e){return $k(e,n)}function CV(n,e){if(n.snap)return pa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&pa(_r(n.path,t),e))return!0;return!1}function TV(n){return n.visible}function Uk(n,e,t){let r=mu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)pa(t,l)?(h=Fs(t,l),r=Xw(r,h,a.snap)):pa(l,t)&&(h=Fs(l,t),r=Xw(r,yn(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(pa(t,l))h=Fs(t,l),r=oR(r,h,a.children);else if(pa(l,t))if(h=Fs(l,t),qt(h))r=oR(r,yn(),a.children);else{const g=(0,k.DV)(a.children,Gt(h));if(g){const w=g.getChild(Ln(h));r=Xw(r,yn(),w)}}}}}return r}function Vk(n,e,t,r,i){if(r||i){const a=Ah(n.visibleWrites,e);return!i&&uR(a)?t:i||null!=t||aR(a,yn())?b_(Uk(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(pa(w.path,e)||pa(e,w.path))},e),t||Vt.EMPTY_NODE):null}{const a=Fp(n.visibleWrites,e);if(null!=a)return a;{const l=Ah(n.visibleWrites,e);return uR(l)?t:null!=t||aR(l,yn())?b_(l,t||Vt.EMPTY_NODE):null}}}function xb(n,e,t,r){return Vk(n.writeTree,n.treePath,e,t,r)}function lR(n,e){return function DV(n,e,t){let r=Vt.EMPTY_NODE;const i=Fp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Ah(n.visibleWrites,e);return t.forEachChild(Wn,(l,h)=>{const g=b_(Ah(a,new bn(l)),h);r=r.updateImmediateChild(l,g)}),Lk(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return Lk(Ah(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function Bk(n,e,t,r){return function SV(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=_r(e,t);if(aR(n.visibleWrites,a))return null;{const l=Ah(n.visibleWrites,a);return uR(l)?i.getChild(t):b_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Rb(n,e){return function xV(n,e){return Fp(n.visibleWrites,e)}(n.writeTree,_r(n.treePath,e))}function cR(n,e,t){return function AV(n,e,t,r){const i=_r(e,t),a=Fp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?b_(Ah(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function jk(n,e){return $k(_r(n.treePath,e),n.writeTree)}function $k(n,e){return{treePath:n,writeTree:e}}class MV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Kw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,zw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,E_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Kw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Hk=new class kV{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class dR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Sh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Lp(this.viewCache_),a=function NV(n,e,t,r,i,a){return function RV(n,e,t,r,i,a,l){let h;const g=Ah(n.visibleWrites,e),w=Fp(g,yn());if(null!=w)h=w;else{if(null==t)return[];h=b_(g,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),M=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let V=M.getNext();for(;V&&D.length<i;)0!==S(V,r)&&D.push(V),V=M.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Gk(n,e,t,r,i,a){const l=e.eventCache;if(null!=Rb(r,t))return e;{let h,g;if(qt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Lp(e),S=lR(r,w instanceof Vt?w:Vt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=xb(r,Lp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Gt(t);if(".priority"===w){(0,k.hu)(1===Dh(t),"Can't have a priority with additional path components");const D=l.getNode();g=e.serverCache.getNode();const S=Bk(r,t,D,g);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Ln(t);let S;if(l.isCompleteForChild(w)){g=e.serverCache.getNode();const M=Bk(r,t,l.getNode(),g);S=null!=M?l.getNode().getImmediateChild(w).updateChild(D,M):l.getNode().getImmediateChild(w)}else S=cR(r,w,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),w,S,D,i,a):l.getNode()}}return Jw(e,h,l.isFullyInitialized()||qt(t),n.filter.filtersNodes())}}function Pb(n,e,t,r,i,a,l,h){const g=e.serverCache;let w;const D=l?n.filter:n.filter.getIndexedFilter();if(qt(t))w=D.updateFullNode(g.getNode(),r,null);else if(D.filtersNodes()&&!g.isFiltered()){const V=g.getNode().updateChild(t,r);w=D.updateFullNode(g.getNode(),V,null)}else{const V=Gt(t);if(!g.isCompleteForPath(t)&&Dh(t)>1)return e;const Z=Ln(t),ke=g.getNode().getImmediateChild(V).updateChild(Z,r);w=".priority"===V?D.updatePriority(g.getNode(),ke):D.updateChild(g.getNode(),V,ke,Z,Hk,null)}const S=kk(e,w,g.isFullyInitialized()||qt(t),D.filtersNodes());return Gk(n,S,t,i,new dR(i,S,a),h)}function hR(n,e,t,r,i,a,l){const h=e.eventCache;let g,w;const D=new dR(i,e,a);if(qt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=Jw(e,w,!0,n.filter.filtersNodes());else{const S=Gt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),g=Jw(e,w,h.isFullyInitialized(),h.isFiltered());else{const M=Ln(t),V=h.getNode().getImmediateChild(S);let Z;if(qt(M))Z=r;else{const Ce=D.getCompleteChild(S);Z=null!=Ce?".priority"===$x(M)&&Ce.getChild(mk(M)).isEmpty()?Ce:Ce.updateChild(M,r):Vt.EMPTY_NODE}g=V.equals(Z)?e:Jw(e,n.filter.updateChild(h.getNode(),S,Z,M,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function qk(n,e){return n.eventCache.isCompleteForChild(e)}function Wk(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fR(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,g=e;w=qt(t)?r:new zn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,M)=>{if(D.hasChild(S)){const Z=Wk(0,e.serverCache.getNode().getImmediateChild(S),M);g=Pb(n,g,new bn(S),Z,i,a,l,h)}}),w.children.inorderTraversal((S,M)=>{const V=!e.serverCache.isCompleteForChild(S)&&void 0===M.value;if(!D.hasChild(S)&&!V){const Ce=Wk(0,e.serverCache.getNode().getImmediateChild(S),M);g=Pb(n,g,new bn(S),Ce,i,a,l,h)}}),g}class HV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Qx(r.getIndex()),a=function rV(n){return n.loadsAllData()?new Qx(n.getIndex()):n.hasLimit()?new nV(n):new Zw(n)}(r);this.processor_=function OV(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,g=i.updateFullNode(Vt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Vt.EMPTY_NODE,h.getNode(),null),D=new Sh(g,l.isFullyInitialized(),i.filtersNodes()),S=new Sh(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Db(S,D),this.eventGenerator_=new pV(this.query_)}get query(){return this.query_}}function WV(n,e){const t=Lp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!qt(e)&&!t.getImmediateChild(Gt(e)).isEmpty())?t.getChild(e):null}function zk(n){return 0===n.eventRegistrations_.length}function Kk(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Zk(n,e,t,r){e.type===ga.MERGE&&null!==e.source.queryId&&((0,k.hu)(Lp(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(Sb(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function FV(n,e,t,r,i){const a=new MV;let l,h;if(t.type===ga.OVERWRITE){const w=t;w.source.fromUser?l=hR(n,e,w.path,w.snap,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!qt(w.path),l=Pb(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===ga.MERGE){const w=t;w.source.fromUser?l=function VV(n,e,t,r,i,a,l){let h=e;return r.foreach((g,w)=>{const D=_r(t,g);qk(e,Gt(D))&&(h=hR(n,h,D,w,i,a,l))}),r.foreach((g,w)=>{const D=_r(t,g);qk(e,Gt(D))||(h=hR(n,h,D,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=fR(n,e,w.path,w.children,r,i,h,a))}else if(t.type===ga.ACK_USER_WRITE){const w=t;l=w.revert?function $V(n,e,t,r,i,a){let l;if(null!=Rb(r,t))return e;{const h=new dR(r,e,i),g=e.eventCache.getNode();let w;if(qt(t)||".priority"===Gt(t)){let D;if(e.serverCache.isFullyInitialized())D=xb(r,Lp(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Vt,"serverChildren would be complete if leaf node"),D=lR(r,S)}D=D,w=n.filter.updateFullNode(g,D,a)}else{const D=Gt(t);let S=cR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=g.getImmediateChild(D)),w=null!=S?n.filter.updateChild(g,D,S,Ln(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(g,D,Vt.EMPTY_NODE,Ln(t),h,a):g,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=xb(r,Lp(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=Rb(r,yn()),Jw(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function BV(n,e,t,r,i,a,l){if(null!=Rb(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(qt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Pb(n,e,t,g.getNode().getChild(t),i,a,h,l);if(qt(t)){let w=new zn(null);return g.getNode().forEachChild(xl,(D,S)=>{w=w.set(new bn(D),S)}),fR(n,e,t,w,i,a,h,l)}return e}{let w=new zn(null);return r.foreach((D,S)=>{const M=_r(t,D);g.isCompleteForPath(M)&&(w=w.set(D,g.getNode().getChild(M)))}),fR(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==ga.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function jV(n,e,t,r,i){const a=e.serverCache;return Gk(n,kk(e,a.getNode(),a.isFullyInitialized()||qt(t),a.isFiltered()),t,r,Hk,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function UV(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Sb(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Rk(Sb(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function LV(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Yk(n,a.changes,a.viewCache.eventCache.getNode(),null)}function Yk(n,e,t,r){return function gV(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function tV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Qw(n,i,"child_removed",e,r,t),Qw(n,i,"child_added",e,r,t),Qw(n,i,"child_moved",a,r,t),Qw(n,i,"child_changed",e,r,t),Qw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Nb,kb;class Qk{constructor(){this.views=new Map}}function pR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Zk(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(Zk(l,e,t,r));return a}}function Jk(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=xb(t,i?r:null),g=!1;h?g=!0:r instanceof Vt?(h=lR(t,r),g=!1):(h=Vt.EMPTY_NODE,g=!1);const w=Db(new Sh(h,g,!1),new Sh(r,i,!1));return new HV(e,w)}return l}function Xk(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function xh(n,e){let t=null;for(const r of n.views.values())t=t||WV(r,e);return t}function eO(n,e){return e._queryParams.loadsAllData()?Mb(n):n.views.get(e._queryIdentifier)}function tO(n,e){return null!=eO(n,e)}function Rh(n){return null!=Mb(n)}function Mb(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let n2=1;class nO{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zn(null),this.pendingWriteTree_=function PV(){return{visibleWrites:mu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gR(n,e,t,r,i){return function vV(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Xw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?T_(n,new Op({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ph(n,e,t=!1){const r=function EV(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function IV(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&CV(h,r.path)?i=!1:pa(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function bV(n){n.visibleWrites=Uk(n.allWrites,TV,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Ok(n.visibleWrites,r.path):ki(r.children,g=>{n.visibleWrites=Ok(n.visibleWrites,_r(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new zn(null);return null!=r.snap?a=a.set(yn(),!0):ki(r.children,l=>{a=a.set(new bn(l),!0)}),T_(n,new Tb(r.path,a,t))}return[]}function e0(n,e,t){return T_(n,new Op({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function mR(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||tO(a,e))){const h=function XV(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=Rh(n);if("default"===i)for(const[g,w]of n.views.entries())l=l.concat(Kk(w,t,r)),zk(w)&&(n.views.delete(g),w.query._queryParams.loadsAllData()||a.push(w.query));else{const g=n.views.get(i);g&&(l=l.concat(Kk(g,t,r)),zk(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!Rh(n)&&a.push(new(function YV(){return(0,k.hu)(Nb,"Reference.ts has not been loaded"),Nb}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function QV(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=h.removed;l=h.events;const w=-1!==g.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,M)=>Rh(M));if(w&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const M=function c2(n){return n.fold((e,t,r)=>{if(t&&Rh(t))return[Mb(t)];{let i=[];return t&&(i=Xk(t)),ki(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let V=0;V<M.length;++V){const Z=M[V],Ce=Z.query,ke=oO(n,Z);n.listenProvider_.startListening(t0(Ce),Lb(n,Ce),ke.hashFn,ke.onComplete)}}}!D&&g.length>0&&!r&&(w?n.listenProvider_.stopListening(t0(e),null):g.forEach(S=>{const M=n.queryToTagMap.get(Fb(S));n.listenProvider_.stopListening(t0(S),M)})),function d2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Fb(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,g)}return l}function rO(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,M)=>{const V=Fs(S,r);i=i||xh(M,V),a=a||Rh(M)});let h,l=n.syncPointTree_.get(r);l?(a=a||Rh(l),i=i||xh(l,yn())):(l=new Qk,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=Vt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,V)=>{const Z=xh(V,yn());Z&&(i=i.updateImmediateChild(M,Z))}));const g=tO(l,e);if(!g&&!e._queryParams.loadsAllData()){const S=Fb(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const M=function h2(){return n2++}();n.queryToTagMap.set(S,M),n.tagToQueryMap.set(M,S)}let D=function JV(n,e,t,r,i,a){const l=Jk(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function zV(n,e){n.eventRegistrations_.push(e)}(l,t),function KV(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Wn,(a,l)=>{r.push(E_(a,l))}),t.isFullyInitialized()&&r.push(Rk(t.getNode())),Yk(n,r,t.getNode(),e)}(l,t)}(l,e,t,Ab(n.pendingWriteTree_,r),i,h);if(!g&&!a){const S=eO(l,e);D=D.concat(function f2(n,e,t){const r=e._path,i=Lb(n,e),a=oO(n,t),l=n.listenProvider_.startListening(t0(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Rh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((w,D,S)=>{if(!qt(w)&&D&&Rh(D))return[Mb(D).query];{let M=[];return D&&(M=M.concat(Xk(D).map(V=>V.query))),ki(S,(V,Z)=>{M=M.concat(Z)}),M}});for(let w=0;w<g.length;++w){const D=g[w];n.listenProvider_.stopListening(t0(D),Lb(n,D))}}return l}(n,e,S))}return D}function Ob(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=xh(h,Fs(l,e));if(w)return w});return Vk(i,e,a,t,!0)}function T_(n,e){return iO(e,n.syncPointTree_,null,Ab(n.pendingWriteTree_,yn()))}function iO(n,e,t,r){if(qt(n.path))return sO(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=xh(i,yn()));let a=[];const l=Gt(n.path),h=n.operationForChild(l),g=e.children.get(l);if(g&&h){const w=t?t.getImmediateChild(l):null,D=jk(r,l);a=a.concat(iO(h,g,w,D))}return i&&(a=a.concat(pR(i,n,r,t))),a}}function sO(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=xh(i,yn()));let a=[];return e.children.inorderTraversal((l,h)=>{const g=t?t.getImmediateChild(l):null,w=jk(r,l),D=n.operationForChild(l);D&&(a=a.concat(sO(D,h,g,w)))}),i&&(a=a.concat(pR(i,n,r,t))),a}function oO(n,e){const t=e.query,r=Lb(n,t);return{hashFn:()=>(function GV(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function o2(n,e,t){const r=_R(n,t);if(r){const i=yR(r),a=i.path,l=i.queryId,h=Fs(a,e);return vR(n,a,new Yw(iR(l),h))}return[]}(n,t._path,r):function s2(n,e){return T_(n,new Yw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function rU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return mR(n,t,null,a)}}}}function Lb(n,e){const t=Fb(e);return n.queryToTagMap.get(t)}function Fb(n){return n._path.toString()+"$"+n._queryIdentifier}function _R(n,e){return n.tagToQueryMap.get(e)}function yR(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bn(n.substr(0,e))}}function vR(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),pR(r,t,Ab(n.pendingWriteTree_,e),null)}function t0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function t2(){return(0,k.hu)(kb,"Reference.ts has not been loaded"),kb}())(n._repo,n._path):n}class wR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new wR(t)}node(){return this.node_}}class ER{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_r(this.path_,e);return new ER(this.syncTree_,t)}node(){return Ob(this.syncTree_,this.path_)}}const aO=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?g2(n[".sv"],e,t):"object"==typeof n[".sv"]?m2(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},g2=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},m2=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},uO=function(n,e,t,r){return CR(e,new ER(t,n),r)},IR=function(n,e,t){return CR(n,new wR(e),t)};function CR(n,e,t){const r=n.getPriority().val(),i=aO(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=aO(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new y_(h,Tr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new y_(i))),l.forEachChild(Wn,(h,g)=>{const w=CR(g,e.getImmediateChild(h),t);w!==g&&(a=a.updateImmediateChild(h,w))}),a}}class bR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Ub(n,e){let t=e instanceof bn?e:new bn(e),r=n,i=Gt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new bR(i,r,a),t=Ln(t),i=Gt(t)}return r}function Up(n){return n.node.value}function TR(n,e){n.node.value=e,DR(n)}function lO(n){return n.node.childCount>0}function Vb(n,e){ki(n.node.children,(t,r)=>{e(new bR(t,n,r))})}function cO(n,e,t,r){t&&!r&&e(n),Vb(n,i=>{cO(i,e,!0,r)}),t&&r&&e(n)}function n0(n){return new bn(null===n.parent?n.name:n0(n.parent)+"/"+n.name)}function DR(n){null!==n.parent&&function v2(n,e,t){const r=function _2(n){return void 0===Up(n)&&!lO(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,DR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,DR(n))}(n.parent,n.name,n)}const w2=/[\[\].#$\/\u0000-\u001F\u007F]/,E2=/[\[\].#$\u0000-\u001F\u007F]/,SR=10485760,Bb=function(n){return"string"==typeof n&&0!==n.length&&!w2.test(n)},dO=function(n){return"string"==typeof n&&0!==n.length&&!E2.test(n)},r0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!fb(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Rl=function(n,e,t,r){r&&void 0===e||s0((0,k.gK)(n,"value"),e,t)},s0=function(n,e,t){const r=t instanceof bn?new OU(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Mp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Mp(r)+" with contents = "+e.toString());if(fb(e))throw new Error(n+"contains "+e.toString()+" "+Mp(r));if("string"==typeof e&&e.length>SR/3&&(0,k.ug)(e)>SR)throw new Error(n+"contains a string greater than "+SR+" utf8 bytes "+Mp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(ki(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!Bb(l)))throw new Error(n+" contains an invalid key ("+l+") "+Mp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function LU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),_k(n)})(r,l),s0(n,h,r),function FU(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Mp(r)+" in addition to actual children.")}},hO=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];ki(e,(l,h)=>{const g=new bn(l);if(s0(i,h,_r(t,g)),".priority"===$x(g)&&!r0(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Hw(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!Bb(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(kU);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&pa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},AR=function(n,e,t){if(!t||void 0!==e){if(fb(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!r0(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},o0=function(n,e,t,r){if(!(r&&void 0===t||Bb(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},a0=function(n,e,t,r){if(!(r&&void 0===t||dO(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ma=function(n,e){if(".info"===Gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},fO=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Bb(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dO(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class T2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jb(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Hx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function xR(n,e,t){jb(n,t),pO(n,r=>Hx(r,e))}function _a(n,e,t){jb(n,t),pO(n,r=>pa(r,e)||pa(e,r))}function pO(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(D2(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function D2(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Pp&&Mi("event: "+t.toString()),m_(r)}}}const gO="repo_interrupt";class A2{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new T2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bb(),this.transactionQueueTree_=new bR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mO(n){const t=n.infoData_.getNode(new bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function u0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:mO(n)})}function _O(n,e,t,r,i){n.dataUpdateCount++;const a=new bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,k.UI)(t,w=>Tr(w));l=function u2(n,e,t,r){const i=_R(n,r);if(i){const a=yR(i),l=a.path,h=a.queryId,g=Fs(l,e),w=zn.fromObject(t);return vR(n,l,new C_(iR(h),g,w))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Tr(t);l=function a2(n,e,t,r){const i=_R(n,r);if(null!=i){const a=yR(i),l=a.path,h=a.queryId,g=Fs(l,e);return vR(n,l,new Op(iR(h),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,k.UI)(t,w=>Tr(w));l=function i2(n,e,t){const r=zn.fromObject(t);return T_(n,new C_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Tr(t);l=e0(n.serverSyncTree_,a,g)}let h=a;l.length>0&&(h=S_(n,a)),_a(n.eventQueue_,h,l)}function yO(n,e){RR(n,"connected",e),!1===e&&function M2(n){D_(n,"onDisconnectEvents");const e=u0(n),t=bb();tR(n.onDisconnect_,yn(),(i,a)=>{const l=uO(i,a,n.serverSyncTree_,e);I_(t,i,l)});let r=[];tR(t,yn(),(i,a)=>{r=r.concat(e0(n.serverSyncTree_,i,a));const l=kR(n,i);S_(n,l)}),n.onDisconnect_=bb(),_a(n.eventQueue_,yn(),r)}(n)}function RR(n,e,t){const r=new bn("/.info/"+e),i=Tr(t);n.infoData_.updateSnapshot(r,i);const a=e0(n.infoSyncTree_,r,i);_a(n.eventQueue_,r,a)}function $b(n){return n.nextWriteId_++}function PR(n,e,t,r,i){D_(n,"set",{path:e.toString(),value:t,priority:r});const a=u0(n),l=Tr(t,r),h=Ob(n.serverSyncTree_,e),g=IR(l,h,a),w=$b(n),D=gR(n.serverSyncTree_,e,g,w,!0);jb(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(M,V)=>{const Z="ok"===M;Z||Ls("set at "+e+" failed: "+M);const Ce=Ph(n.serverSyncTree_,w,!Z);_a(n.eventQueue_,e,Ce),Nh(0,i,M,V)});const S=kR(n,e);S_(n,S),_a(n.eventQueue_,S,[])}function k2(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&eR(n.onDisconnect_,e),Nh(0,t,r,i)})}function vO(n,e,t,r){const i=Tr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&I_(n.onDisconnect_,e,i),Nh(0,r,a,l)})}function NR(n,e,t){let r;r=".info"===Gt(e._path)?mR(n.infoSyncTree_,e,t):mR(n.serverSyncTree_,e,t),xR(n.eventQueue_,e._path,r)}function wO(n){n.persistentConnection_&&n.persistentConnection_.interrupt(gO)}function D_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Mi(t,...e)}function Nh(n,e,t,r){e&&m_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function MR(n,e,t){return Ob(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function Hb(n,e=n.transactionQueueTree_){if(e||Gb(n,e),Up(e)){const t=IO(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function B2(n,e,t){const r=t.map(w=>w.currentWriteId),i=MR(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Fs(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;n.server_.put(g.toString(),h,w=>{D_(n,"transaction put response",{path:g.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let M=0;M<t.length;M++)t[M].status=2,D=D.concat(Ph(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&S.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();Gb(n,Ub(n.transactionQueueTree_,e)),Hb(n,n.transactionQueueTree_),_a(n.eventQueue_,e,D);for(let M=0;M<S.length;M++)m_(S[M])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Ls("transaction at "+g.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}S_(n,e)}},l)}(n,n0(e),t)}else lO(e)&&Vb(e,t=>{Hb(n,t)})}function S_(n,e){const t=EO(n,e),r=n0(t);return function j2(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],w=Fs(t,g.path);let S,D=!1;if((0,k.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)D=!0,S=g.abortReason,i=i.concat(Ph(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)D=!0,S="maxretry",i=i.concat(Ph(n.serverSyncTree_,g.currentWriteId,!0));else{const M=MR(n,g.path,l);g.currentInputSnapshot=M;const V=e[h].update(M.val());if(void 0!==V){s0("transaction failed: Data returned ",V,g.path);let Z=Tr(V);"object"==typeof V&&null!=V&&(0,k.r3)(V,".priority")||(Z=Z.updatePriority(M.getPriority()));const ke=g.currentWriteId,gt=u0(n),wt=IR(Z,M,gt);g.currentOutputSnapshotRaw=Z,g.currentOutputSnapshotResolved=wt,g.currentWriteId=$b(n),l.splice(l.indexOf(ke),1),i=i.concat(gR(n.serverSyncTree_,g.path,wt,g.currentWriteId,g.applyLocally)),i=i.concat(Ph(n.serverSyncTree_,ke,!0))}else D=!0,S="nodata",i=i.concat(Ph(n.serverSyncTree_,g.currentWriteId,!0))}_a(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}Gb(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)m_(r[h]);Hb(n,n.transactionQueueTree_)}(n,IO(n,t),r),r}function EO(n,e){let t,r=n.transactionQueueTree_;for(t=Gt(e);null!==t&&void 0===Up(r);)r=Ub(r,t),t=Gt(e=Ln(e));return r}function IO(n,e){const t=[];return CO(n,e,t),t.sort((r,i)=>r.order-i.order),t}function CO(n,e,t){const r=Up(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Vb(e,i=>{CO(n,i,t)})}function Gb(n,e){const t=Up(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,TR(e,t.length>0?t:void 0)}Vb(e,r=>{Gb(n,r)})}function kR(n,e){const t=n0(EO(n,e)),r=Ub(n.transactionQueueTree_,e);return function y2(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{OR(n,i)}),OR(n,r),cO(r,i=>{OR(n,i)}),t}function OR(n,e){const t=Up(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Ph(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?TR(e,void 0):t.length=a+1,_a(n.eventQueue_,n0(e),i);for(let l=0;l<r.length;l++)m_(r[l])}}const LR=function(n,e){const t=G2(n),r=t.namespace;return"firebase.com"===t.domain&&Sl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Sl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ox(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new bn(t.pathString)}},G2=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",g=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function $2(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const M=function H2(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ls(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,g=parseInt(e.substring(w+1),10)):w=e.length;const V=e.slice(0,w);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in M&&(a=M.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class bO{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class TO{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class DO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class SO{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return k2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ma("OnDisconnect.remove",this._path);const e=new k.BH;return vO(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ma("OnDisconnect.set",this._path),Rl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return vO(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ma("OnDisconnect.setWithPriority",this._path),Rl("OnDisconnect.setWithPriority",e,this._path,!1),AR("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function O2(n,e,t,r,i){const a=Tr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&I_(n.onDisconnect_,e,a),Nh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ma("OnDisconnect.update",this._path),hO("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function L2(n,e,t,r){if((0,k.xb)(t))return Mi("onDisconnect().update() called with empty data.  Don't do anything."),void Nh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&ki(t,(l,h)=>{const g=Tr(h);I_(n.onDisconnect_,_r(e,l),g)}),Nh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return qt(this._path)?null:$x(this._path)}get ref(){return new ya(this._repo,this._path)}get _queryIdentifier(){const e=Nk(this._queryParams),t=Nx(e);return"{}"===t?"default":t}get _queryObject(){return Nk(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof fo))return!1;const t=this._repo===e._repo,r=Hx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function MU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function qb(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Mh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===xl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Yc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Al)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Wn){if(null!=e&&!r0(e)||null!=t&&!r0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof Kx||n.getIndex()===Zx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Wb(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ya extends fo{constructor(e,t){super(e,t,new Eb,!1)}get parent(){const e=mk(this._path);return null===e?null:new ya(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Vp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bn(e),r=Bp(this.ref,e);return new Vp(this._node.getChild(t),r,Wn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Vp(i,Bp(this.ref,r),Wn)))}hasChild(e){const t=new bn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function AO(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Bp(n._root,e):n._root}function xO(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=LR(e,n._repo.repoInfo_.nodeAdmin);fO("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Sl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),AO(n,t.path.toString())}function Bp(n,e){return null===Gt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),a0("child","path",t,!1)):a0("child","path",e,!1),new ya(n._repo,_r(n._path,e));var t}function FR(n,e){n=(0,k.m9)(n),ma("set",n._path),Rl("set",e,n._path,!1);const t=new k.BH;return PR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Z2(n,e){hO("update",e,n._path,!1);const t=new k.BH;return function N2(n,e,t,r){D_(n,"update",{path:e.toString(),value:t});let i=!0;const a=u0(n),l={};if(ki(t,(h,g)=>{i=!1,l[h]=uO(_r(e,h),Tr(g),n.serverSyncTree_,a)}),i)Mi("update() called with empty data.  Don't do anything."),Nh(0,r,"ok",void 0);else{const h=$b(n),g=function r2(n,e,t,r){!function wV(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=oR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=zn.fromObject(t);return T_(n,new C_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);jb(n.eventQueue_,g),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||Ls("update at "+e+" failed: "+w);const M=Ph(n.serverSyncTree_,h,!S),V=M.length>0?S_(n,e):e;_a(n.eventQueue_,V,M),Nh(0,r,w,D)}),ki(t,w=>{const D=kR(n,_r(e,w));S_(n,D)}),_a(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Y2(n){return function P2(n,e){const t=function l2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=Fs(w,t);r=r||xh(D,S)});let i=n.syncPointTree_.get(t);i?r=r||xh(i,yn()):(i=new Qk,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Sh(r,!0,!1):null;return function qV(n){return Sb(n.viewCache_)}(Jk(i,e,Ab(n.pendingWriteTree_,e._path),a?l.getNode():Vt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Tr(r).withIndex(e._queryParams.getIndex()),a=e0(n.serverSyncTree_,e._path,i);return xR(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(D_(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new Vp(e,new ya(n._repo,n._path),n._queryParams.getIndex()))}class zb{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new bO("value",this,new Vp(e.snapshotNode,new ya(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TO(this,e,t):null}matches(e){return e instanceof zb&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Kb{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TO(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Bp(new ya(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new bO(e.type,this,new Vp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Kb&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function l0(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,w=(D,S)=>{NR(n._repo,n,h),g(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new DO(t,a||void 0),h="value"===e?new zb(l):new Kb(e,l);return function F2(n,e,t){let r;r=".info"===Gt(e._path)?rO(n.infoSyncTree_,e,t):rO(n.serverSyncTree_,e,t),xR(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>NR(n._repo,n,h)}function UR(n,e,t,r){return l0(n,"value",e,t,r)}function RO(n,e,t,r){return l0(n,"child_added",e,t,r)}function PO(n,e,t,r){return l0(n,"child_changed",e,t,r)}function NO(n,e,t,r){return l0(n,"child_moved",e,t,r)}function MO(n,e,t,r){return l0(n,"child_removed",e,t,r)}function kO(n,e,t){let r=null;const i=t?new DO(t):null;"value"===e?r=new zb(i):e&&(r=new Kb(e,i)),NR(n._repo,n,r)}class _u{}class OO extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("endAt",this._value,e._path,!0);const t=Xx(e._queryParams,this._value,this._key);if(Wb(t),Mh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class J2 extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("endBefore",this._value,e._path,!1);const t=function aV(n,e,t){let r,i;return n.index_===xl?("string"==typeof e&&(e=xk(e)),i=Xx(n,e,t)):(r=null==t?Yc:xk(t),i=Xx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Wb(t),Mh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class LO extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("startAt",this._value,e._path,!0);const t=Jx(e._queryParams,this._value,this._key);if(Wb(t),Mh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class tB extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("startAfter",this._value,e._path,!1);const t=function oV(n,e,t){let r;if(n.index_===xl)"string"==typeof e&&(e=Ak(e)),r=Jx(n,e,t);else{let i;i=null==t?Al:Ak(t),r=Jx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Wb(t),Mh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class rB extends _u{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,function iV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class sB extends _u{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,function sV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class aB extends _u{constructor(e){super(),this._path=e}_apply(e){qb(e,"orderByChild");const t=new bn(this._path);if(qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Kx(t),i=Ib(e._queryParams,r);return Mh(i),new fo(e._repo,e._path,i,!0)}}class lB extends _u{_apply(e){qb(e,"orderByKey");const t=Ib(e._queryParams,xl);return Mh(t),new fo(e._repo,e._path,t,!0)}}class dB extends _u{_apply(e){qb(e,"orderByPriority");const t=Ib(e._queryParams,Wn);return Mh(t),new fo(e._repo,e._path,t,!0)}}class fB extends _u{_apply(e){qb(e,"orderByValue");const t=Ib(e._queryParams,Zx);return Mh(t),new fo(e._repo,e._path,t,!0)}}class gB extends _u{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Rl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new OO(this._value,this._key)._apply(new LO(this._value,this._key)._apply(e))}}function yu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function ZV(n){(0,k.hu)(!Nb,"__referenceConstructor has already been defined"),Nb=n})(ya),function e2(n){(0,k.hu)(!kb,"__referenceConstructor has already been defined"),kb=n}(ya);const VR={};function UO(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Sl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,w,l=LR(a,i),h=l.repoInfo;"undefined"!=typeof process&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(g=!0,a=`http://${w}?ns=${h.namespace}`,l=LR(a,i),h=l.repoInfo):g=!l.repoInfo.secure;const D=i&&g?new Bw(Bw.OWNER):new aU(n.name,n.options,e);fO("Invalid Firebase Database URL",l),qt(l.path)||Sl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function wB(n,e,t,r){let i=VR[e.name];i||(i={},VR[e.name]=i);let a=i[n.toURLString()];return a&&Sl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new A2(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new oU(n.name,t));return new IB(S,n)}class IB{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function x2(n,e,t){if(n.stats_=Ux(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Cb(n.repoInfo_,(r,i,a,l)=>{_O(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>yO(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new kp(n.repoInfo_,e,(r,i,a,l)=>{_O(n,r,i,a,l)},r=>{yO(n,r)},r=>{!function R2(n,e){ki(e,(t,r)=>{RR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function dU(n,e){const t=n.toString();return Fx[t]||(Fx[t]=e()),Fx[t]}(n.repoInfo_,()=>new fV(n.stats_,n.server_)),n.infoData_=new uV,n.infoSyncTree_=new nO({startListening:(r,i,a,l)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=e0(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),RR(n,"connected",!1),n.serverSyncTree_=new nO({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,g)=>{const w=l(h,g);_a(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ya(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function vB(n,e){const t=VR[e];(!t||t[n.key]!==n)&&Sl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),wO(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Sl("Cannot call "+e+" on a deleted database.")}}function DB(n,e){BM(n,e)}const AB={".sv":"timestamp"};class PB{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}kp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},kp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function SB(n){OM(kn.SDK_VERSION),(0,kn._registerComponent)(new Xs.wA("database",(e,{instanceIdentifier:t})=>UO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(MM,"0.12.5",n),(0,kn.registerVersion)(MM,"0.12.5","esm2017")}();const OB=new Rs.Yd("@firebase/database-compat"),VO=function(n){OB.warn("FIREBASE WARNING: "+n)};class UB{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,VO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class VB{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class kh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),a0("DataSnapshot.child","path",e,!1),new kh(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),a0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new kh(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ki{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Ki.getCancelAndContextArgs_("Query.on",r,i),h=(w,D)=>{t.call(l.context,new kh(this.database,w),D)};h.userCallback=t,h.context=l.context;const g=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return UR(this._delegate,h,g),t;case"child_added":return RO(this._delegate,h,g),t;case"child_removed":return MO(this._delegate,h,g),t;case"child_changed":return PO(this._delegate,h,g),t;case"child_moved":return NO(this._delegate,h,g),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,kO(this._delegate,e,i)}else kO(this._delegate,e)}get(){return Y2(this._delegate).then(e=>new kh(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Ki.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(w,D)=>{const S=new kh(this.database,w);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const g=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":UR(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":RO(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":MO(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":PO(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":NO(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Ki(this.database,yu(this._delegate,function iB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new rB(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Ki(this.database,yu(this._delegate,function oB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sB(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Ki(this.database,yu(this._delegate,function uB(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return a0("orderByChild","path",n,!1),new aB(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Ki(this.database,yu(this._delegate,function cB(){return new lB}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Ki(this.database,yu(this._delegate,function hB(){return new dB}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Ki(this.database,yu(this._delegate,function pB(){return new fB}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Ki(this.database,yu(this._delegate,function eB(n=null,e){return o0("startAt","key",e,!0),new LO(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Ki(this.database,yu(this._delegate,function nB(n,e){return o0("startAfter","key",e,!0),new tB(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Ki(this.database,yu(this._delegate,function Q2(n,e){return o0("endAt","key",e,!0),new OO(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Ki(this.database,yu(this._delegate,function X2(n,e){return o0("endBefore","key",e,!0),new J2(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Ki(this.database,yu(this._delegate,function mB(n,e){return o0("equalTo","key",e,!0),new gB(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ki))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Lo(this.database,new ya(this._delegate._repo,this._delegate._path))}}class Lo extends Ki{constructor(e,t){super(e,new fo(t._repo,t._path,new Eb,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Lo(this.database,Bp(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Lo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Lo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=FR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,VO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ma("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=Z2(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function K2(n,e,t){if(ma("setWithPriority",n._path),Rl("setWithPriority",e,n._path,!1),AR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return PR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function W2(n){return ma("remove",n._path),FR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function NB(n,e,t){var r;if(n=(0,k.m9)(n),ma("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,h=UR(n,()=>{});return function V2(n,e,t,r,i,a){D_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:FM(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=MR(n,e,void 0);l.currentInputSnapshot=h;const g=l.update(h.val());if(void 0===g)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{s0("transaction failed: Data returned ",g,l.path),l.status=0;const w=Ub(n.transactionQueueTree_,e),D=Up(w)||[];let S;D.push(l),TR(w,D),"object"==typeof g&&null!==g&&(0,k.r3)(g,".priority")?(S=(0,k.DV)(g,".priority"),(0,k.hu)(r0(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Ob(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const M=u0(n),V=Tr(g,S),Z=IR(V,h,M);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=Z,l.currentWriteId=$b(n);const Ce=gR(n.serverSyncTree_,e,Z,l.currentWriteId,l.applyLocally);_a(n.eventQueue_,e,Ce),Hb(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,w,D)=>{let S=null;g?a.reject(g):(S=new Vp(D,new ya(n._repo,n._path),Wn),a.resolve(new PB(w,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new VB(a.committed,new kh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function z2(n,e){n=(0,k.m9)(n),ma("setPriority",n._path),AR("setPriority",e,!1);const t=new k.BH;return PR(n._repo,_r(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function q2(n,e){n=(0,k.m9)(n),ma("push",n._path),Rl("push",e,n._path,!0);const t=mO(n._repo),r=eV(t),i=Bp(n,r),a=Bp(n,r);let l;return l=null!=e?FR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Lo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Lo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return ma("Reference.onDisconnect",this._delegate._path),new UB(new SO(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class c0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function CB(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Sl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Sl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Bw(Bw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new Bw(l)}!function yB(n,e,t,r){n.repoInfo_=new Ox(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Lo){const t=xO(this._delegate,e.toString());return new Lo(this,t)}{const t=AO(this._delegate,e);return new Lo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=xO(this._delegate,e);return new Lo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function bB(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),wO(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function TB(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function U2(n){n.persistentConnection_&&n.persistentConnection_.resume(gO)}(n._repo)}(this._delegate)}}c0.ServerValue={TIMESTAMP:function xB(){return AB}(),increment:n=>function RB(n){return{".sv":{increment:n}}}(n)};var jB=Object.freeze({__proto__:null,initStandalone:function BB({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){OM(t);const l=new Xs.zt("auth-internal",new Xs.H0("database-standalone"));return l.setComponent(new Xs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new c0(UO(n,l,void 0,e,a),n),namespace:i}}});const $B=c0.ServerValue;function BO(n){return null==n}function jO(n){return"function"==typeof n.set}function $O(n,e){return jO(e)?e:n.ref(e)}function HO(n,e){if(function GB(n){return"string"==typeof n}(n))return e.stringCase();if(jO(n))return e.firebaseCase();if(function qB(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function d0(n,e,t="on",r=Fg.z){return new $n.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Et.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,wg.B)())}function GO(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function KB(n,e){const{payload:t,prevKey:r,key:i}=e,a=GO(n,i),l=function zB(n,e){if(BO(e))return 0;{const t=GO(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const w={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function qO(n){return(BO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function WO(n,e,t){return function WB(n,e,t){return d0(n,"value","once",t).pipe(Dn(r=>{const i=[et(r)];return e.forEach(a=>i.push(d0(n,a,"on",t))),(0,yg.T)(...i).pipe(vi(KB,[]))}),RD())}(n,e=qO(e),t)}function zO(n,e,t){const r=(e=qO(e)).map(i=>d0(n,i,"on",t));return(0,yg.T)(...r)}function KO(n,e){return function(r,i){return HO(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function JB(n){return function(t){return t?HO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function ZO(n,e){return function(){return d0(n,"value","on",e)}}!function HB(n){n.INTERNAL.registerComponent(new Xs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new c0(i,r)},"PUBLIC").setServiceProps({Reference:Lo,Query:Ki,Database:c0,DataSnapshot:kh,enableLogging:DB,INTERNAL:jB,ServerValue:$B}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(Od.Z);const tj=new _.OlP("angularfire2.realtimeDatabaseURL"),nj=new _.OlP("angularfire2.database.use-emulator");let rj=(()=>{class n{constructor(t,r,i,a,l,h,g,w,D,S,M,V,Z,Ce,ke){this.schedulers=h;const gt=g,wt=(0,Vr.on)(t,l,r);w&&Lg(wt,l,D,M,V,Z,S,Ce),this.database=(0,Vr.cc)(`${wt.name}.database.${i}`,"AngularFireDatabase",wt.name,()=>{const Ct=l.runOutsideAngular(()=>wt.database(i||void 0));return gt&&Ct.useEmulator(...gt),Ct},[gt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>$O(this.database,t));let a=i;return r&&(a=r(i)),function XB(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:KO(r,"update"),set:KO(r,"set"),push:i=>r.push(i),remove:JB(r),snapshotChanges:i=>WO(n,i,t).pipe(un.iC),stateChanges:i=>zO(n,i,t).pipe(un.iC),auditTrail:i=>function ZB(n,e,t){return function QB(n,e,t){return function YB(n,e){return d0(n,"value","on",e).pipe((0,Et.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function KF(...n){const e=(0,Lu.jO)(n);return(0,Rr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,Zs.Xf)(n[g]).subscribe((0,hn.x)(r,w=>{a[g]=w,!h&&!l[g]&&(l[g]=!0,(h=l.every(ss.y))&&(l=null))},zF.Z));t.subscribe((0,hn.x)(r,g=>{if(h){const w=[g,...a];r.next(e?e(...w):w)}}))})}(e),(0,Et.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(g=>g.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function ZF(n){return(0,Rr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,hn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Et.U)(i=>i.actions))}(n,zO(n,e).pipe(vi((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(un.iC),valueChanges:(i,a)=>WO(n,i,t).pipe((0,Et.U)(h=>h.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),un.iC)}}(a,this)}object(t){return function ej(n,e){return{query:n,snapshotChanges:()=>ZO(n,e.schedulers.outsideAngular)().pipe(un.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ZO(n,e.schedulers.outsideAngular)().pipe(un.iC,(0,Et.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>$O(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Vr.Dh),_.LFG(Vr.xv,8),_.LFG(tj,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(un.HU),_.LFG(nj,8),_.LFG(kd,8),_.LFG(by,8),_.LFG(Ty,8),_.LFG(_f,8),_.LFG(cE,8),_.LFG(Dy,8),_.LFG(Og,8),_.LFG(cs,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ij=(()=>{class n{constructor(){Md.Z.registerVersion("angularfire",un.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[rj]}),n})();const YO_firebase={apiKey:"AIzaSyCD_7CYi6YpF-e1S2BAe_CaEv5COhL5WmI",authDomain:"senselive-fd1ee.firebaseapp.com",projectId:"senselive-fd1ee",storageBucket:"senselive-fd1ee.appspot.com",messagingSenderId:"746175344138",appId:"1:746175344138:web:42a4eba55df1486eb4b9f3"};var sj=O(4929);let jp=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new sj.N).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(NM),_.LFG(kd),_.LFG(hi),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(jp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-sign-in"]],decls:29,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Sign In"),_.qZA(),_.TgZ(5,"div",3),_._UZ(6,"input",4,5),_.qZA(),_.TgZ(8,"div",3),_._UZ(9,"input",6,7),_.qZA(),_.TgZ(11,"div",3)(12,"input",8),_.NdJ("click",function(){_.CHM(i);const l=_.MAs(7),h=_.MAs(10);return r.authService.SignIn(l.value,h.value)}),_.qZA()(),_.TgZ(13,"div",3)(14,"span",9)(15,"span",10),_._uU(16,"Or"),_.qZA()()(),_.TgZ(17,"div",3)(18,"button",11),_.NdJ("click",function(){return r.authService.GoogleAuth()}),_._UZ(19,"i",12),_._uU(20," Log in with Google "),_.qZA()(),_.TgZ(21,"div",13)(22,"span",14),_._uU(23,"Forgot Password?"),_.qZA()()(),_.TgZ(24,"div",15)(25,"span"),_._uU(26,"Don't have an account?"),_.TgZ(27,"span",16),_._uU(28," Sign Up"),_.qZA()()()()()}},directives:[hc],styles:[""]}),n})(),aj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(jp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Sign Up"),_.qZA(),_.TgZ(5,"div",3),_._UZ(6,"input",4,5),_.qZA(),_.TgZ(8,"div",3),_._UZ(9,"input",6,7),_.qZA(),_.TgZ(11,"div",3)(12,"input",8),_.NdJ("click",function(){_.CHM(i);const l=_.MAs(7),h=_.MAs(10);return r.authService.SignUp(l.value,h.value)}),_.qZA()(),_.TgZ(13,"div",3)(14,"span",9)(15,"span",10),_._uU(16,"Or"),_.qZA()()(),_.TgZ(17,"div",3)(18,"button",11),_.NdJ("click",function(){return r.authService.GoogleAuth()}),_._UZ(19,"i",12),_._uU(20," Continue with Google "),_.qZA()()(),_.TgZ(21,"div",13)(22,"span"),_._uU(23,"Already have an account? "),_.TgZ(24,"span",14),_._uU(25,"Log In"),_.qZA()()()()()}},directives:[hc],styles:[""]}),n})();function uj(n,e){if(1&n&&(_.TgZ(0,"div",4)(1,"div",18)(2,"div",19),_._UZ(3,"img",20),_.TgZ(4,"div",21)(5,"h1"),_._uU(6,"Hello: "),_.TgZ(7,"strong"),_._uU(8),_.qZA()(),_.TgZ(9,"p"),_._uU(10,"User ID: "),_.TgZ(11,"strong"),_._uU(12),_.qZA()(),_.TgZ(13,"p"),_._uU(14,"Email: "),_.TgZ(15,"strong"),_._uU(16),_.qZA()(),_.TgZ(17,"p"),_._uU(18,"Email Verified: "),_.TgZ(19,"strong"),_._uU(20),_.qZA()()()()()()),2&n){const t=e.ngIf;_.xp6(3),_.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",_.LSH),_.s9C("alt",t.displayName),_.xp6(5),_.Oqu(t.displayName?t.displayName:"User"),_.xp6(4),_.Oqu(t.uid),_.xp6(4),_.Oqu(t.email),_.xp6(4),_.Oqu(t.emailVerified)}}let lj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(jp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/LOGO.png","alt","SenseLive Demo Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(_.TgZ(0,"nav",0)(1,"a",1),_._UZ(2,"img",2),_.qZA()(),_.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),_._UZ(10,"i",10),_._uU(11,"User Profile "),_.qZA()(),_.TgZ(12,"li",8)(13,"a",11),_.NdJ("click",function(){return r.authService.SignOut()}),_._UZ(14,"i",12),_._uU(15,"Log out "),_.qZA()()()()(),_.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),_._uU(20,"User Profile"),_.qZA()(),_.YNc(21,uj,21,6,"div",17),_.qZA()()()()),2&t&&(_.xp6(21),_.Q6J("ngIf",r.authService.userData))},directives:[wr],styles:["img[_ngcontent-%COMP%]{width:100px;height:40px;object-fit:contain}"]}),n})(),cj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(jp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Reset Password"),_.qZA(),_.TgZ(5,"p",3),_._uU(6," Please enter your email address to request a password reset. "),_.qZA(),_.TgZ(7,"div",4),_._UZ(8,"input",5,6),_.qZA(),_.TgZ(10,"div",4)(11,"input",7),_.NdJ("click",function(){_.CHM(i);const l=_.MAs(9);return r.authService.ForgotPassword(l.value)}),_.qZA()()(),_.TgZ(12,"div",8)(13,"span"),_._uU(14,"Go back to ? "),_.TgZ(15,"span",9),_._uU(16,"Log In"),_.qZA()()()()()}},directives:[hc],styles:[""]}),n})();function dj(n,e){if(1&n&&(_.TgZ(0,"div",4)(1,"p",9),_._uU(2," We have sent a confirmation email to "),_.TgZ(3,"strong"),_._uU(4),_.qZA(),_._uU(5,". "),_.qZA(),_.TgZ(6,"p",9),_._uU(7," Please check your email and click on the link to verfiy your email address. "),_.qZA()()),2&n){const t=e.ngIf;_.xp6(4),_.Oqu(t.email)}}const hj=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:oj},{path:"register-user",component:aj},{path:"dashboard",component:lj,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(jp),_.LFG(hi))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:cj},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(jp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Thank You for Registering"),_.qZA(),_.YNc(5,dj,8,1,"div",3),_.TgZ(6,"div",4)(7,"button",5),_.NdJ("click",function(){return r.authService.SendVerificationMail()}),_._UZ(8,"i",6),_._uU(9," Resend Verification Email "),_.qZA()()(),_.TgZ(10,"div",7)(11,"span"),_._uU(12,"Go back to?"),_.TgZ(13,"span",8),_._uU(14," Sign in"),_.qZA()()()()()),2&t&&(_.xp6(5),_.Q6J("ngIf",r.authService.userData))},directives:[wr,hc],styles:[""]}),n})()}];let fj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[F0.forRoot(hj)],F0]}),n})(),pj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[hf]}),n.\u0275inj=_.cJS({providers:[jp],imports:[[La,Vr.hO.initializeApp(YO_firebase),dE,WF,sI,ij,fj]]}),n})();Pu().bootstrapModule(pj).catch(n=>console.error(n))},5867:(ot,De,O)=>{"use strict";O.d(De,{Mq:()=>_.getApp,C6:()=>_.getApps});var _=O(9681);(0,_.registerVersion)("firebase","9.6.7","app")},127:(ot,De,O)=>{"use strict";O.d(De,{Z:()=>_.Z});var _=O(3942);_.Z.registerVersion("firebase","9.6.7","app-compat")},5881:(ot,De,O)=>{"use strict";O.r(De);var _=O(5861),B=O(3942),N=O(4929),ae=O(2090),le=(O(9681),O(1877),O(4859));function ue(){return window}function $(){return($=(0,_.Z)(function*(oe,K,W){var Te;const{BuildInfo:qe}=ue();(0,N.ap)(K.sessionId,"AuthEvent did not contain a session ID");const st=yield ce(K.sessionId),At={};return(0,N.aq)()?At.ibi=qe.packageName:(0,N.ar)()?At.apn=qe.packageName:(0,N.as)(oe,"operation-not-supported-in-this-environment"),qe.displayName&&(At.appDisplayName=qe.displayName),At.sessionId=st,(0,N.at)(oe,W,K.type,void 0,null!==(Te=K.eventId)&&void 0!==Te?Te:void 0,At)})).apply(this,arguments)}function $e(){return($e=(0,_.Z)(function*(oe){const{BuildInfo:K}=ue(),W={};(0,N.aq)()?W.iosBundleId=K.packageName:(0,N.ar)()?W.androidPackageName=K.packageName:(0,N.as)(oe,"operation-not-supported-in-this-environment"),yield(0,N.au)(oe,W)})).apply(this,arguments)}function je(){return(je=(0,_.Z)(function*(oe,K,W){const{cordova:Te}=ue();let qe=()=>{};try{yield new Promise((st,At)=>{let Bt=null;function Ot(){var Lt;st();const Lr=null===(Lt=Te.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof Lr&&Lr(),"function"==typeof(null==W?void 0:W.close)&&W.close()}function Un(){Bt||(Bt=window.setTimeout(()=>{At((0,N.av)(oe,"redirect-cancelled-by-user"))},2e3))}function ri(){"visible"===(null==document?void 0:document.visibilityState)&&Un()}K.addPassiveListener(Ot),document.addEventListener("resume",Un,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",ri,!1),qe=()=>{K.removePassiveListener(Ot),document.removeEventListener("resume",Un,!1),document.removeEventListener("visibilitychange",ri,!1),Bt&&window.clearTimeout(Bt)}})}finally{qe()}})).apply(this,arguments)}function ce(oe){return Re.apply(this,arguments)}function Re(){return(Re=(0,_.Z)(function*(oe){const K=Pe(oe),W=yield crypto.subtle.digest("SHA-256",K);return Array.from(new Uint8Array(W)).map(qe=>qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pe(oe){if((0,N.ap)(/[0-9a-zA-Z]+/.test(oe),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(oe);const K=new ArrayBuffer(oe.length),W=new Uint8Array(K);for(let Te=0;Te<oe.length;Te++)W[Te]=oe.charCodeAt(Te);return W}class be extends N.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(K=>{this.resolveInialized=K})}addPassiveListener(K){this.passiveListeners.add(K)}removePassiveListener(K){this.passiveListeners.delete(K)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(K){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(K)),super.onEvent(K)}initialized(){var K=this;return(0,_.Z)(function*(){yield K.initPromise})()}}function re(oe){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,_.Z)(function*(oe){const K=yield fe()._get(ye(oe));return K&&(yield fe()._remove(ye(oe))),K})).apply(this,arguments)}function pe(){const oe=[],K="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const Te=Math.floor(Math.random()*K.length);oe.push(K.charAt(Te))}return oe.join("")}function fe(){return(0,N.ax)(N.b)}function ye(oe){return(0,N.ay)("authEvent",oe.config.apiKey,oe.name)}function yt(oe){if(!(null==oe?void 0:oe.includes("?")))return{};const[K,...W]=oe.split("?");return(0,ae.zd)(W.join("?"))}function rt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.av)("no-auth-event")}}function Ht(){var oe;return(null===(oe=null==self?void 0:self.location)||void 0===oe?void 0:oe.protocol)||null}function In(oe=(0,ae.z$)()){return!("file:"!==Ht()&&"ionic:"!==Ht()||!oe.toLowerCase().match(/iphone|ipad|ipod|android/))}function mi(){try{const oe=self.localStorage,K=N.aG();if(oe)return oe.setItem(K,"1"),oe.removeItem(K),!function Zi(oe=(0,ae.z$)()){return function Kn(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Dr(oe=(0,ae.z$)()){return/Edge\/\d+/.test(oe)}(oe)}()||(0,ae.hl)()}catch(oe){return Fi()&&(0,ae.hl)()}return!1}function Fi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fn(){return(function en(){return"http:"===Ht()||"https:"===Ht()}()||(0,ae.ru)()||In())&&!function Li(){return(0,ae.b$)()||(0,ae.UG)()}()&&mi()&&!Fi()}function Yi(){return In()&&"undefined"!=typeof document}function Or(){return(Or=(0,_.Z)(function*(){return!!Yi()&&new Promise(oe=>{const K=setTimeout(()=>{oe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(K),oe(!0)})})})).apply(this,arguments)}const Wt={LOCAL:"local",NONE:"none",SESSION:"session"},Sr=N.aw,ct="persistence";function bt(oe){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,_.Z)(function*(oe){yield oe._initializationPromise;const K=St(),W=N.ay(ct,oe.config.apiKey,oe.name);K&&K.setItem(W,oe._getPersistence())})).apply(this,arguments)}function St(){var oe;try{return(null===(oe=function An(){return"undefined"!=typeof window?window:null}())||void 0===oe?void 0:oe.sessionStorage)||null}catch(K){return null}}const it=N.aw;class Je{constructor(){this.browserResolver=N.ax(N.k),this.cordovaResolver=N.ax(class xn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aA}_initialize(K){var W=this;return(0,_.Z)(function*(){const Te=K._key();let qe=W.eventManagers.get(Te);return qe||(qe=new be(K),W.eventManagers.set(Te,qe),W.attachCallbackListeners(K,qe)),qe})()}_openPopup(K){(0,N.as)(K,"operation-not-supported-in-this-environment")}_openRedirect(K,W,Te,qe){var st=this;return(0,_.Z)(function*(){!function Q(oe){var K,W,Te,qe,st,At,Bt,Ot,Un,ri;const Lt=ue();(0,N.aw)("function"==typeof(null===(K=null==Lt?void 0:Lt.universalLinks)||void 0===K?void 0:K.subscribe),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aw)(void 0!==(null===(W=null==Lt?void 0:Lt.BuildInfo)||void 0===W?void 0:W.packageName),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aw)("function"==typeof(null===(st=null===(qe=null===(Te=null==Lt?void 0:Lt.cordova)||void 0===Te?void 0:Te.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===st?void 0:st.openUrl),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(Ot=null===(Bt=null===(At=null==Lt?void 0:Lt.cordova)||void 0===At?void 0:At.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===Ot?void 0:Ot.isAvailable),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(ri=null===(Un=null==Lt?void 0:Lt.cordova)||void 0===Un?void 0:Un.InAppBrowser)||void 0===ri?void 0:ri.open),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(K);const At=yield st._initialize(K);yield At.initialized(),At.resetRedirect(),(0,N.aB)(),yield st._originValidation(K);const Bt=function ve(oe,K,W=null){return{type:K,eventId:W,urlResponse:null,sessionId:pe(),postBody:null,tenantId:oe.tenantId,error:(0,N.av)(oe,"no-auth-event")}}(K,Te,qe);yield function ze(oe,K){return fe()._set(ye(oe),K)}(K,Bt);const Ot=yield function G(oe,K,W){return $.apply(this,arguments)}(K,Bt,W),Un=yield function xe(oe){const{cordova:K}=ue();return new Promise(W=>{K.plugins.browsertab.isAvailable(Te=>{let qe=null;Te?K.plugins.browsertab.openUrl(oe):qe=K.InAppBrowser.open(oe,(0,N.ao)()?"_blank":"_system","location=yes"),W(qe)})})}(Ot);return function Le(oe,K,W){return je.apply(this,arguments)}(K,At,Un)})()}_isIframeWebStorageSupported(K,W){throw new Error("Method not implemented.")}_originValidation(K){const W=K._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function ne(oe){return $e.apply(this,arguments)}(K)),this.originValidationPromises[W]}attachCallbackListeners(K,W){const{universalLinks:Te,handleOpenURL:qe,BuildInfo:st}=ue(),At=setTimeout((0,_.Z)(function*(){yield re(K),W.onEvent(rt())}),500),Bt=function(){var ri=(0,_.Z)(function*(Lt){clearTimeout(At);const Lr=yield re(K);let Qi=null;Lr&&(null==Lt?void 0:Lt.url)&&(Qi=function X(oe,K){var W,Te;const qe=function de(oe){const K=yt(oe),W=K.link?decodeURIComponent(K.link):void 0,Te=yt(W).link,qe=K.deep_link_id?decodeURIComponent(K.deep_link_id):void 0;return yt(qe).link||qe||Te||W||oe}(K);if(qe.includes("/__/auth/callback")){const st=yt(qe),At=st.firebaseError?function Fe(oe){try{return JSON.parse(oe)}catch(K){return null}}(decodeURIComponent(st.firebaseError)):null,Bt=null===(Te=null===(W=null==At?void 0:At.code)||void 0===W?void 0:W.split("auth/"))||void 0===Te?void 0:Te[1],Ot=Bt?(0,N.av)(Bt):null;return Ot?{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,error:Ot,urlResponse:null,sessionId:null,postBody:null}:{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,sessionId:oe.sessionId,urlResponse:qe,postBody:null}}return null}(Lr,Lt.url)),W.onEvent(Qi||rt())});return function(Lr){return ri.apply(this,arguments)}}();void 0!==Te&&"function"==typeof Te.subscribe&&Te.subscribe(null,Bt);const Ot=qe,Un=`${st.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var ri=(0,_.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(Un)&&Bt({url:Lt}),"function"==typeof Ot)try{Ot(Lt)}catch(Lr){console.error(Lr)}});return function(Lt){return ri.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aA}_initialize(K){var W=this;return(0,_.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(K)})()}_openPopup(K,W,Te,qe){var st=this;return(0,_.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(K,W,Te,qe)})()}_openRedirect(K,W,Te,qe){var st=this;return(0,_.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(K,W,Te,qe)})()}_isIframeWebStorageSupported(K,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(K,W)}_originValidation(K){return this.assertedUnderlyingResolver._originValidation(K)}get _shouldInitProactively(){return Yi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return it(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var K=this;return(0,_.Z)(function*(){if(K.underlyingResolver)return;const W=yield function ht(){return Or.apply(this,arguments)}();K.underlyingResolver=W?K.cordovaResolver:K.browserResolver})()}}function Us(oe){return oe.unwrap()}function jt(oe){return Zn(oe)}function Zn(oe){const{_tokenResponse:K}=oe instanceof ae.ZR?oe.customData:oe;if(!K)return null;if(!(oe instanceof ae.ZR)&&"temporaryProof"in K&&"phoneNumber"in K)return N.P.credentialFromResult(oe);const W=K.providerId;if(!W||W===N.o.PASSWORD)return null;let Te;switch(W){case N.o.GOOGLE:Te=N.N;break;case N.o.FACEBOOK:Te=N.M;break;case N.o.GITHUB:Te=N.Q;break;case N.o.TWITTER:Te=N.V;break;default:const{oauthIdToken:qe,oauthAccessToken:st,oauthTokenSecret:At,pendingToken:Bt,nonce:Ot}=K;return st||At||qe||Bt?Bt?W.startsWith("saml.")?N.aJ._create(W,Bt):N.I._fromParams({providerId:W,signInMethod:W,pendingToken:Bt,idToken:qe,accessToken:st}):new N.T(W).credential({idToken:qe,accessToken:st,rawNonce:Ot}):null}return oe instanceof ae.ZR?Te.credentialFromError(oe):Te.credentialFromResult(oe)}function wn(oe,K){return K.catch(W=>{throw W instanceof ae.ZR&&function Vs(oe,K){var W;const Te=null===(W=K.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===K.code)K.resolver=new z(oe,N.am(oe,K));else if(Te){const qe=Zn(K),st=K;qe&&(st.credential=qe,st.tenantId=Te.tenantId||void 0,st.email=Te.email||void 0,st.phoneNumber=Te.phoneNumber||void 0)}}(oe,W),W}).then(W=>{const qe=W.user;return{operationType:W.operationType,credential:jt(W),additionalUserInfo:N.ak(W),user:Ie.getOrCreate(qe)}})}function j(oe,K){return q.apply(this,arguments)}function q(){return(q=(0,_.Z)(function*(oe,K){const W=yield K;return{verificationId:W.verificationId,confirm:Te=>wn(oe,W.confirm(Te))}})).apply(this,arguments)}class z{constructor(K,W){this.resolver=W,this.auth=function ms(oe){return oe.wrapped()}(K)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(K){return wn(Us(this.auth),this.resolver.resolveSignIn(K))}}class Ie{constructor(K){this._delegate=K,this.multiFactor=N.an(K)}static getOrCreate(K){return Ie.USER_MAP.has(K)||Ie.USER_MAP.set(K,new Ie(K)),Ie.USER_MAP.get(K)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(K){return this._delegate.getIdTokenResult(K)}getIdToken(K){return this._delegate.getIdToken(K)}linkAndRetrieveDataWithCredential(K){return this.linkWithCredential(K)}linkWithCredential(K){var W=this;return(0,_.Z)(function*(){return wn(W.auth,N.Y(W._delegate,K))})()}linkWithPhoneNumber(K,W){var Te=this;return(0,_.Z)(function*(){return j(Te.auth,N.l(Te._delegate,K,W))})()}linkWithPopup(K){var W=this;return(0,_.Z)(function*(){return wn(W.auth,N.d(W._delegate,K,Je))})()}linkWithRedirect(K){var W=this;return(0,_.Z)(function*(){return yield bt(N.aC(W.auth)),N.g(W._delegate,K,Je)})()}reauthenticateAndRetrieveDataWithCredential(K){return this.reauthenticateWithCredential(K)}reauthenticateWithCredential(K){var W=this;return(0,_.Z)(function*(){return wn(W.auth,N.Z(W._delegate,K))})()}reauthenticateWithPhoneNumber(K,W){return j(this.auth,N.r(this._delegate,K,W))}reauthenticateWithPopup(K){return wn(this.auth,N.e(this._delegate,K,Je))}reauthenticateWithRedirect(K){var W=this;return(0,_.Z)(function*(){return yield bt(N.aC(W.auth)),N.h(W._delegate,K,Je)})()}sendEmailVerification(K){return N.aa(this._delegate,K)}unlink(K){var W=this;return(0,_.Z)(function*(){return yield N.aj(W._delegate,K),W})()}updateEmail(K){return N.af(this._delegate,K)}updatePassword(K){return N.ag(this._delegate,K)}updatePhoneNumber(K){return N.u(this._delegate,K)}updateProfile(K){return N.ae(this._delegate,K)}verifyBeforeUpdateEmail(K,W){return N.ab(this._delegate,K,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ie.USER_MAP=new WeakMap;const ie=N.aw;let Ke=(()=>{class oe{constructor(W,Te){if(this.app=W,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:qe}=W.options;ie(qe,"invalid-api-key",{appName:W.name}),ie(qe,"invalid-api-key",{appName:W.name});const st="undefined"!=typeof window?Je:void 0;this._delegate=Te.initialize({options:{persistence:zt(qe,W.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(N.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ie.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,Te){N.E(this._delegate,W,Te)}applyActionCode(W){return N.a1(this._delegate,W)}checkActionCode(W){return N.a2(this._delegate,W)}confirmPasswordReset(W,Te){return N.a0(this._delegate,W,Te)}createUserWithEmailAndPassword(W,Te){var qe=this;return(0,_.Z)(function*(){return wn(qe._delegate,N.a4(qe._delegate,W,Te))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return N.a9(this._delegate,W)}isSignInWithEmailLink(W){return N.a7(this._delegate,W)}getRedirectResult(){var W=this;return(0,_.Z)(function*(){ie(Fn(),W._delegate,"operation-not-supported-in-this-environment");const Te=yield N.j(W._delegate,Je);return Te?wn(W._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function ur(oe,K){(0,N.aC)(oe)._logFramework(K)}(this._delegate,W)}onAuthStateChanged(W,Te,qe){const{next:st,error:At,complete:Bt}=dt(W,Te,qe);return this._delegate.onAuthStateChanged(st,At,Bt)}onIdTokenChanged(W,Te,qe){const{next:st,error:At,complete:Bt}=dt(W,Te,qe);return this._delegate.onIdTokenChanged(st,At,Bt)}sendSignInLinkToEmail(W,Te){return N.a6(this._delegate,W,Te)}sendPasswordResetEmail(W,Te){return N.$(this._delegate,W,Te||void 0)}setPersistence(W){var Te=this;return(0,_.Z)(function*(){let qe;switch(function ut(oe,K){Sr(Object.values(Wt).includes(K),oe,"invalid-persistence-type"),(0,ae.b$)()?Sr(K!==Wt.SESSION,oe,"unsupported-persistence-type"):(0,ae.UG)()?Sr(K===Wt.NONE,oe,"unsupported-persistence-type"):Fi()?Sr(K===Wt.NONE||K===Wt.LOCAL&&(0,ae.hl)(),oe,"unsupported-persistence-type"):Sr(K===Wt.NONE||mi(),oe,"unsupported-persistence-type")}(Te._delegate,W),W){case Wt.SESSION:qe=N.a;break;case Wt.LOCAL:qe=(yield N.ax(N.i)._isAvailable())?N.i:N.b;break;case Wt.NONE:qe=N.K;break;default:return N.as("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence(qe)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return wn(this._delegate,N.W(this._delegate))}signInWithCredential(W){return wn(this._delegate,N.X(this._delegate,W))}signInWithCustomToken(W){return wn(this._delegate,N._(this._delegate,W))}signInWithEmailAndPassword(W,Te){return wn(this._delegate,N.a5(this._delegate,W,Te))}signInWithEmailLink(W,Te){return wn(this._delegate,N.a8(this._delegate,W,Te))}signInWithPhoneNumber(W,Te){return j(this._delegate,N.s(this._delegate,W,Te))}signInWithPopup(W){var Te=this;return(0,_.Z)(function*(){return ie(Fn(),Te._delegate,"operation-not-supported-in-this-environment"),wn(Te._delegate,N.c(Te._delegate,W,Je))})()}signInWithRedirect(W){var Te=this;return(0,_.Z)(function*(){return ie(Fn(),Te._delegate,"operation-not-supported-in-this-environment"),yield bt(Te._delegate),N.f(Te._delegate,W,Je)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return N.a3(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return oe.Persistence=Wt,oe})();function dt(oe,K,W){let Te=oe;"function"!=typeof oe&&({next:Te,error:K,complete:W}=oe);const qe=Te;return{next:At=>qe(At&&Ie.getOrCreate(At)),error:K,complete:W}}function zt(oe,K){const W=function lr(oe,K){const W=St();if(!W)return[];const Te=N.ay(ct,oe,K);switch(W.getItem(Te)){case Wt.NONE:return[N.K];case Wt.LOCAL:return[N.i,N.a];case Wt.SESSION:return[N.a];default:return[]}}(oe,K);if("undefined"!=typeof self&&!W.includes(N.i)&&W.push(N.i),"undefined"!=typeof window)for(const Te of[N.b,N.a])W.includes(Te)||W.push(Te);return W.includes(N.K)||W.push(N.K),W}class on{constructor(){this.providerId="phone",this._delegate=new N.P(Us(B.Z.auth()))}static credential(K,W){return N.P.credential(K,W)}verifyPhoneNumber(K,W){return this._delegate.verifyPhoneNumber(K,W)}unwrap(){return this._delegate}}on.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,on.PROVIDER_ID=N.P.PROVIDER_ID;const Yn=N.aw;class cr{constructor(K,W,Te=B.Z.app()){var qe;Yn(null===(qe=Te.options)||void 0===qe?void 0:qe.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new N.R(K,W,Te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Qn(oe){oe.INTERNAL.registerComponent(new le.wA("auth-compat",K=>{const W=K.getProvider("app-compat").getImmediate(),Te=K.getProvider("auth");return new Ke(W,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.L,FacebookAuthProvider:N.M,GithubAuthProvider:N.Q,GoogleAuthProvider:N.N,OAuthProvider:N.T,SAMLAuthProvider:N.U,PhoneAuthProvider:on,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:cr,TwitterAuthProvider:N.V,Auth:Ke,AuthCredential:N.G,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),oe.registerVersion("@firebase/auth-compat","0.2.9")}(B.Z)},2940:function(ot,De){!function(O){"use strict";function _(Q){return Array.prototype.slice.call(Q)}function B(Q){return new Promise(function(ce,Re){Q.onsuccess=function(){ce(Q.result)},Q.onerror=function(){Re(Q.error)}})}function N(Q,ce,Re){var Pe,he=new Promise(function(be,ve){B(Pe=Q[ce].apply(Q,Re)).then(be,ve)});return he.request=Pe,he}function ae(Q,ce,Re){var Pe=N(Q,ce,Re);return Pe.then(function(he){if(he)return new G(he,Pe.request)})}function se(Q,ce,Re){Re.forEach(function(Pe){Object.defineProperty(Q.prototype,Pe,{get:function(){return this[ce][Pe]},set:function(he){this[ce][Pe]=he}})})}function me(Q,ce,Re,Pe){Pe.forEach(function(he){he in Re.prototype&&(Q.prototype[he]=function(){return N(this[ce],he,arguments)})})}function le(Q,ce,Re,Pe){Pe.forEach(function(he){he in Re.prototype&&(Q.prototype[he]=function(){return this[ce][he].apply(this[ce],arguments)})})}function ue(Q,ce,Re,Pe){Pe.forEach(function(he){he in Re.prototype&&(Q.prototype[he]=function(){return ae(this[ce],he,arguments)})})}function _e(Q){this._index=Q}function G(Q,ce){this._cursor=Q,this._request=ce}function $(Q){this._store=Q}function ne(Q){this._tx=Q,this.complete=new Promise(function(ce,Re){Q.oncomplete=function(){ce()},Q.onerror=function(){Re(Q.error)},Q.onabort=function(){Re(Q.error)}})}function $e(Q,ce,Re){this._db=Q,this.oldVersion=ce,this.transaction=new ne(Re)}function xe(Q){this._db=Q}se(_e,"_index",["name","keyPath","multiEntry","unique"]),me(_e,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ue(_e,"_index",IDBIndex,["openCursor","openKeyCursor"]),se(G,"_cursor",["direction","key","primaryKey","value"]),me(G,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Q){Q in IDBCursor.prototype&&(G.prototype[Q]=function(){var ce=this,Re=arguments;return Promise.resolve().then(function(){return ce._cursor[Q].apply(ce._cursor,Re),B(ce._request).then(function(Pe){if(Pe)return new G(Pe,ce._request)})})})}),$.prototype.createIndex=function(){return new _e(this._store.createIndex.apply(this._store,arguments))},$.prototype.index=function(){return new _e(this._store.index.apply(this._store,arguments))},se($,"_store",["name","keyPath","indexNames","autoIncrement"]),me($,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ue($,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),le($,"_store",IDBObjectStore,["deleteIndex"]),ne.prototype.objectStore=function(){return new $(this._tx.objectStore.apply(this._tx,arguments))},se(ne,"_tx",["objectStoreNames","mode"]),le(ne,"_tx",IDBTransaction,["abort"]),$e.prototype.createObjectStore=function(){return new $(this._db.createObjectStore.apply(this._db,arguments))},se($e,"_db",["name","version","objectStoreNames"]),le($e,"_db",IDBDatabase,["deleteObjectStore","close"]),xe.prototype.transaction=function(){return new ne(this._db.transaction.apply(this._db,arguments))},se(xe,"_db",["name","version","objectStoreNames"]),le(xe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Q){[$,_e].forEach(function(ce){Q in ce.prototype&&(ce.prototype[Q.replace("open","iterate")]=function(){var Re=_(arguments),Pe=Re[Re.length-1],he=this._store||this._index,be=he[Q].apply(he,Re.slice(0,-1));be.onsuccess=function(){Pe(be.result)}})})}),[_e,$].forEach(function(Q){Q.prototype.getAll||(Q.prototype.getAll=function(ce,Re){var Pe=this,he=[];return new Promise(function(be){Pe.iterateCursor(ce,function(ve){ve?(he.push(ve.value),void 0===Re||he.length!=Re?ve.continue():be(he)):be(he)})})})}),O.openDb=function Le(Q,ce,Re){var Pe=N(indexedDB,"open",[Q,ce]),he=Pe.request;return he&&(he.onupgradeneeded=function(be){Re&&Re(new $e(he.result,be.oldVersion,he.transaction))}),Pe.then(function(be){return new xe(be)})},O.deleteDb=function je(Q){return N(indexedDB,"deleteDatabase",[Q])},Object.defineProperty(O,"__esModule",{value:!0})}(De)},8306:(ot,De,O)=>{"use strict";O.d(De,{y:()=>G});var _=O(930),B=O(727),N=O(8822),ae=O(4671);var le=O(2416),ue=O(576),_e=O(2806);let G=(()=>{class xe{constructor(je){je&&(this._subscribe=je)}lift(je){const Q=new xe;return Q.source=this,Q.operator=je,Q}subscribe(je,Q,ce){const Re=function $e(xe){return xe&&xe instanceof _.Lv||function ne(xe){return xe&&(0,ue.m)(xe.next)&&(0,ue.m)(xe.error)&&(0,ue.m)(xe.complete)}(xe)&&(0,B.Nn)(xe)}(je)?je:new _.Hp(je,Q,ce);return(0,_e.x)(()=>{const{operator:Pe,source:he}=this;Re.add(Pe?Pe.call(Re,he):he?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(je){try{return this._subscribe(je)}catch(Q){je.error(Q)}}forEach(je,Q){return new(Q=$(Q))((ce,Re)=>{const Pe=new _.Hp({next:he=>{try{je(he)}catch(be){Re(be),Pe.unsubscribe()}},error:Re,complete:ce});this.subscribe(Pe)})}_subscribe(je){var Q;return null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(je)}[N.L](){return this}pipe(...je){return function me(xe){return 0===xe.length?ae.y:1===xe.length?xe[0]:function(je){return xe.reduce((Q,ce)=>ce(Q),je)}}(je)(this)}toPromise(je){return new(je=$(je))((Q,ce)=>{let Re;this.subscribe(Pe=>Re=Pe,Pe=>ce(Pe),()=>Q(Re))})}}return xe.create=Le=>new xe(Le),xe})();function $(xe){var Le;return null!==(Le=null!=xe?xe:le.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ot,De,O)=>{"use strict";O.d(De,{x:()=>le});var _=O(8306),B=O(727);const ae=(0,O(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=O(8737),me=O(2806);let le=(()=>{class _e extends _.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const ne=new ue(this,this);return ne.operator=$,ne}_throwIfClosed(){if(this.closed)throw new ae}next($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ne=this.observers.slice();for(const $e of ne)$e.next($)}})}error($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:ne}=this;for(;ne.length;)ne.shift().error($)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:ne,isStopped:$e,observers:xe}=this;return ne||$e?B.Lc:(xe.push($),new B.w0(()=>(0,se.P)(xe,$)))}_checkFinalizedStatuses($){const{hasError:ne,thrownError:$e,isStopped:xe}=this;ne?$.error($e):xe&&$.complete()}asObservable(){const $=new _.y;return $.source=this,$}}return _e.create=(G,$)=>new ue(G,$),_e})();class ue extends le{constructor(G,$){super(),this.destination=G,this.source=$}next(G){var $,ne;null===(ne=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===ne||ne.call($,G)}error(G){var $,ne;null===(ne=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===ne||ne.call($,G)}complete(){var G,$;null===($=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===$||$.call(G)}_subscribe(G){var $,ne;return null!==(ne=null===($=this.source)||void 0===$?void 0:$.subscribe(G))&&void 0!==ne?ne:B.Lc}}},930:(ot,De,O)=>{"use strict";O.d(De,{Hp:()=>je,Lv:()=>ne});var _=O(576),B=O(727),N=O(2416),ae=O(7849),se=O(5032);const me=_e("C",void 0,void 0);function _e(he,be,ve){return{kind:he,value:be,error:ve}}var G=O(3410),$=O(2806);class ne extends B.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,B.Nn)(be)&&be.add(this)):this.destination=Pe}static create(be,ve,ze){return new je(be,ve,ze)}next(be){this.isStopped?Re(function ue(he){return _e("N",he,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Re(function le(he){return _e("E",void 0,he)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Re(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function xe(he,be){return $e.call(he,be)}class Le{constructor(be){this.partialObserver=be}next(be){const{partialObserver:ve}=this;if(ve.next)try{ve.next(be)}catch(ze){Q(ze)}}error(be){const{partialObserver:ve}=this;if(ve.error)try{ve.error(be)}catch(ze){Q(ze)}else Q(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(ve){Q(ve)}}}class je extends ne{constructor(be,ve,ze){let re;if(super(),(0,_.m)(be)||!be)re={next:null!=be?be:void 0,error:null!=ve?ve:void 0,complete:null!=ze?ze:void 0};else{let Qe;this&&N.v.useDeprecatedNextContext?(Qe=Object.create(be),Qe.unsubscribe=()=>this.unsubscribe(),re={next:be.next&&xe(be.next,Qe),error:be.error&&xe(be.error,Qe),complete:be.complete&&xe(be.complete,Qe)}):re=be}this.destination=new Le(re)}}function Q(he){N.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(he):(0,ae.h)(he)}function Re(he,be){const{onStoppedNotification:ve}=N.v;ve&&G.z.setTimeout(()=>ve(he,be))}const Pe={closed:!0,next:se.Z,error:function ce(he){throw he},complete:se.Z}},727:(ot,De,O)=>{"use strict";O.d(De,{Lc:()=>me,w0:()=>se,Nn:()=>le});var _=O(576);const N=(0,O(3888).d)(_e=>function($){_e(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((ne,$e)=>`${$e+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ae=O(8737);class se{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const xe of $)xe.remove(this);else $.remove(this);const{initialTeardown:ne}=this;if((0,_.m)(ne))try{ne()}catch(xe){G=xe instanceof N?xe.errors:[xe]}const{_teardowns:$e}=this;if($e){this._teardowns=null;for(const xe of $e)try{ue(xe)}catch(Le){G=null!=G?G:[],Le instanceof N?G=[...G,...Le.errors]:G.push(Le)}}if(G)throw new N(G)}}add(G){var $;if(G&&G!==this)if(this.closed)ue(G);else{if(G instanceof se){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._teardowns=null!==($=this._teardowns)&&void 0!==$?$:[]).push(G)}}_hasParent(G){const{_parentage:$}=this;return $===G||Array.isArray($)&&$.includes(G)}_addParent(G){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(G),$):$?[$,G]:G}_removeParent(G){const{_parentage:$}=this;$===G?this._parentage=null:Array.isArray($)&&(0,ae.P)($,G)}remove(G){const{_teardowns:$}=this;$&&(0,ae.P)($,G),G instanceof se&&G._removeParent(this)}}se.EMPTY=(()=>{const _e=new se;return _e.closed=!0,_e})();const me=se.EMPTY;function le(_e){return _e instanceof se||_e&&"closed"in _e&&(0,_.m)(_e.remove)&&(0,_.m)(_e.add)&&(0,_.m)(_e.unsubscribe)}function ue(_e){(0,_.m)(_e)?_e():_e.unsubscribe()}},2416:(ot,De,O)=>{"use strict";O.d(De,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,De,O)=>{"use strict";O.d(De,{E:()=>B});const B=new(O(8306).y)(se=>se.complete())},8996:(ot,De,O)=>{"use strict";O.d(De,{D:()=>be});var _=O(8421),B=O(5363),N=O(9468),me=O(8306),ue=O(2202),_e=O(576),G=O(9672);function ne(ve,ze){if(!ve)throw new Error("Iterable cannot be null");return new me.y(re=>{(0,G.f)(re,ze,()=>{const Qe=ve[Symbol.asyncIterator]();(0,G.f)(re,ze,()=>{Qe.next().then(X=>{X.done?re.complete():re.next(X.value)})},0,!0)})})}var $e=O(3670),xe=O(8239),Le=O(1144),je=O(6495),Q=O(2206),ce=O(4532),Re=O(3260);function be(ve,ze){return ze?function he(ve,ze){if(null!=ve){if((0,$e.c)(ve))return function ae(ve,ze){return(0,_.Xf)(ve).pipe((0,N.R)(ze),(0,B.Q)(ze))}(ve,ze);if((0,Le.z)(ve))return function le(ve,ze){return new me.y(re=>{let Qe=0;return ze.schedule(function(){Qe===ve.length?re.complete():(re.next(ve[Qe++]),re.closed||this.schedule())})})}(ve,ze);if((0,xe.t)(ve))return function se(ve,ze){return(0,_.Xf)(ve).pipe((0,N.R)(ze),(0,B.Q)(ze))}(ve,ze);if((0,Q.D)(ve))return ne(ve,ze);if((0,je.T)(ve))return function $(ve,ze){return new me.y(re=>{let Qe;return(0,G.f)(re,ze,()=>{Qe=ve[ue.h](),(0,G.f)(re,ze,()=>{let X,pe;try{({value:X,done:pe}=Qe.next())}catch(fe){return void re.error(fe)}pe?re.complete():re.next(X)},0,!0)}),()=>(0,_e.m)(null==Qe?void 0:Qe.return)&&Qe.return()})}(ve,ze);if((0,Re.L)(ve))return function Pe(ve,ze){return ne((0,Re.Q)(ve),ze)}(ve,ze)}throw(0,ce.z)(ve)}(ve,ze):(0,_.Xf)(ve)}},8421:(ot,De,O)=>{"use strict";O.d(De,{Xf:()=>$e});var _=O(655),B=O(1144),N=O(8239),ae=O(8306),se=O(3670),me=O(2206),le=O(4532),ue=O(6495),_e=O(3260),G=O(576),$=O(7849),ne=O(8822);function $e(he){if(he instanceof ae.y)return he;if(null!=he){if((0,se.c)(he))return function xe(he){return new ae.y(be=>{const ve=he[ne.L]();if((0,G.m)(ve.subscribe))return ve.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(he);if((0,B.z)(he))return function Le(he){return new ae.y(be=>{for(let ve=0;ve<he.length&&!be.closed;ve++)be.next(he[ve]);be.complete()})}(he);if((0,N.t)(he))return function je(he){return new ae.y(be=>{he.then(ve=>{be.closed||(be.next(ve),be.complete())},ve=>be.error(ve)).then(null,$.h)})}(he);if((0,me.D)(he))return ce(he);if((0,ue.T)(he))return function Q(he){return new ae.y(be=>{for(const ve of he)if(be.next(ve),be.closed)return;be.complete()})}(he);if((0,_e.L)(he))return function Re(he){return ce((0,_e.Q)(he))}(he)}throw(0,le.z)(he)}function ce(he){return new ae.y(be=>{(function Pe(he,be){var ve,ze,re,Qe;return(0,_.mG)(this,void 0,void 0,function*(){try{for(ve=(0,_.KL)(he);!(ze=yield ve.next()).done;)if(be.next(ze.value),be.closed)return}catch(X){re={error:X}}finally{try{ze&&!ze.done&&(Qe=ve.return)&&(yield Qe.call(ve))}finally{if(re)throw re.error}}be.complete()})})(he,be).catch(ve=>be.error(ve))})}},6451:(ot,De,O)=>{"use strict";O.d(De,{T:()=>me});var _=O(8189),B=O(8421),N=O(515),ae=O(7669),se=O(8996);function me(...le){const ue=(0,ae.yG)(le),_e=(0,ae._6)(le,1/0),G=le;return G.length?1===G.length?(0,B.Xf)(G[0]):(0,_.J)(_e)((0,se.D)(G,ue)):N.E}},5403:(ot,De,O)=>{"use strict";O.d(De,{x:()=>B});var _=O(930);function B(ae,se,me,le,ue){return new N(ae,se,me,le,ue)}class N extends _.Lv{constructor(se,me,le,ue,_e,G){super(se),this.onFinalize=_e,this.shouldUnsubscribe=G,this._next=me?function($){try{me($)}catch(ne){se.error(ne)}}:super._next,this._error=ue?function($){try{ue($)}catch(ne){se.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch($){se.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(ot,De,O)=>{"use strict";O.d(De,{U:()=>N});var _=O(4482),B=O(5403);function N(ae,se){return(0,_.e)((me,le)=>{let ue=0;me.subscribe((0,B.x)(le,_e=>{le.next(ae.call(se,_e,ue++))}))})}},8189:(ot,De,O)=>{"use strict";O.d(De,{J:()=>N});var _=O(5577),B=O(4671);function N(ae=1/0){return(0,_.z)(B.y,ae)}},5577:(ot,De,O)=>{"use strict";O.d(De,{z:()=>ue});var _=O(4004),B=O(8421),N=O(4482),ae=O(9672),se=O(5403),le=O(576);function ue(_e,G,$=1/0){return(0,le.m)(G)?ue((ne,$e)=>(0,_.U)((xe,Le)=>G(ne,xe,$e,Le))((0,B.Xf)(_e(ne,$e))),$):("number"==typeof G&&($=G),(0,N.e)((ne,$e)=>function me(_e,G,$,ne,$e,xe,Le,je){const Q=[];let ce=0,Re=0,Pe=!1;const he=()=>{Pe&&!Q.length&&!ce&&G.complete()},be=ze=>ce<ne?ve(ze):Q.push(ze),ve=ze=>{xe&&G.next(ze),ce++;let re=!1;(0,B.Xf)($(ze,Re++)).subscribe((0,se.x)(G,Qe=>{null==$e||$e(Qe),xe?be(Qe):G.next(Qe)},()=>{re=!0},void 0,()=>{if(re)try{for(ce--;Q.length&&ce<ne;){const Qe=Q.shift();Le?(0,ae.f)(G,Le,()=>ve(Qe)):ve(Qe)}he()}catch(Qe){G.error(Qe)}}))};return _e.subscribe((0,se.x)(G,be,()=>{Pe=!0,he()})),()=>{null==je||je()}}(ne,$e,_e,$)))}},5363:(ot,De,O)=>{"use strict";O.d(De,{Q:()=>ae});var _=O(9672),B=O(4482),N=O(5403);function ae(se,me=0){return(0,B.e)((le,ue)=>{le.subscribe((0,N.x)(ue,_e=>(0,_.f)(ue,se,()=>ue.next(_e),me),()=>(0,_.f)(ue,se,()=>ue.complete(),me),_e=>(0,_.f)(ue,se,()=>ue.error(_e),me)))})}},3099:(ot,De,O)=>{"use strict";O.d(De,{B:()=>me});var _=O(8996),B=O(5698),N=O(7579),ae=O(930),se=O(4482);function me(ue={}){const{connector:_e=(()=>new N.x),resetOnError:G=!0,resetOnComplete:$=!0,resetOnRefCountZero:ne=!0}=ue;return $e=>{let xe=null,Le=null,je=null,Q=0,ce=!1,Re=!1;const Pe=()=>{null==Le||Le.unsubscribe(),Le=null},he=()=>{Pe(),xe=je=null,ce=Re=!1},be=()=>{const ve=xe;he(),null==ve||ve.unsubscribe()};return(0,se.e)((ve,ze)=>{Q++,!Re&&!ce&&Pe();const re=je=null!=je?je:_e();ze.add(()=>{Q--,0===Q&&!Re&&!ce&&(Le=le(be,ne))}),re.subscribe(ze),xe||(xe=new ae.Hp({next:Qe=>re.next(Qe),error:Qe=>{Re=!0,Pe(),Le=le(he,G,Qe),re.error(Qe)},complete:()=>{ce=!0,Pe(),Le=le(he,$),re.complete()}}),(0,_.D)(ve).subscribe(xe))})($e)}}function le(ue,_e,...G){return!0===_e?(ue(),null):!1===_e?null:_e(...G).pipe((0,B.q)(1)).subscribe(()=>ue())}},9468:(ot,De,O)=>{"use strict";O.d(De,{R:()=>B});var _=O(4482);function B(N,ae=0){return(0,_.e)((se,me)=>{me.add(N.schedule(()=>se.subscribe(me),ae))})}},5698:(ot,De,O)=>{"use strict";O.d(De,{q:()=>ae});var _=O(515),B=O(4482),N=O(5403);function ae(se){return se<=0?()=>_.E:(0,B.e)((me,le)=>{let ue=0;me.subscribe((0,N.x)(le,_e=>{++ue<=se&&(le.next(_e),se<=ue&&le.complete())}))})}},8505:(ot,De,O)=>{"use strict";O.d(De,{b:()=>se});var _=O(576),B=O(4482),N=O(5403),ae=O(4671);function se(me,le,ue){const _e=(0,_.m)(me)||le||ue?{next:me,error:le,complete:ue}:me;return _e?(0,B.e)((G,$)=>{var ne;null===(ne=_e.subscribe)||void 0===ne||ne.call(_e);let $e=!0;G.subscribe((0,N.x)($,xe=>{var Le;null===(Le=_e.next)||void 0===Le||Le.call(_e,xe),$.next(xe)},()=>{var xe;$e=!1,null===(xe=_e.complete)||void 0===xe||xe.call(_e),$.complete()},xe=>{var Le;$e=!1,null===(Le=_e.error)||void 0===Le||Le.call(_e,xe),$.error(xe)},()=>{var xe,Le;$e&&(null===(xe=_e.unsubscribe)||void 0===xe||xe.call(_e)),null===(Le=_e.finalize)||void 0===Le||Le.call(_e)}))}):ae.y}},4408:(ot,De,O)=>{"use strict";O.d(De,{o:()=>se});var _=O(727);class B extends _.w0{constructor(le,ue){super()}schedule(le,ue=0){return this}}const N={setInterval(...me){const{delegate:le}=N;return((null==le?void 0:le.setInterval)||setInterval)(...me)},clearInterval(me){const{delegate:le}=N;return((null==le?void 0:le.clearInterval)||clearInterval)(me)},delegate:void 0};var ae=O(8737);class se extends B{constructor(le,ue){super(le,ue),this.scheduler=le,this.work=ue,this.pending=!1}schedule(le,ue=0){if(this.closed)return this;this.state=le;const _e=this.id,G=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(G,_e,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(G,this.id,ue),this}requestAsyncId(le,ue,_e=0){return N.setInterval(le.flush.bind(le,this),_e)}recycleAsyncId(le,ue,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ue;N.clearInterval(ue)}execute(le,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(le,ue);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,ue){let G,_e=!1;try{this.work(le)}catch($){_e=!0,G=$||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:le,scheduler:ue}=this,{actions:_e}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(_e,this),null!=le&&(this.id=this.recycleAsyncId(ue,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,De,O)=>{"use strict";O.d(De,{v:()=>N});var _=O(6063);class B{constructor(se,me=B.now){this.schedulerActionCtor=se,this.now=me}schedule(se,me=0,le){return new this.schedulerActionCtor(this,se).schedule(le,me)}}B.now=_.l.now;class N extends B{constructor(se,me=B.now){super(se,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:me}=this;if(this._active)return void me.push(se);let le;this._active=!0;do{if(le=se.execute(se.state,se.delay))break}while(se=me.shift());if(this._active=!1,le){for(;se=me.shift();)se.unsubscribe();throw le}}}},4986:(ot,De,O)=>{"use strict";O.d(De,{z:()=>N});var _=O(4408);const N=new(O(7565).v)(_.o)},6063:(ot,De,O)=>{"use strict";O.d(De,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(ot,De,O)=>{"use strict";O.d(De,{z:()=>_});const _={setTimeout(...B){const{delegate:N}=_;return((null==N?void 0:N.setTimeout)||setTimeout)(...B)},clearTimeout(B){const{delegate:N}=_;return((null==N?void 0:N.clearTimeout)||clearTimeout)(B)},delegate:void 0}},2202:(ot,De,O)=>{"use strict";O.d(De,{h:()=>B});const B=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,De,O)=>{"use strict";O.d(De,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,De,O)=>{"use strict";O.d(De,{_6:()=>me,jO:()=>ae,yG:()=>se});var _=O(576);function N(le){return le[le.length-1]}function ae(le){return(0,_.m)(N(le))?le.pop():void 0}function se(le){return function B(le){return le&&(0,_.m)(le.schedule)}(N(le))?le.pop():void 0}function me(le,ue){return"number"==typeof N(le)?le.pop():ue}},8737:(ot,De,O)=>{"use strict";function _(B,N){if(B){const ae=B.indexOf(N);0<=ae&&B.splice(ae,1)}}O.d(De,{P:()=>_})},3888:(ot,De,O)=>{"use strict";function _(B){const ae=B(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}O.d(De,{d:()=>_})},2806:(ot,De,O)=>{"use strict";O.d(De,{x:()=>N,O:()=>ae});var _=O(2416);let B=null;function N(se){if(_.v.useDeprecatedSynchronousErrorHandling){const me=!B;if(me&&(B={errorThrown:!1,error:null}),se(),me){const{errorThrown:le,error:ue}=B;if(B=null,le)throw ue}}else se()}function ae(se){_.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=se)}},9672:(ot,De,O)=>{"use strict";function _(B,N,ae,se=0,me=!1){const le=N.schedule(function(){ae(),me?B.add(this.schedule(null,se)):this.unsubscribe()},se);if(B.add(le),!me)return le}O.d(De,{f:()=>_})},4671:(ot,De,O)=>{"use strict";function _(B){return B}O.d(De,{y:()=>_})},1144:(ot,De,O)=>{"use strict";O.d(De,{z:()=>_});const _=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(ot,De,O)=>{"use strict";O.d(De,{D:()=>B});var _=O(576);function B(N){return Symbol.asyncIterator&&(0,_.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(ot,De,O)=>{"use strict";function _(B){return"function"==typeof B}O.d(De,{m:()=>_})},3670:(ot,De,O)=>{"use strict";O.d(De,{c:()=>N});var _=O(8822),B=O(576);function N(ae){return(0,B.m)(ae[_.L])}},6495:(ot,De,O)=>{"use strict";O.d(De,{T:()=>N});var _=O(2202),B=O(576);function N(ae){return(0,B.m)(null==ae?void 0:ae[_.h])}},8239:(ot,De,O)=>{"use strict";O.d(De,{t:()=>B});var _=O(576);function B(N){return(0,_.m)(null==N?void 0:N.then)}},3260:(ot,De,O)=>{"use strict";O.d(De,{Q:()=>N,L:()=>ae});var _=O(655),B=O(576);function N(se){return(0,_.FC)(this,arguments,function*(){const le=se.getReader();try{for(;;){const{value:ue,done:_e}=yield(0,_.qq)(le.read());if(_e)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ue)}}finally{le.releaseLock()}})}function ae(se){return(0,B.m)(null==se?void 0:se.getReader)}},4482:(ot,De,O)=>{"use strict";O.d(De,{A:()=>B,e:()=>N});var _=O(576);function B(ae){return(0,_.m)(null==ae?void 0:ae.lift)}function N(ae){return se=>{if(B(se))return se.lift(function(me){try{return ae(me,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ot,De,O)=>{"use strict";function _(){}O.d(De,{Z:()=>_})},7849:(ot,De,O)=>{"use strict";O.d(De,{h:()=>N});var _=O(2416),B=O(3410);function N(ae){B.z.setTimeout(()=>{const{onUnhandledError:se}=_.v;if(!se)throw ae;se(ae)})}},4532:(ot,De,O)=>{"use strict";function _(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(De,{z:()=>_})},655:(ot,De,O)=>{"use strict";function ae(X,pe){var fe={};for(var ye in X)Object.prototype.hasOwnProperty.call(X,ye)&&pe.indexOf(ye)<0&&(fe[ye]=X[ye]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ye=Object.getOwnPropertySymbols(X);Fe<ye.length;Fe++)pe.indexOf(ye[Fe])<0&&Object.prototype.propertyIsEnumerable.call(X,ye[Fe])&&(fe[ye[Fe]]=X[ye[Fe]])}return fe}function ue(X,pe,fe,ye){return new(fe||(fe=Promise))(function(de,yt){function Zt(rt){try{at(ye.next(rt))}catch(ur){yt(ur)}}function xn(rt){try{at(ye.throw(rt))}catch(ur){yt(ur)}}function at(rt){rt.done?de(rt.value):function Fe(de){return de instanceof fe?de:new fe(function(yt){yt(de)})}(rt.value).then(Zt,xn)}at((ye=ye.apply(X,pe||[])).next())})}function Q(X){return this instanceof Q?(this.v=X,this):new Q(X)}function ce(X,pe,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ye=fe.apply(X,pe||[]),de=[];return Fe={},yt("next"),yt("throw"),yt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function yt(sn){ye[sn]&&(Fe[sn]=function(yr){return new Promise(function(Yt,Ht){de.push([sn,yr,Yt,Ht])>1||Zt(sn,yr)})})}function Zt(sn,yr){try{!function xn(sn){sn.value instanceof Q?Promise.resolve(sn.value.v).then(at,rt):ur(de[0][2],sn)}(ye[sn](yr))}catch(Yt){ur(de[0][3],Yt)}}function at(sn){Zt("next",sn)}function rt(sn){Zt("throw",sn)}function ur(sn,yr){sn(yr),de.shift(),de.length&&Zt(de[0][0],de[0][1])}}function Pe(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,pe=X[Symbol.asyncIterator];return pe?pe.call(X):(X=function ne(X){var pe="function"==typeof Symbol&&Symbol.iterator,fe=pe&&X[pe],ye=0;if(fe)return fe.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ye>=X.length&&(X=void 0),{value:X&&X[ye++],done:!X}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),fe={},ye("next"),ye("throw"),ye("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ye(de){fe[de]=X[de]&&function(yt){return new Promise(function(Zt,xn){!function Fe(de,yt,Zt,xn){Promise.resolve(xn).then(function(at){de({value:at,done:Zt})},yt)}(Zt,xn,(yt=X[de](yt)).done,yt.value)})}}}O.d(De,{_T:()=>ae,mG:()=>ue,qq:()=>Q,FC:()=>ce,KL:()=>Pe})},5e3:(ot,De,O)=>{"use strict";O.d(De,{deG:()=>Gh,tb:()=>ip,AFp:()=>Hm,ip1:()=>$m,CZH:()=>yl,hGG:()=>fs,z2F:()=>qc,sBO:()=>AC,Sil:()=>vl,_Vd:()=>qf,EJc:()=>$c,SBq:()=>eh,qLn:()=>cf,vpe:()=>Sn,tBr:()=>Ys,XFs:()=>ht,OlP:()=>Pn,zs3:()=>eo,ZZ4:()=>Jm,aQg:()=>br,soG:()=>sp,YKP:()=>$v,h0i:()=>Pc,PXZ:()=>bC,R0b:()=>ln,FiY:()=>Ur,Lbi:()=>ow,g9A:()=>sw,Qsj:()=>uu,FYo:()=>Fv,JOm:()=>ta,tp0:()=>Wr,Rgc:()=>Qf,dDg:()=>wl,q4F:()=>Vv,GfV:()=>th,s_b:()=>Rm,ifc:()=>St,eFA:()=>up,G48:()=>dp,X6Q:()=>cp,_c5:()=>El,VLi:()=>CC,c2e:()=>vC,zSh:()=>yf,wAp:()=>vt,vHH:()=>Le,cg1:()=>Rf,kL8:()=>TI,dqk:()=>jt,sIi:()=>nu,CqO:()=>Xy,QGY:()=>jd,F4k:()=>Jy,RDi:()=>od,AaK:()=>ue,TTD:()=>ba,xp6:()=>ST,uIk:()=>ro,Suo:()=>gl,Xpm:()=>on,lG2:()=>Te,Yz7:()=>Yt,cJS:()=>en,oAB:()=>oe,Yjl:()=>qe,Y36:()=>If,_UZ:()=>Qy,qZA:()=>Cf,TgZ:()=>Kg,EpF:()=>ZE,LFG:()=>He,$8M:()=>Ga,$Z:()=>qE,NdJ:()=>Ao,CRH:()=>Nm,Q6J:()=>Zy,s9C:()=>$d,iGM:()=>du,MAs:()=>kE,CHM:()=>Vl,LSH:()=>Td,YNc:()=>Vy,_uU:()=>av,Oqu:()=>uv});var _=O(7579),B=O(727),N=O(8306),ae=O(6451),se=O(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=me({__forward_ref__:me});function $(s){return s.__forward_ref__=$,s.toString=function(){return ue(this())},s}function ne(s){return function $e(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===$}(s)?s():s}class Le extends Error{constructor(o,u){super(function je(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function Q(s){return"string"==typeof s?s:null==s?"":String(s)}function ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Q(s)}function be(s,o){const u=o?` in ${o}`:"";throw new Le(-201,`No provider for ${ce(s)} found${u}`)}function at(s,o){null==s&&function rt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function en(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return Li(s,mi)||Li(s,Fn)}function Li(s,o){return s.hasOwnProperty(o)?s[o]:null}function Zi(s){return s&&(s.hasOwnProperty(Fi)||s.hasOwnProperty(Yi))?s[Fi]:null}const mi=me({\u0275prov:me}),Fi=me({\u0275inj:me}),Fn=me({ngInjectableDef:me}),Yi=me({ngInjectorDef:me});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let Or;function Wt(s){const o=Or;return Or=s,o}function Sr(s,o,u){const c=In(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ht.Optional?null:void 0!==o?o:void be(ue(s),"Injector")}function ut(s){return{toString:s}.toString()}var bt=(()=>((bt=bt||{})[bt.OnPush=0]="OnPush",bt[bt.Default=1]="Default",bt))(),St=(()=>{return(s=St||(St={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",St;var s})();const it="undefined"!=typeof globalThis&&globalThis,Je="undefined"!=typeof window&&window,Us="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,jt=it||"undefined"!=typeof global&&global||Je||Us,wn={},j=[],q=me({\u0275cmp:me}),z=me({\u0275dir:me}),Ie=me({\u0275pipe:me}),ie=me({\u0275mod:me}),Ke=me({\u0275fac:me}),dt=me({__NG_ELEMENT_ID__:me});let zt=0;function on(s){return ut(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===bt.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||j,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||St.Emulated,id:"c",styles:s.styles||j,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,y=s.pipes;return c.id+=zt++,c.inputs=W(s.inputs,u),c.outputs=W(s.outputs),f&&f.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(cr):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(Nt):null,c})}function cr(s){return st(s)||function At(s){return s[z]||null}(s)}function Nt(s){return function Bt(s){return s[Ie]||null}(s)}const Qn={};function oe(s){return ut(()=>{const o={type:s.type,bootstrap:s.bootstrap||j,declarations:s.declarations||j,imports:s.imports||j,exports:s.exports||j,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Qn[s.id]=s.type),o})}function W(s,o){if(null==s)return wn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,o&&(o[d]=f)}return u}const Te=on;function qe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function st(s){return s[q]||null}function Ot(s,o){const u=s[ie]||null;if(!u&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return u}function si(s){return Array.isArray(s)&&"object"==typeof s[1]}function Xi(s){return Array.isArray(s)&&!0===s[1]}function Iu(s){return 0!=(8&s.flags)}function Jc(s){return 2==(2&s.flags)}function es(s){return 1==(1&s.flags)}function ts(s){return null!==s.template}function Pl(s){return 0!=(512&s[2])}function Vi(s,o){return s.hasOwnProperty(Ke)?s[Ke]:null}class rd{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function ba(){return Ta}function Ta(s){return s.type.prototype.ngOnChanges&&(s.setInput=Da),Lh}function Lh(){const s=Sa(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===wn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Da(s,o,u,c){const d=Sa(s)||function Uo(s,o){return s[id]=o}(s,{previous:wn,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],C=y[E];f[E]=new rd(C&&C.currentValue,o,y===wn),s[c]=o}ba.ngInherit=!0;const id="__ngSimpleChanges__";function Sa(s){return s[id]||null}let Du;function od(s){Du=s}function mn(s){return!!s.listen}const Vo={createRenderer:(s,o)=>function Bi(){return void 0!==Du?Du:"undefined"!=typeof document?document:void 0}()};function dn(s){for(;Array.isArray(s);)s=s[0];return s}function dr(s,o){return dn(o[s.index])}function Bn(s,o){return s.data[o]}function Ar(s,o){const u=o[s];return si(u)?u:u[0]}function mo(s){return 4==(4&s[2])}function Ws(s){return 128==(128&s[2])}function ji(s,o){return null==o?null:s[o]}function rs(s){s[18]=0}function ys(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const mt={lFrame:ql(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Na(){return mt.bindingsEnabled}function Se(){return mt.lFrame.lView}function Ut(){return mt.lFrame.tView}function Vl(s){return mt.lFrame.contextLView=s,s[8]}function Tn(){let s=jo();for(;null!==s&&64===s.type;)s=s.parent;return s}function jo(){return mt.lFrame.currentTNode}function yi(s,o){const u=mt.lFrame;u.currentTNode=s,u.isParent=o}function Bl(){return mt.lFrame.isParent}function yo(){return mt.isInCheckNoChangesMode}function xu(s){mt.isInCheckNoChangesMode=s}function zs(){return mt.lFrame.bindingIndex++}function $l(s,o){const u=mt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Oa(o)}function Oa(s){mt.lFrame.currentDirectiveIndex=s}function Hl(){return mt.lFrame.currentQueryIndex}function Gl(s){mt.lFrame.currentQueryIndex=s}function Uh(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Fa(s,o,u){if(u&ht.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&ht.Host||(d=Uh(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const c=mt.lFrame=Ks();return c.currentTNode=o,c.lView=s,!0}function Ua(s){const o=Ks(),u=s[1];mt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Ks(){const s=mt.lFrame,o=null===s?null:s.child;return null===o?ql(s):o}function ql(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Vh(){const s=mt.lFrame;return mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Bh=Vh;function $o(){const s=Vh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function xr(){return mt.lFrame.selectedIndex}function ws(s){mt.lFrame.selectedIndex=s}function Rn(){const s=mt.lFrame;return Bn(s.tView,s.selectedIndex)}function Ba(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:x}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(u,x)}}function Wl(s,o,u){Er(s,o,3,u)}function zl(s,o,u,c){(3&s[2])===u&&Er(s,o,u,c)}function Nu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Er(s,o,u,c){const f=null!=c?c:-1,y=o.length-1;let E=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=c&&E>=c)break}else o[C]<0&&(s[18]+=65536),(E<f||-1==f)&&(Kl(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Kl(s,o,u,c){const d=u[c]<0,f=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Mu{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function et(s,o,u){const c=mn(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const y=u[d++],E=u[d++],C=u[d++];c?s.setAttribute(o,E,C,y):o.setAttributeNS(y,E,C)}else{const y=f,E=u[++d];ai(y)?c&&s.setProperty(o,y,E):c?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Is(s){return 3===s||4===s||6===s}function ai(s){return 64===s.charCodeAt(0)}function $n(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Ql(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Ql(s,o,u,c,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[f+1]=d));if(c===s[f+1])return void(s[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==d&&s.splice(f++,0,d)}function Hn(s){return-1!==s}function Ho(s){return 32767&s}function Go(s,o){let u=function ja(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let wo=!0;function ss(s){const o=wo;return wo=s,o}let Fu=0;function hn(s,o){const u=$a(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,qo(c.data,s),qo(o,null),qo(c.blueprint,null));const d=Wo(s,o),f=s.injectorIndex;if(Hn(d)){const y=Ho(d),E=Go(d,o),C=E[1].data;for(let A=0;A<8;A++)o[f+A]=E[y+A]|C[y+A]}return o[f+8]=d,f}function qo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function $a(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Wo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(c=2===y?f.declTNode:1===y?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Hr(s,o,u){!function cd(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(dt)&&(c=u[dt]),null==c&&(c=u[dt]=Fu++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function zo(s,o,u){if(u&ht.Optional)return s;be(o,"NodeInjector")}function os(s,o,u,c){if(u&ht.Optional&&void 0===c&&(c=null),0==(u&(ht.Self|ht.Host))){const d=s[9],f=Wt(void 0);try{return d?d.get(o,c,u&ht.Optional):Sr(o,c,u&ht.Optional)}finally{Wt(f)}}return zo(c,o,u)}function Vu(s,o,u,c=ht.Default,d){if(null!==s){const f=function Rr(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(dt)?s[dt]:void 0;return"number"==typeof o?o>=0?255&o:Zs:o}(u);if("function"==typeof f){if(!Fa(o,s,c))return c&ht.Host?zo(d,u,c):os(o,u,c,d);try{const y=f(c);if(null!=y||c&ht.Optional)return y;be(u)}finally{Bh()}}else if("number"==typeof f){let y=null,E=$a(s,o),C=-1,A=c&ht.Host?o[16][6]:null;for((-1===E||c&ht.SkipSelf)&&(C=-1===E?Wo(s,o):o[E+8],-1!==C&&Zo(c,!1)?(y=o[1],E=Ho(C),o=Go(C,o)):E=-1);-1!==E;){const x=o[1];if(ec(f,E,x.data)){const F=Xl(E,o,u,y,c,A);if(F!==Ha)return F}C=o[E+8],-1!==C&&Zo(c,o[1].data[E+8]===A)&&ec(f,E,o)?(y=x,E=Ho(C),o=Go(C,o)):E=-1}}}return os(o,u,c,d)}const Ha={};function Zs(){return new Dn(Tn(),Se())}function Xl(s,o,u,c,d,f){const y=o[1],E=y.data[s+8],x=Cs(E,y,u,null==c?Jc(E)&&wo:c!=y&&0!=(3&E.type),d&ht.Host&&f===E);return null!==x?Ko(o,y,x,E):Ha}function Cs(s,o,u,c,d){const f=s.providerIndexes,y=o.data,E=1048575&f,C=s.directiveStart,x=f>>20,H=d?E+x:s.directiveEnd;for(let ee=c?E:E+x;ee<H;ee++){const Ee=y[ee];if(ee<C&&u===Ee||ee>=C&&Ee.type===u)return ee}if(d){const ee=y[C];if(ee&&ts(ee)&&ee.type===u)return C}return null}function Ko(s,o,u,c){let d=s[u];const f=o.data;if(function Zl(s){return s instanceof Mu}(d)){const y=d;y.resolving&&function Re(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Le(-200,`Circular dependency in DI detected for ${s}${u}`)}(ce(f[u]));const E=ss(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?Wt(y.injectImpl):null;Fa(s,c,ht.Default);try{d=s[u]=y.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function vo(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const y=Ta(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==C&&Wt(C),ss(E),y.resolving=!1,Bh()}}return d}function ec(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Zo(s,o){return!(s&ht.Self||s&ht.Host&&o)}class Dn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Vu(this._tNode,this._lView,o,c,u)}}function Ga(s){return function Uu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(Is(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(Tn(),s)}const er="__parameters__";function wi(s,o,u){return ut(()=>{const c=function tc(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(C,A,x){const F=C.hasOwnProperty(er)?C[er]:Object.defineProperty(C,er,{value:[]})[er];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(y),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Pn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Yt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Gh=new Pn("AnalyzeForEntryComponents");function Gr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Gr(c,o)):o!==s&&o.push(c)}return o}function Ii(s,o){s.forEach(u=>Array.isArray(u)?Ii(u,o):o(u))}function za(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Hu(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Ss={},Zu="__NG_DI_FLAG__",Za="ngTempTokenPath",b=/\n/gm,P="__source",U=me({provide:String,useValue:me});let Y;function J(s){const o=Y;return Y=s,o}function Oe(s,o=ht.Default){if(void 0===Y)throw new Le(203,"");return null===Y?Sr(s,void 0,o):Y.get(s,o&ht.Optional?null:void 0,o)}function He(s,o=ht.Default){return(function An(){return Or}()||Oe)(ne(s),o)}function Xt(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Le(900,"");let d,f=ht.Default;for(let y=0;y<c.length;y++){const E=c[y],C=qr(E);"number"==typeof C?-1===C?d=E.token:f|=C:d=E}o.push(He(d,f))}else o.push(He(c))}return o}function Gn(s,o){return s[Zu]=o,s.prototype[Zu]=o,s}function qr(s){return s[Zu]}const Ys=Gn(wi("Inject",s=>({token:s})),-1),Ur=Gn(wi("Optional"),8),Wr=Gn(wi("SkipSelf"),4);class Ed{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const p=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,I=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Ir=(()=>((Ir=Ir||{})[Ir.NONE=0]="NONE",Ir[Ir.HTML=1]="HTML",Ir[Ir.STYLE=2]="STYLE",Ir[Ir.SCRIPT=3]="SCRIPT",Ir[Ir.URL=4]="URL",Ir[Ir.RESOURCE_URL=5]="RESOURCE_URL",Ir))();function Td(s){const o=function Dd(){const s=Se();return s&&s[12]}();return o?o.sanitize(Ir.URL,s)||"":function Qs(s,o){const u=function Qh(s){return s instanceof Ed&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?function xs(s){return s instanceof Ed?s.changingThisBreaksApplicationSecurity:s}(s):function R(s){return(s=String(s)).match(p)||s.match(I)?s:"unsafe:"+s}(Q(s))}const I0="__ngContext__";function Ci(s,o){s[I0]=o}function V_(s){const o=function sf(s){return s[I0]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function H_(s){return s.ngOriginalError}function iT(s,...o){s.error(...o)}class cf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function rT(s){return s&&s.ngErrorLogger||iT}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&H_(o);for(;u&&H_(u);)u=H_(u);return u||null}}const b0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(jt))();function bo(s){return s instanceof Function?s():s}var ta=(()=>((ta=ta||{})[ta.Important=1]="Important",ta[ta.DashCase=2]="DashCase",ta))();function q_(s,o){return undefined(s,o)}function df(s){const o=s[3];return Xi(o)?o[3]:o}function cg(s){return R0(s[13])}function z_(s){return R0(s[4])}function R0(s){for(;null!==s&&!Xi(s);)s=s[4];return s}function Sd(s,o,u,c,d){if(null!=c){let f,y=!1;Xi(c)?f=c:si(c)&&(y=!0,c=c[0]);const E=dn(c);0===s&&null!==u?null==d?O0(o,u,E):sl(o,u,E,d||null,!0):1===s&&null!==u?sl(o,u,E,d||null,!0):2===s?function $0(s,o,u){const c=gg(s,o);c&&function F0(s,o,u,c){mn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=f&&function vg(s,o,u,c,d){const f=u[7];f!==dn(u)&&Sd(o,s,c,f,d);for(let E=10;E<u.length;E++){const C=u[E];hf(C[1],C,s,o,c,f)}}(o,s,f,u,d)}}function hi(s,o,u){if(mn(s))return s.createElement(o,u);{const c=null!==u?function sd(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function N0(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,ys(d,-1)),u.splice(c,1)}function fg(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&N0(d,c),o>0&&(s[u-1][4]=c[4]);const f=Hu(s,10+o);!function mT(s,o){hf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function M0(s,o){if(!(256&o[2])){const u=o[11];mn(u)&&u.destroyNode&&hf(s,o,u,3,null,null),function K_(s){let o=s[13];if(!o)return pg(s[1],s);for(;o;){let u=null;if(si(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)si(o)&&pg(o[1],o),o=o[3];null===o&&(o=s),si(o)&&pg(o[1],o),u=o&&o[4]}o=u}}(o)}}function pg(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Z_(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Mu)){const f=u[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],C=f[y+1];try{C.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function k0(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],E="function"==typeof y?y(o):dn(o[y]),C=c[d=u[f+2]],A=u[f+3];"boolean"==typeof A?E.removeEventListener(u[f],C,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),f+=2}else{const y=c[d=u[f+1]];u[f].call(y)}if(null!==c){for(let f=d+1;f<c.length;f++)c[f]();o[7]=null}}(s,o),1===o[1].type&&mn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Xi(o[3])){u!==o[3]&&N0(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function yT(s,o,u){return function il(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===St.None||d===St.Emulated)return null}return dr(c,u)}(s,o.parent,u)}function sl(s,o,u,c,d){mn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function O0(s,o,u){mn(s)?s.appendChild(o,u):o.appendChild(u)}function L0(s,o,u,c,d){null!==c?sl(s,o,u,c,d):O0(s,o,u)}function gg(s,o){return mn(s)?s.parentNode(o):o.parentNode}let V0=function Y_(s,o,u){return 40&s.type?dr(s,u):null};function xd(s,o,u,c){const d=yT(s,c,o),f=o[11],E=function U0(s,o,u){return V0(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)L0(f,d,u[C],E,!1);else L0(f,d,u,E,!1)}function mg(s,o){if(null!==o){const u=o.type;if(3&u)return dr(o,s);if(4&u)return _g(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return mg(s,c);{const d=s[o.index];return Xi(d)?_g(-1,d):dn(d)}}if(32&u)return q_(o,s)()||dn(s[o.index]);{const c=j0(s,o);return null!==c?Array.isArray(c)?c[0]:mg(df(s[16]),c):mg(s,o.next)}}return null}function j0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function _g(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return mg(c,d)}return o[7]}function H0(s,o,u,c,d,f,y){for(;null!=u;){const E=c[u.index],C=u.type;if(y&&0===o&&(E&&Ci(dn(E),c),u.flags|=4),64!=(64&u.flags))if(8&C)H0(s,o,u.child,c,d,f,!1),Sd(o,s,d,E,f);else if(32&C){const A=q_(u,c);let x;for(;x=A();)Sd(o,s,d,x,f);Sd(o,s,d,E,f)}else 16&C?yg(s,o,c,u,d,f):Sd(o,s,d,E,f);u=y?u.projectionNext:u.next}}function hf(s,o,u,c,d,f){H0(u,c,s.firstChild,o,d,f,!1)}function yg(s,o,u,c,d,f){const y=u[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Sd(o,s,d,C[A],f);else H0(s,o,C,y[3],d,f,!0)}function G0(s,o,u){mn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function wg(s,o,u){mn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function J_(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||s.charCodeAt(d+f)<=32)return d}u=d+1}}const Eg="ng-template";function un(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==J_(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function X_(s){return 4===s.type&&s.value!==Eg}function Ig(s,o,u){return o===(4!==s.type||u?s.value:Eg)}function IT(s,o,u){let c=4;const d=s.attrs||[],f=function WR(s){for(let o=0;o<s.length;o++)if(Is(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!Ig(s,C,u)||""===C&&1===o.length){if(na(c))return!1;y=!0}}else{const A=8&c?C:o[++E];if(8&c&&null!==s.attrs){if(!un(s.attrs,A,u)){if(na(c))return!1;y=!0}continue}const F=CT(8&c?"class":C,d,X_(s),u);if(-1===F){if(na(c))return!1;y=!0;continue}if(""!==A){let H;H=F>f?"":d[F+1].toLowerCase();const ee=8&c?H:null;if(ee&&-1!==J_(ee,A,0)||2&c&&A!==H){if(na(c))return!1;y=!0}}}}else{if(!y&&!na(c)&&!na(C))return!1;if(y&&na(C))continue;y=!1,c=C|1&c}}return na(c)||y}function na(s){return 0==(1&s)}function CT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function bT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Cg(s,o,u=!1){for(let c=0;c<o.length;c++)if(IT(s,o[c],u))return!0;return!1}function DT(s,o){return s?":not("+o.trim()+")":o}function zR(s){let o=s[0],u=1,c=2,d="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!na(y)&&(o+=DT(f,d),d=""),c=y,f=f||!na(c);u++}return""!==d&&(o+=DT(f,d)),o}const kt={};function ST(s){AT(Ut(),Se(),xr()+s,yo())}function AT(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&Wl(o,f,u)}else{const f=s.preOrderHooks;null!==f&&zl(o,f,0,u)}ws(u)}function hy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const y=s.data[f];Gl(d),y.contentQueries(2,o[f],f)}}}function mf(s,o,u,c,d,f,y,E,C,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|c,rs(x),x[3]=x[15]=s,x[8]=u,x[10]=y||s&&s[10],x[11]=E||s&&s[11],x[12]=C||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=f,x[16]=2==o.type?s[16]:x,x}function Rd(s,o,u,c,d){let f=s.data[o];if(null===f)f=function Pd(s,o,u,c,d){const f=jo(),y=Bl(),C=s.data[o]=function VT(s,o,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(s,o,u,c,d),function jl(){return mt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const y=function _o(){const s=mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return yi(f,!0),f}function al(s,o,u,c){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function pc(s,o,u){Ua(o);try{const c=s.viewQuery;null!==c&&_f(1,c,u);const d=s.template;null!==d&&Z0(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&hy(s,o),s.staticViewQueries&&_f(2,s.viewQuery,u);const f=s.components;null!==f&&function FT(s,o){for(let u=0;u<o.length;u++)ZT(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,$o()}}function ul(s,o,u,c){const d=o[2];if(256==(256&d))return;Ua(o);const f=yo();try{rs(o),function ka(s){return mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Z0(s,o,u,2,c);const y=3==(3&d);if(!f)if(y){const A=s.preOrderCheckHooks;null!==A&&Wl(o,A,null)}else{const A=s.preOrderHooks;null!==A&&zl(o,A,0,null),Nu(o,0)}if(function KT(s){for(let o=cg(s);null!==o;o=z_(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(1024&d[2])&&ys(f,1),d[2]|=1024}}}(o),function zT(s){for(let o=cg(s);null!==o;o=z_(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Ws(c)&&ul(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&hy(s,o),!f)if(y){const A=s.contentCheckHooks;null!==A&&Wl(o,A)}else{const A=s.contentHooks;null!==A&&zl(o,A,1),Nu(o,1)}!function z0(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)ws(~d);else{const f=d,y=u[++c],E=u[++c];$l(y,f),E(2,o[f])}}}finally{ws(-1)}}(s,o);const E=s.components;null!==E&&function fy(s,o){for(let u=0;u<o.length;u++)dP(s,o[u])}(o,E);const C=s.viewQuery;if(null!==C&&_f(2,C,c),!f)if(y){const A=s.viewCheckHooks;null!==A&&Wl(o,A)}else{const A=s.viewHooks;null!==A&&zl(o,A,2),Nu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ys(o[3],-1))}finally{$o()}}function K0(s,o,u,c){const d=o[10],f=!yo(),y=mo(o);try{f&&!y&&d.begin&&d.begin(),y&&pc(s,o,c),ul(s,o,u,c)}finally{f&&!y&&d.end&&d.end()}}function Z0(s,o,u,c,d){const f=xr(),y=2&c;try{ws(-1),y&&o.length>20&&AT(s,o,20,yo()),u(c,d)}finally{ws(f)}}function Nd(s,o,u){!Na()||(function $T(s,o,u,c){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||hn(u,o),Ci(c,o);const y=u.initialInputs;for(let E=d;E<f;E++){const C=s.data[E],A=ts(C);A&&Ey(o,u,C);const x=Ko(o,s,E,u);Ci(x,o),null!==y&&Iy(0,E-d,x,C,0,y),A&&(Ar(u.index,o)[8]=x)}}(s,o,u,dr(u,o)),128==(128&u.flags)&&function uP(s,o,u){const c=u.directiveStart,d=u.directiveEnd,y=u.index,E=function Pu(){return mt.lFrame.currentDirectiveIndex}();try{ws(y);for(let C=c;C<d;C++){const A=s.data[C],x=o[C];Oa(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&HT(A,x)}}finally{ws(-1),Oa(E)}}(s,o,u))}function gy(s,o,u=dr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function Y0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ng(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ng(s,o,u,c,d,f,y,E,C,A){const x=20+c,F=x+d,H=function UT(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:kt);return u}(x,F),ee="function"==typeof A?A():A;return H[1]={type:s,blueprint:H,template:u,queries:null,viewQuery:E,declTNode:o,data:H.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ee,incompleteFirstPass:!1}}function X0(s,o,u,c){const d=Og(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&Lg(s).push(c,d.length-1))}function eE(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function ls(s,o,u,c,d,f,y,E){const C=dr(o,u);let x,A=o.inputs;!E&&null!=A&&(x=A[c])?(Fg(s,u,x,c,d),Jc(o)&&function my(s,o){const u=Ar(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function tE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,mn(f)?f.setProperty(C,c,d):ai(c)||(C.setProperty?C.setProperty(c,d):C[c]=d))}function kg(s,o,u,c){let d=!1;if(Na()){const f=function vy(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];Cg(u,y.selectors,!1)&&(d||(d=[]),Hr(hn(u,o),s,y.type),ts(y)?(GT(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==f){d=!0,iE(u,s.data.length,f.length);for(let x=0;x<f.length;x++){const F=f[x];F.providersResolver&&F.providersResolver(F)}let E=!1,C=!1,A=al(s,o,f.length,null);for(let x=0;x<f.length;x++){const F=f[x];u.mergedAttrs=$n(u.mergedAttrs,F.hostAttrs),wy(s,u,o,A,F),rE(A,F,y),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const H=F.type.prototype;!E&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!C&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),A++}!function Mg(s,o){const c=o.directiveEnd,d=s.data,f=o.attrs,y=[];let E=null,C=null;for(let A=o.directiveStart;A<c;A++){const x=d[A],F=x.inputs,H=null===f||X_(o)?null:lP(F,f);y.push(H),E=eE(F,A,E),C=eE(x.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=C}(s,u)}y&&function qT(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new Le(-301,!1);c.push(o[d],f)}}}(u,c,y)}return u.mergedAttrs=$n(u.mergedAttrs,u.attrs),d}function yy(s,o,u,c,d,f){const y=f.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function aP(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=C&&E.push(C),E.push(c,d,y)}}function HT(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function GT(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function rE(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ts(o)&&(u[""]=s)}}function iE(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function wy(s,o,u,c,d){s.data[c]=d;const f=d.factory||(d.factory=Vi(d.type)),y=new Mu(f,ts(d),null);s.blueprint[c]=y,u[c]=y,yy(s,o,0,c,al(s,u,d.hostVars,kt),d)}function Ey(s,o,u){const c=dr(o,s),d=Y0(u),f=s[10],y=Cy(s,mf(s,d,null,u.onPush?64:16,c,o,f,f.createRenderer(c,u),null,null));s[o.index]=y}function cs(s,o,u,c,d,f){const y=dr(s,o);!function sE(s,o,u,c,d,f,y){if(null==f)mn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==y?Q(f):y(f,c||"",d);mn(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],y,f,s.value,u,c,d)}function Iy(s,o,u,c,d,f){const y=f[o];if(null!==y){const E=c.setInput;for(let C=0;C<y.length;){const A=y[C++],x=y[C++],F=y[C++];null!==E?c.setInput(u,F,A,x):u[x]=F}}}function lP(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function WT(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function dP(s,o){const u=Ar(o,s);if(Ws(u)){const c=u[1];80&u[2]?ul(c,u,c.template,u[8]):u[5]>0&&oE(u)}}function oE(s){for(let c=cg(s);null!==c;c=z_(c))for(let d=10;d<c.length;d++){const f=c[d];if(1024&f[2]){const y=f[1];ul(y,f,y.template,f[8])}else f[5]>0&&oE(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Ar(u[c],s);Ws(d)&&d[5]>0&&oE(d)}}function ZT(s,o){const u=Ar(o,s),c=u[1];(function hP(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),pc(c,u,u[8])}function Cy(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function aE(s){for(;s;){s[2]|=64;const o=df(s);if(Pl(s)&&!o)return s;s=o}return null}function Md(s,o,u){const c=o[10];c.begin&&c.begin();try{ul(s,o,s.template,u)}catch(d){throw dE(o,d),d}finally{c.end&&c.end()}}function lE(s){!function uE(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=V_(u),d=c[1];K0(d,c,d.template,u)}}(s[8])}function _f(s,o,u){Gl(0),o(s,u)}const Dy=(()=>Promise.resolve(null))();function Og(s){return s[7]||(s[7]=[])}function Lg(s){return s.cleanup||(s.cleanup=[])}function dE(s,o){const u=s[9],c=u?u.get(cf,null):null;c&&c.handleError(o)}function Fg(s,o,u,c,d){for(let f=0;f<u.length;){const y=u[f++],E=u[f++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,d,c,E):C[E]=d}}function Xa(s,o,u){const c=function qs(s,o){return dn(o[s])}(o,s);!function P0(s,o,u){mn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function Od(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=_e(d,E):2==f&&(c=_e(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const Sy=new Pn("INJECTOR",-1);class rr{get(o,u=Ss){if(u===Ss){const c=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw c.name="NullInjectorError",c}return u}}const yf=new Pn("Set Injector scope."),gc={},YT={};let Ay;function pE(){return void 0===Ay&&(Ay=new rr),Ay}function gE(s,o=null,u=null,c){const d=mE(s,o,u,c);return d._resolveInjectorDefTypes(),d}function mE(s,o=null,u=null,c){return new QT(s,u,o||pE(),c)}class QT{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&Ii(u,E=>this.processProvider(E,o,u)),Ii([o],E=>this.processInjectorType(E,[],f)),this.records.set(Sy,mc(void 0,this));const y=this.records.get(yf);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Ss,c=ht.Default){this.assertNotDestroyed();const d=J(this),f=Wt(void 0);try{if(!(c&ht.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function bi(s){return"function"==typeof s||"object"==typeof s&&s instanceof Pn}(o)&&In(o);E=C&&this.injectableDefInScope(C)?mc(Ug(o),gc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&ht.Self?pE():this.parent).get(o,u=c&ht.Optional&&u===Ss?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Za]=y[Za]||[]).unshift(ue(o)),d)throw y;return function Nn(s,o,u,c){const d=s[Za];throw o[P]&&d.unshift(o[P]),s.message=function us(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(b,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Za]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Wt(f),J(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ue(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processInjectorType(o,u,c){if(!(o=ne(o)))return!1;let d=Zi(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,E=-1!==c.indexOf(y);if(void 0!==f&&(d=Zi(f)),null==d)return!1;if(null!=d.imports&&!E){let x;c.push(y);try{Ii(d.imports,F=>{this.processInjectorType(F,u,c)&&(void 0===x&&(x=[]),x.push(F))})}finally{}if(void 0!==x)for(let F=0;F<x.length;F++){const{ngModule:H,providers:ee}=x[F];Ii(ee,Ee=>this.processProvider(Ee,H,ee||j))}}this.injectorDefTypes.add(y);const C=Vi(y)||(()=>new y);this.records.set(y,mc(C,gc));const A=d.providers;if(null!=A&&!E){const x=o;Ii(A,F=>this.processProvider(F,x,A))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,c){let d=_c(o=ne(o))?o:ne(o&&o.provide);const f=function XT(s,o,u){return yE(s)?mc(void 0,s.useValue):mc(function _E(s,o,u){let c;if(_c(s)){const d=ne(s);return Vi(d)||Ug(d)}if(yE(s))c=()=>ne(s.useValue);else if(function Ld(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Xt(s.deps||[]));else if(function eD(s){return!(!s||!s.useExisting)}(s))c=()=>He(ne(s.useExisting));else{const d=ne(s&&(s.useClass||s.provide));if(!function vf(s){return!!s.deps}(s))return Vi(d)||Ug(d);c=()=>new d(...Xt(s.deps))}return c}(s),gc)}(o);if(_c(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=mc(void 0,gc,!0),y.factory=()=>Xt(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===gc&&(u.value=YT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function wf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Ug(s){const o=In(s),u=null!==o?o.factory:Vi(s);if(null!==u)return u;if(s instanceof Pn)throw new Le(204,!1);if(s instanceof Function)return function JT(s){const o=s.length;if(o>0)throw function li(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Le(204,!1);const u=function Kn(s){const o=s&&(s[mi]||s[Fn]);if(o){const u=function Dr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Le(204,!1)}function mc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function yE(s){return null!==s&&"object"==typeof s&&U in s}function _c(s){return"function"==typeof s}let eo=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return gE({name:""},c,u,"");{const f=null!==(d=u.name)&&void 0!==d?d:"";return gE({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=Ss,s.NULL=new rr,s.\u0275prov=Yt({token:s,providedIn:"any",factory:()=>He(Sy)}),s.__NG_ELEMENT_ID__=-1,s})();function iD(s,o){Ba(V_(s)[1],Tn())}let Kr=null;function tu(){if(!Kr){const s=jt.Symbol;if(s&&s.iterator)Kr=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Kr=c)}}}return Kr}function nu(s){return!!Hg(s)&&(Array.isArray(s)||!(s instanceof Map)&&tu()in s)}function Hg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function fi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function ro(s,o,u,c){const d=Se();return fi(d,zs(),o)&&(Ut(),cs(Rn(),d,s,o,u,c)),ro}function ru(s,o,u,c){return fi(s,zs(),u)?o+Q(u)+c:kt}function Vy(s,o,u,c,d,f,y,E){const C=Se(),A=Ut(),x=s+20,F=A.firstCreatePass?function fD(s,o,u,c,d,f,y,E,C){const A=o.consts,x=Rd(o,s,4,y||null,ji(A,E));kg(o,u,x,ji(A,C)),Ba(o,x);const F=x.tViews=Ng(2,x,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),F.queries=o.queries.embeddedTView(x)),x}(x,A,C,o,u,c,d,f,y):A.data[x];yi(F,!1);const H=C[11].createComment("");xd(A,C,H,F),Ci(H,C),Cy(C,C[x]=WT(H,C,H,F)),es(F)&&Nd(A,C,F),null!=y&&gy(C,F,E)}function kE(s){return function ns(s,o){return s[o]}(function ud(){return mt.lFrame.contextLView}(),20+s)}function If(s,o=ht.Default){const u=Se();return null===u?He(s,o):Vu(Tn(),u,ne(s),o)}function qE(){throw new Error("invalid")}function Zy(s,o,u){const c=Se();return fi(c,zs(),o)&&ls(Ut(),Rn(),c,s,o,c[11],u,!1),Zy}function Yy(s,o,u,c,d){const y=d?"class":"style";Fg(s,u,o.inputs[y],y,c)}function Kg(s,o,u,c){const d=Se(),f=Ut(),y=20+s,E=d[11],C=d[y]=hi(E,o,function Va(){return mt.lFrame.currentNamespace}()),A=f.firstCreatePass?function bD(s,o,u,c,d,f,y){const E=o.consts,A=Rd(o,s,2,d,ji(E,f));return kg(o,u,A,ji(E,y)),null!==A.attrs&&Od(A,A.attrs,!1),null!==A.mergedAttrs&&Od(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,d,0,o,u,c):f.data[y];yi(A,!0);const x=A.mergedAttrs;null!==x&&et(E,C,x);const F=A.classes;null!==F&&wg(E,C,F);const H=A.styles;return null!==H&&G0(E,C,H),64!=(64&A.flags)&&xd(f,d,C,A),0===function ad(){return mt.lFrame.elementDepthCount}()&&Ci(C,d),function Au(){mt.lFrame.elementDepthCount++}(),es(A)&&(Nd(f,d,A),function py(s,o,u){if(Iu(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}(f,A,d)),null!==c&&gy(d,A),Kg}function Cf(){let s=Tn();Bl()?function Ma(){mt.lFrame.isParent=!1}():(s=s.parent,yi(s,!1));const o=s;!function Ll(){mt.lFrame.elementDepthCount--}();const u=Ut();return u.firstCreatePass&&(Ba(u,s),Iu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Hh(s){return 0!=(16&s.flags)}(o)&&Yy(u,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function x_(s){return 0!=(32&s.flags)}(o)&&Yy(u,o,Se(),o.stylesWithoutHost,!1),Cf}function Qy(s,o,u,c){return Kg(s,o,u,c),Cf(),Qy}function ZE(){return Se()}function jd(s){return!!s&&"function"==typeof s.then}function Jy(s){return!!s&&"function"==typeof s.subscribe}const Xy=Jy;function Ao(s,o,u,c){const d=Se(),f=Ut(),y=Tn();return function QE(s,o,u,c,d,f,y,E){const C=es(c),x=s.firstCreatePass&&Lg(s),F=o[8],H=Og(o);let ee=!0;if(3&c.type||E){const Ue=dr(c,o),tt=E?E(Ue):Ue,Ae=H.length,pt=E?Pt=>E(dn(Pt[c.index])):c.index;if(mn(u)){let Pt=null;if(!E&&C&&(Pt=function YE(s,o,u,c){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===u&&d[f+1]===c){const E=o[7],C=d[f+2];return E.length>C?E[C]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,c.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=f,Pt.__ngLastListenerFn__=f,ee=!1;else{f=tv(c,o,F,f,!1);const fn=u.listen(tt,d,f);H.push(f,fn),x&&x.push(d,pt,Ae,Ae+1)}}else f=tv(c,o,F,f,!0),tt.addEventListener(d,f,y),H.push(f),x&&x.push(d,pt,Ae,y)}else f=tv(c,o,F,f,!1);const Ee=c.outputs;let Ve;if(ee&&null!==Ee&&(Ve=Ee[d])){const Ue=Ve.length;if(Ue)for(let tt=0;tt<Ue;tt+=2){const ps=o[Ve[tt]][Ve[tt+1]].subscribe(f),Cl=H.length;H.push(f,ps),x&&x.push(d,c.index,Cl,-(Cl+1))}}}(f,d,d[11],y,s,o,!!u,c),Ao}function JE(s,o,u,c){try{return!1!==u(c)}catch(d){return dE(s,d),!1}}function tv(s,o,u,c,d){return function f(y){if(y===Function)return c;const E=2&s.flags?Ar(s.index,o):o;0==(32&o[2])&&aE(E);let C=JE(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)C=JE(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function $d(s,o,u){return nv(s,"",o,"",u),$d}function nv(s,o,u,c,d){const f=Se(),y=ru(f,o,u,c);return y!==kt&&ls(Ut(),Rn(),f,s,y,f[11],d,!1),nv}function av(s,o=""){const u=Se(),c=Ut(),d=s+20,f=c.firstCreatePass?Rd(c,d,1,o,null):c.data[d],y=u[d]=function dg(s,o){return mn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);xd(c,u,y,f),yi(f,!1)}function uv(s){return nm("",s,""),uv}function nm(s,o,u){const c=Se(),d=ru(c,s,o,u);return d!==kt&&Xa(c,xr(),d),nm}const bc=void 0;var CI=["en",[["a","p"],["AM","PM"],bc],[["AM","PM"],bc,bc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bc,"{1} 'at' {0}",bc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jD(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let qd={};function Rf(s){const o=function gm(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=pm(o);if(u)return u;const c=o.split("-")[0];if(u=pm(c),u)return u;if("en"===c)return CI;throw new Error(`Missing locale data for the locale "${s}".`)}function TI(s){return Rf(s)[vt.PluralCase]}function pm(s){return s in qd||(qd[s]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[s]),qd[s]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Pf="en-US";let Mf=Pf;class qI{}class sS{resolveComponentFactory(o){throw function Nr(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let qf=(()=>{class s{}return s.NULL=new sS,s})();function oS(){return xc(Tn(),Se())}function xc(s,o){return new eh(dr(s,o))}let eh=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=oS,s})();function WI(s){return s instanceof eh?s.nativeElement:s}class Fv{}let uu=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function aS(){const s=Se(),u=Ar(Tn().index,s);return function zI(s){return s[11]}(si(u)?u:s)}(),s})(),Uv=(()=>{class s{}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:()=>null}),s})();class th{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Vv=new th("13.2.3"),Wf={};function Rc(s,o,u,c,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(dn(f)),Xi(f))for(let E=10;E<f.length;E++){const C=f[E],A=C[1].firstChild;null!==A&&Rc(C[1],C,A,c)}const y=u.type;if(8&y)Rc(s,o,u.child,c);else if(32&y){const E=q_(u,o);let C;for(;C=E();)c.push(C)}else if(16&y){const E=j0(o,u);if(Array.isArray(E))c.push(...E);else{const C=df(o[16]);Rc(C[1],C,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class nh{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Rc(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Xi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(fg(o,c),Hu(u,c))}this._attachedToViewContainer=!1}M0(this._lView[1],this._lView)}onDestroy(o){X0(this._lView[1],this._lView,null,o)}markForCheck(){aE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Md(this._lView[1],this._lView,this.context)}checkNoChanges(){!function by(s,o,u){xu(!0);try{Md(s,o,u)}finally{xu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hc(s,o){hf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Le(902,"");this._appRef=o}}class Bv extends nh{constructor(o){super(o),this._view=o}detectChanges(){lE(this._view)}checkNoChanges(){!function Ty(s){xu(!0);try{lE(s)}finally{xu(!1)}}(this._view)}get context(){return null}}class zf extends qf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=st(o);return new Tm(u,this.ngModule)}}function KI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const Kf=new Pn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>b0});class Tm extends qI{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function KR(s){return s.map(zR).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return KI(this.componentDef.inputs)}get outputs(){return KI(this.componentDef.outputs)}create(o,u,c,d){const f=(d=d||this.ngModule)?function YI(s,o){return{get:(u,c,d)=>{const f=s.get(u,Wf,d);return f!==Wf||c===Wf?f:o.get(u,c,d)}}}(o,d.injector):o,y=f.get(Fv,Vo),E=f.get(Uv,null),C=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=c?function J0(s,o,u){if(mn(s))return s.selectRootElement(o,u===St.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):hi(y.createRenderer(null,this.componentDef),A,function ZI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),F=this.componentDef.onPush?576:528,H=function My(s,o){return{components:[],scheduler:s||b0,clean:Dy,playerHandler:o||null,flags:0}}(),ee=Ng(0,null,null,1,0,null,null,null,null,null),Ee=mf(null,ee,H,F,null,null,y,C,E,f);let Ve,Ue;Ua(Ee);try{const tt=function jg(s,o,u,c,d,f){const y=u[1];u[20]=s;const C=Rd(y,20,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(Od(C,A,!0),null!==s&&(et(d,s,A),null!==C.classes&&wg(d,s,C.classes),null!==C.styles&&G0(d,s,C.styles)));const x=c.createRenderer(s,o),F=mf(u,Y0(o),null,o.onPush?64:16,u[20],C,c,x,f||null,null);return y.firstCreatePass&&(Hr(hn(C,u),y,o.type),GT(y,C),iE(C,u.length,1)),Cy(u,F),u[20]=F}(x,this.componentDef,Ee,y,C);if(x)if(c)et(C,x,["ng-version",Vv.full]);else{const{attrs:Ae,classes:pt}=function ZR(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++c]):8===d&&u.push(f);else{if(!na(d))break;d=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ae&&et(C,x,Ae),pt&&pt.length>0&&wg(C,x,pt.join(" "))}if(Ue=Bn(ee,20),void 0!==u){const Ae=Ue.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const Pt=u[pt];Ae.push(null!=Pt?Array.from(Pt):null)}}Ve=function $g(s,o,u,c,d){const f=u[1],y=function nE(s,o,u){const c=Tn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),wy(s,c,o,al(s,o,1,null),u));const d=Ko(o,s,c.directiveStart,c);Ci(d,o);const f=dr(c,o);return f&&Ci(f,o),d}(f,u,o);if(c.components.push(y),s[8]=y,d&&d.forEach(C=>C(y,o)),o.contentQueries){const C=Tn();o.contentQueries(1,y,C.directiveStart)}const E=Tn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ws(E.index),yy(u[1],E,0,E.directiveStart,E.directiveEnd,o),HT(o,y)),y}(tt,this.componentDef,Ee,H,[iD]),pc(ee,Ee,null)}finally{$o()}return new JI(this.componentType,Ve,xc(Ue,Ee),Ee,Ue)}}class JI extends class Gf{}{constructor(o,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new Bv(d),this.componentType=o}get injector(){return new Dn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Pc{}class $v{}const io=new Map;class Gv extends Pc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new zf(this);const c=Ot(o);this._bootstrapComponents=bo(c.bootstrap),this._r3Injector=mE(o,u,[{provide:Pc,useValue:this},{provide:qf,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=eo.THROW_IF_NOT_FOUND,c=ht.Default){return o===eo||o===Pc||o===Sy?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Sm extends $v{constructor(o){super(),this.moduleType=o,null!==Ot(o)&&function XI(s){const o=new Set;!function u(c){const d=Ot(c,!0),f=d.id;null!==f&&(function Hv(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ue(o)} vs ${ue(o.name)}`)}(f,io.get(f),c),io.set(f,c));const y=bo(d.imports);for(const E of y)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new Gv(this.moduleType,o)}}function Me(s){return o=>{setTimeout(s,void 0,o)}}const Sn=class ge extends _.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,f,y;let E=o,C=u||(()=>null),A=c;if(o&&"object"==typeof o){const F=o;E=null===(d=F.next)||void 0===d?void 0:d.bind(F),C=null===(f=F.error)||void 0===f?void 0:f.bind(F),A=null===(y=F.complete)||void 0===y?void 0:y.bind(F)}this.__isAsync&&(C=Me(C),E&&(E=Me(E)),A&&(A=Me(A)));const x=super.subscribe({next:E,error:C,complete:A});return o instanceof B.w0&&o.add(x),x}};function nC(){return this._results[tu()]()}class zv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=tu(),c=zv.prototype;c[u]||(c[u]=nC)}get changes(){return this._changes||(this._changes=new Sn)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Gr(o);(this._changesDetected=!function $u(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],f=o[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Qf=(()=>{class s{}return s.__NG_ELEMENT_ID__=vS,s})();const _S=Qf,yS=class extends _S{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=mf(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(u)),pc(u,c,o),new nh(c)}};function vS(){return Jf(Tn(),Se())}function Jf(s,o){return 4&s.type?new yS(o,s,xc(s,o)):null}let Rm=(()=>{class s{}return s.__NG_ELEMENT_ID__=xP,s})();function xP(){return Mc(Tn(),Se())}const Ns=Rm,rC=class extends Ns{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return xc(this._hostTNode,this._hostLView)}get injector(){return new Dn(this._hostTNode,this._hostLView)}get parentInjector(){const o=Wo(this._hostTNode,this._hostLView);if(Hn(o)){const u=Go(o,this._hostLView),c=Ho(o);return new Dn(u[1].data[c+8],u)}return new Dn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Kv(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,f){const y=o&&!function Wa(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const F=u||{};E=F.index,c=F.injector,d=F.projectableNodes,f=F.ngModuleRef}const C=y?o:new Tm(st(o)),A=c||this.parentInjector;if(!f&&null==C.ngModule){const H=(y?A:this.parentInjector).get(Pc,null);H&&(f=H)}const x=C.create(A,d,void 0,f);return this.insert(x.hostView,E),x}insert(o,u){const c=o._lView,d=c[1];if(function Pa(s){return Xi(s[3])}(c)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const F=c[3],H=new rC(F,F[6],F[3]);H.detach(H.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function Ad(s,o,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=o),c<f-10?(o[4]=u[d],za(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function _T(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,y,f);const E=_g(f,y),C=c[11],A=gg(C,y[7]);return null!==A&&function hg(s,o,u,c,d,f){c[0]=d,c[6]=o,hf(s,c,u,1,d,f)}(d,y[6],C,c,A,E),o.attachToViewContainerRef(),za($t(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Kv(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=fg(this._lContainer,u);c&&(Hu($t(this._lContainer),u),M0(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=fg(this._lContainer,u);return c&&null!=Hu($t(this._lContainer),u)?new nh(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function Kv(s){return s[8]}function $t(s){return s[8]||(s[8]=[])}function Mc(s,o){let u;const c=o[s.index];if(Xi(c))u=c;else{let d;if(8&s.type)d=dn(c);else{const f=o[11];d=f.createComment("");const y=dr(s,o);sl(f,gg(f,y),d,function vT(s,o){return mn(s)?s.nextSibling(o):o.nextSibling}(f,y),!1)}o[s.index]=u=WT(c,o,d,s),Cy(o,u)}return new rC(u,s,o)}class Pm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Pm(this.queryList)}setDirty(){this.queryList.setDirty()}}class cu{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const y=u.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new cu(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==ml(o,u).matches&&this.queries[u].setDirty()}}class Zv{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class kc{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new kc(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class tn{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new tn(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,u,wS(u,f)),this.matchTNodeWithReadOption(o,u,Cs(u,o,f,!1,!1))}else c===Qf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Cs(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===eh||d===Rm||d===Qf&&4&u.type)this.addMatch(u.index,-2);else{const f=Cs(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function wS(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function sh(s,o,u,c){return-1===u?function ei(s,o){return 11&s.type?xc(s,o):4&s.type?Jf(s,o):null}(o,s):-2===u?function ES(s,o,u){return u===eh?xc(o,s):u===Qf?Jf(o,s):u===Rm?Mc(o,s):void 0}(s,o,c):Ko(s,s[1],u,o)}function kr(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const f=s.data,y=u.matches,E=[];for(let C=0;C<y.length;C+=2){const A=y[C];E.push(A<0?null:sh(o,f[A],y[C+1],u.metadata.read))}d.matches=E}return d.matches}function Yv(s,o,u,c){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const y=kr(s,o,d,u);for(let E=0;E<f.length;E+=2){const C=f[E];if(C>0)c.push(y[E/2]);else{const A=f[E+1],x=o[-C];for(let F=10;F<x.length;F++){const H=x[F];H[17]===H[3]&&Yv(H[1],H,A,c)}if(null!==x[9]){const F=x[9];for(let H=0;H<F.length;H++){const ee=F[H];Yv(ee[1],ee,A,c)}}}}}return c}function du(s){const o=Se(),u=Ut(),c=Hl();Gl(c+1);const d=ml(u,c);if(s.dirty&&mo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?Yv(u,o,c,[]):kr(u,o,d,c);s.reset(f,WI),s.notifyOnChanges()}return!0}return!1}function gl(s,o,u,c){const d=Ut();if(d.firstCreatePass){const f=Tn();(function oC(s,o,u){null===s.queries&&(s.queries=new kc),s.queries.track(new tn(o,u))})(d,new Zv(o,u,c),f.index),function Oc(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function oh(s,o,u){const c=new zv(4==(4&u));X0(s,o,c,c.destroy),null===o[19]&&(o[19]=new cu),o[19].queries.push(new Pm(c))}(d,Se(),u)}function Nm(){return function sC(s,o){return s[19].queries[o].queryList}(Se(),Hl())}function ml(s,o){return s.queries.getByIndex(o)}function rp(...s){}const $m=new Pn("Application Initializer");let yl=(()=>{class s{constructor(u){this.appInits=u,this.resolve=rp,this.reject=rp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(jd(f))u.push(f);else if(Xy(f)){const y=new Promise((E,C)=>{f.subscribe({complete:E,error:C})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(He($m,8))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const Hm=new Pn("AppId"),SS={provide:Hm,useFactory:function yC(){return`${Gm()}${Gm()}${Gm()}`},deps:[]};function Gm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sw=new Pn("Platform Initializer"),ow=new Pn("Platform ID"),ip=new Pn("appBootstrapListener");let vC=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const sp=new Pn("LocaleId"),$c=new Pn("DefaultCurrencyCode");class wC{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let vl=(()=>{class s{compileModuleSync(u){return new Sm(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=bo(Ot(u).declarations).reduce((y,E)=>{const C=st(E);return C&&y.push(new Tm(C)),y},[]);return new wC(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const op=(()=>Promise.resolve(0))();function aw(s){"undefined"==typeof Zone?op.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ln{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sn(!1),this.onMicrotaskEmpty=new Sn(!1),this.onStable=new Sn(!1),this.onError=new Sn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function RS(){let s=jt.requestAnimationFrame,o=jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function uw(s){const o=()=>{!function PS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(jt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,lw(s),s.isCheckStableRunning=!0,fh(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),lw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,y,E)=>{try{return cw(s),u.invokeTask(d,f,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),dw(s)}},onInvoke:(u,c,d,f,y,E,C)=>{try{return cw(s),u.invoke(d,f,y,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),dw(s)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,lw(s),fh(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ln.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ln.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,qm,rp,rp);try{return f.runTask(y,u,c)}finally{f.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const qm={};function fh(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function lw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function cw(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function dw(s){s._nesting--,fh(s)}class ap{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sn,this.onMicrotaskEmpty=new Sn,this.onStable=new Sn,this.onError=new Sn}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let wl=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ln.assertNotInAngularZone(),aw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())aw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(He(ln))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})(),hw=(()=>{class s{constructor(){this._applications=new Map,Hc.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Hc.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();class IC{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function CC(s){Hc=s}let Ms,Hc=new IC;const fw=new Pn("AllowMultipleToken");class bC{constructor(o,u){this.name=o,this.token=u}}function up(s,o,u=[]){const c=`Platform: ${o}`,d=new Pn(c);return(f=[])=>{let y=pw();if(!y||y.injector.get(fw,!1))if(s)s(u.concat(f).concat({provide:d,useValue:!0}));else{const E=u.concat(f).concat({provide:d,useValue:!0},{provide:yf,useValue:"platform"});!function Cr(s){if(Ms&&!Ms.destroyed&&!Ms.injector.get(fw,!1))throw new Le(400,"");Ms=s.get(Gc);const o=s.get(sw,null);o&&o.forEach(u=>u())}(eo.create({providers:E,name:c}))}return function pi(s){const o=pw();if(!o)throw new Le(401,"");return o}()}}function pw(){return Ms&&!Ms.destroyed?Ms:null}let Gc=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function MS(s,o){let u;return u="noop"===s?new ap:("zone.js"===s?void 0:s)||new ln({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:ln,useValue:E}];return E.run(()=>{const A=eo.create({providers:C,parent:this.injector,name:u.moduleType.name}),x=u.create(A),F=x.injector.get(cf,null);if(!F)throw new Le(402,"");return E.runOutsideAngular(()=>{const H=E.onError.subscribe({next:ee=>{F.handleError(ee)}});x.onDestroy(()=>{gw(this._modules,x),H.unsubscribe()})}),function oo(s,o,u){try{const c=u();return jd(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(F,E,()=>{const H=x.injector.get(yl);return H.runInitializers(),H.donePromise.then(()=>(function qD(s){at(s,"Expected localeId to be defined"),"string"==typeof s&&(Mf=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(sp,Pf)||Pf),this._moduleDoBootstrap(x),x))})})}bootstrapModule(u,c=[]){const d=TC({},c);return function NS(s,o,u){const c=new Sm(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(qc);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Le(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(He(eo))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function TC(s,o){return Array.isArray(o)?o.reduce(TC,s):Object.assign(Object.assign({},s),o)}let qc=(()=>{class s{constructor(u,c,d,f,y){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new N.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),C=new N.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{ln.assertNotInAngularZone(),aw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{ln.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),F.unsubscribe()}});this.isStable=(0,ae.T)(E,C.pipe((0,se.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Le(405,"");let d;d=u instanceof qI?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function nn(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Pc),E=d.create(eo.NULL,[],c||d.selector,f),C=E.location.nativeElement,A=E.injector.get(wl,null),x=A&&E.injector.get(hw);return A&&x&&x.registerApplication(C,A),E.onDestroy(()=>{this.detachView(E.hostView),gw(this.components,E),x&&x.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Le(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;gw(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(ip,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(He(ln),He(eo),He(cf),He(qf),He(yl))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function gw(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let SC=!0,lp=!1;function cp(){return lp=!0,SC}function dp(){if(lp)throw new Error("Cannot enable prod mode after platform setup.");SC=!1}let AC=(()=>{class s{}return s.__NG_ELEMENT_ID__=OS,s})();function OS(s){return function xC(s,o,u){if(Jc(s)&&!u){const c=Ar(s.index,o);return new nh(c,c)}return 47&s.type?new nh(o[16],o):null}(Tn(),Se(),16==(16&s))}class NC{constructor(){}supports(o){return nu(o)}create(o){return new kC(o)}}const MC=(s,o)=>o;class kC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||MC}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const y=!c||u&&u.currentIndex<LC(c,d,f)?u:c,E=LC(y,d,f),C=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{f||(f=[]);const A=E-d,x=C-d;if(A!=x){for(let H=0;H<A;H++){const ee=H<f.length?f[H]:f[H]=0,Ee=ee+H;x<=Ee&&Ee<A&&(f[H]=ee+1)}f[y.previousIndex]=x-A}}E!==C&&o(y,E,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!nu(o))throw new Le(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,f,y,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,E),c=!0),u=u._next}else d=0,function hD(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[tu()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new OC(u,c),f,d),o}_verifyReinsertion(o,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new ww),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ww),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class OC{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class ww{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new FS,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LC(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class FC{constructor(){}supports(o){return o instanceof Map||Hg(o)}create(){return new ph}}class ph{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Hg(o)))throw new Le(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new gh(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class gh{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UC(){return new Jm([new NC])}let Jm=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||UC()),deps:[[s,new Wr,new Ur]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Le(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:UC}),s})();function Ew(){return new br([new FC])}let br=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ew()),deps:[[s,new Wr,new Ur]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(c)return c;throw new Le(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:Ew}),s})();const US=[new FC],da=new Jm([new NC]),VS=new br(US),El=up(null,"core",[{provide:ow,useValue:"unknown"},{provide:Gc,deps:[eo]},{provide:hw,deps:[]},{provide:vC,deps:[]}]),gr=[{provide:qc,useClass:qc,deps:[ln,eo,cf,qf,yl]},{provide:Kf,deps:[ln],useFactory:function ha(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:yl,useClass:yl,deps:[[new Ur,$m]]},{provide:vl,useClass:vl,deps:[]},SS,{provide:Jm,useFactory:function On(){return da},deps:[]},{provide:br,useFactory:function Ri(){return VS},deps:[]},{provide:sp,useFactory:function BS(s){return s||function jS(){return"undefined"!=typeof $localize&&$localize.locale||Pf}()},deps:[[new Ys(sp),new Ur,new Wr]]},{provide:$c,useValue:"USD"}];let fs=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(He(qc))},s.\u0275mod=oe({type:s}),s.\u0275inj=en({providers:gr}),s})()},3942:(ot,De,O)=>{"use strict";O.d(De,{Z:()=>Le});var _=O(2090),B=O(4859),N=O(9681),ae=O(1877);class se{constructor(Q,ce){this._delegate=Q,this.firebase=ce,(0,N._addComponent)(Q,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this._delegate.automaticDataCollectionEnabled=Q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Q=>{this._delegate.checkDestroyed(),Q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Q,ce=N._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(Q);return!Pe.isInitialized()&&"EXPLICIT"===(null===(Re=Pe.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:ce})}_removeServiceInstance(Q,ce=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Q).clearInstance(ce)}_addComponent(Q){(0,N._addComponent)(this._delegate,Q)}_addOrOverwriteComponent(Q){(0,N._addOrOverwriteComponent)(this._delegate,Q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function _e(){const je=function ue(je){const Q={},ce={__esModule:!0,initializeApp:function he(re,Qe={}){const X=N.initializeApp(re,Qe);if((0,_.r3)(Q,X.name))return Q[X.name];const pe=new je(X,ce);return Q[X.name]=pe,pe},app:Pe,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function ve(re){const Qe=re.name,X=Qe.replace("-compat","");if(N._registerComponent(re)&&"PUBLIC"===re.type){const pe=(fe=Pe())=>{if("function"!=typeof fe[X])throw le.create("invalid-app-argument",{appName:Qe});return fe[X]()};void 0!==re.serviceProps&&(0,_.ZB)(pe,re.serviceProps),ce[X]=pe,je.prototype[X]=function(...fe){return this._getService.bind(this,Qe).apply(this,re.multipleInstances?fe:[])}}return"PUBLIC"===re.type?ce[X]:null},removeApp:function Re(re){delete Q[re]},useAsService:function ze(re,Qe){return"serverAuth"===Qe?null:Qe},modularAPIs:N}};function Pe(re){if(!(0,_.r3)(Q,re=re||N._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:re});return Q[re]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function be(){return Object.keys(Q).map(re=>Q[re])}}),Pe.App=je,ce}(se);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function Q(ce){(0,_.ZB)(je,ce)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),je}(),$=new ae.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=G;!function xe(je){(0,N.registerVersion)("@firebase/app-compat","0.1.18",je)}()},9681:(ot,De,O)=>{"use strict";O.r(De),O.d(De,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Zi,_DEFAULT_ENTRY_NAME:()=>xn,_addComponent:()=>sn,_addOrOverwriteComponent:()=>yr,_apps:()=>rt,_clearComponents:()=>In,_components:()=>ur,_getProvider:()=>Ht,_registerComponent:()=>Yt,_removeServiceInstance:()=>en,deleteApp:()=>Yi,getApp:()=>Fi,getApps:()=>Fn,initializeApp:()=>mi,onLog:()=>An,registerVersion:()=>Or,setLogLevel:()=>Wt});var _=O(5861),B=O(4859),N=O(1877),ae=O(2090);class se{constructor(ut){this.container=ut}getPlatformInfoString(){return this.container.getProviders().map(bt=>{if(function me(ct){const ut=ct.getComponent();return"VERSION"===(null==ut?void 0:ut.type)}(bt)){const Qt=bt.getImmediate();return`${Qt.library}/${Qt.version}`}return null}).filter(bt=>bt).join(" ")}}const le="@firebase/app",_e=new N.Yd("@firebase/app"),xn="[DEFAULT]",at={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rt=new Map,ur=new Map;function sn(ct,ut){try{ct.container.addComponent(ut)}catch(bt){_e.debug(`Component ${ut.name} failed to register with FirebaseApp ${ct.name}`,bt)}}function yr(ct,ut){ct.container.addOrOverwriteComponent(ut)}function Yt(ct){const ut=ct.name;if(ur.has(ut))return _e.debug(`There were multiple attempts to register component ${ut}.`),!1;ur.set(ut,ct);for(const bt of rt.values())sn(bt,ct);return!0}function Ht(ct,ut){return ct.container.getProvider(ut)}function en(ct,ut,bt=xn){Ht(ct,ut).clearInstance(bt)}function In(){ur.clear()}const Kn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Dr{constructor(ut,bt,Qt){this._isDeleted=!1,this._options=Object.assign({},ut),this._config=Object.assign({},bt),this._name=bt.name,this._automaticDataCollectionEnabled=bt.automaticDataCollectionEnabled,this._container=Qt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ut){this.checkDestroyed(),this._automaticDataCollectionEnabled=ut}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ut){this._isDeleted=ut}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}const Zi="9.6.7";function mi(ct,ut={}){"object"!=typeof ut&&(ut={name:ut});const bt=Object.assign({name:xn,automaticDataCollectionEnabled:!1},ut),Qt=bt.name;if("string"!=typeof Qt||!Qt)throw Kn.create("bad-app-name",{appName:String(Qt)});const lr=rt.get(Qt);if(lr){if((0,ae.vZ)(ct,lr.options)&&(0,ae.vZ)(bt,lr.config))return lr;throw Kn.create("duplicate-app",{appName:Qt})}const St=new B.H0(Qt);for(const Je of ur.values())St.addComponent(Je);const it=new Dr(ct,bt,St);return rt.set(Qt,it),it}function Fi(ct=xn){const ut=rt.get(ct);if(!ut)throw Kn.create("no-app",{appName:ct});return ut}function Fn(){return Array.from(rt.values())}function Yi(ct){return ht.apply(this,arguments)}function ht(){return(ht=(0,_.Z)(function*(ct){const ut=ct.name;rt.has(ut)&&(rt.delete(ut),yield Promise.all(ct.container.getProviders().map(bt=>bt.delete())),ct.isDeleted=!0)})).apply(this,arguments)}function Or(ct,ut,bt){var Qt;let lr=null!==(Qt=at[ct])&&void 0!==Qt?Qt:ct;bt&&(lr+=`-${bt}`);const St=lr.match(/\s|\//),it=ut.match(/\s|\//);if(St||it){const Je=[`Unable to register library "${lr}" with version "${ut}":`];return St&&Je.push(`library name "${lr}" contains illegal characters (whitespace or "/")`),St&&it&&Je.push("and"),it&&Je.push(`version name "${ut}" contains illegal characters (whitespace or "/")`),void _e.warn(Je.join(" "))}Yt(new B.wA(`${lr}-version`,()=>({library:lr,version:ut}),"VERSION"))}function An(ct,ut){if(null!==ct&&"function"!=typeof ct)throw Kn.create("invalid-log-argument");(0,N.Am)(ct,ut)}function Wt(ct){(0,N.Ub)(ct)}!function Sr(ct){Yt(new B.wA("platform-logger",ut=>new se(ut),"PRIVATE")),Or(le,"0.7.17",ct),Or(le,"0.7.17","esm2017"),Or("fire-js","")}("")},4859:(ot,De,O)=>{"use strict";O.d(De,{wA:()=>N,H0:()=>ue,zt:()=>se});var _=O(5861),B=O(2090);class N{constructor(G,$,ne){this.name=G,this.instanceFactory=$,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class se{constructor(G,$){this.name=G,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const $=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has($)){const ne=new B.BH;if(this.instancesDeferred.set($,ne),this.isInitialized($)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:$});$e&&ne.resolve($e)}catch($e){}}return this.instancesDeferred.get($).promise}getImmediate(G){var $;const ne=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),$e=null!==($=null==G?void 0:G.optional)&&void 0!==$&&$;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(xe){if($e)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function le(_e){return"EAGER"===_e.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch($){}for(const[$,ne]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier($);try{const xe=this.getOrInitializeService({instanceIdentifier:$e});ne.resolve(xe)}catch(xe){}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,_.Z)(function*(){const $=Array.from(G.instances.values());yield Promise.all([...$.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...$.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:$={}}=G,ne=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:ne,options:$});for(const[xe,Le]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(xe)&&Le.resolve($e);return $e}onInit(G,$){var ne;const $e=this.normalizeInstanceIdentifier($),xe=null!==(ne=this.onInitCallbacks.get($e))&&void 0!==ne?ne:new Set;xe.add(G),this.onInitCallbacks.set($e,xe);const Le=this.instances.get($e);return Le&&G(Le,$e),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,$){const ne=this.onInitCallbacks.get($);if(ne)for(const $e of ne)try{$e(G,$)}catch(xe){}}getOrInitializeService({instanceIdentifier:G,options:$={}}){let ne=this.instances.get(G);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=G,_e===ae?void 0:_e),options:$}),this.instances.set(G,ne),this.instancesOptions.set(G,$),this.invokeOnInitCallbacks(ne,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ne)}catch($e){}var _e;return ne||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const $=this.getProvider(G.name);if($.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);$.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const $=new se(G,this);return this.providers.set(G,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,De,O)=>{"use strict";O.d(De,{in:()=>B,Yd:()=>le,Ub:()=>ue,Am:()=>_e});const _=[];var B=(()=>{return(G=B||(B={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",B;var G})();const N={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ae=B.INFO,se={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},me=(G,$,...ne)=>{if($<G.logLevel)return;const $e=(new Date).toISOString(),xe=se[$];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[xe](`[${$e}]  ${G.name}:`,...ne)};class le{constructor($){this.name=$,this._logLevel=ae,this._logHandler=me,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in B))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?N[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...$),this._logHandler(this,B.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...$),this._logHandler(this,B.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,B.INFO,...$),this._logHandler(this,B.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,B.WARN,...$),this._logHandler(this,B.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...$),this._logHandler(this,B.ERROR,...$)}}function ue(G){_.forEach($=>{$.setLogLevel(G)})}function _e(G,$){for(const ne of _){let $e=null;$&&$.level&&($e=N[$.level]),ne.userLogHandler=null===G?null:(xe,Le,...je)=>{const Q=je.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch(Re){return null}}).filter(ce=>ce).join(" ");Le>=(null!=$e?$e:xe.logLevel)&&G({level:B[Le].toLowerCase(),message:Q,args:je,type:xe.name})}}}},5861:(ot,De,O)=>{"use strict";function _(N,ae,se,me,le,ue,_e){try{var G=N[ue](_e),$=G.value}catch(ne){return void se(ne)}G.done?ae($):Promise.resolve($).then(me,le)}function B(N){return function(){var ae=this,se=arguments;return new Promise(function(me,le){var ue=N.apply(ae,se);function _e($){_(ue,me,le,_e,G,"next",$)}function G($){_(ue,me,le,_e,G,"throw",$)}_e(void 0)})}}O.d(De,{Z:()=>B})}},ot=>{ot(ot.s=5753)}]);